diff -urN module-init-tools-3.2/CODING module-init-tools-3.2-STEP/CODING
--- module-init-tools-3.2/CODING	2005-05-12 15:43:15.000000000 +1200
+++ module-init-tools-3.2-STEP/CODING	2006-04-27 00:45:16.021125544 +1200
@@ -39,7 +39,7 @@
 	$MODTEST_OVERRIDE_WITH1, etc.  The numbers must be consecutive:
 	the code stops searching for a replacement when a number is not
 	found.  This is used to stop the utilities looking in 
-	/lib/modules/2.5.52/ for example.
+	/System/Drivers/2.5.52/ for example.
 
 	Other environment variables can be found in testing.h.
 
diff -urN module-init-tools-3.2/ChangeLog module-init-tools-3.2-STEP/ChangeLog
--- module-init-tools-3.2/ChangeLog	2005-11-19 15:15:17.000000000 +1300
+++ module-init-tools-3.2-STEP/ChangeLog	2006-04-27 00:44:45.504764736 +1200
@@ -80,7 +80,7 @@
 	dependency has install command but is already installed (thanks to Trond Myklebust)
 o configure.in: remove -Wcast-align, gives warnings on IA64 (thanks to
 	Andrew Morton). 
-o install-with-care: don't hardcode /usr/bin/install (thanks Pierre)
+o install-with-care: don't hardcode /System/Tools/install (thanks Pierre)
 o generate-modprobe.conf: handle "add" lines in modules.conf
 o modprobe: -q now only means "silently succeed on unknown modules".
 o modprobe: update usage message
@@ -142,13 +142,13 @@
 o rmmod.8: Fix raw lsmod(8) references (use proper sgml markup).
 o modinfo.c, rmmod.c: Fix includes for when no backwards compat
 	(Thanks to Bill Nottingham).
-o Makefile.am: lsmod.old symlink from /bin to /sbin in move-old-targets
+o Makefile.am: lsmod.old symlink from /System/Tools to /System/AdminTools in move-old-targets
 o depmod: sparc gcc register variable fake undefined fix.
 o Makefile.am: Handle Mandrake's .bz2 man pages (Thanks to Paolo Giarrusso)
 o depmod: backwards compat at 2.5.48, not 2.5.47 (Thanks to Martin Schimschak)
 o depmod: ieee1394 support (Thanks to Ben Collins)
 o depmod: updated test suite for ieee1394
-o Makefile: make symlink from /sbin/lsmod to /bin/lsmod if that's where we're going.
+o Makefile: make symlink from /System/AdminTools/lsmod to /System/Tools/lsmod if that's where we're going.
 o modinfo: add manual page.
 o modprobe: --show-depends (Asked by Herbert Xu for mkinitrd).
 o depmod: Simply and fix loop detection for non-trivial loops
@@ -164,7 +164,7 @@
 o modprobe: Add MODPROBE_OPTIONS env. var, and use it to pass some options.
 o Fix make moveold: (Thanks to Pavel Roskin, Will Stephenson)
 o README: Mention modprobe.devfs for devfs users (Thanks to Pavel Roskin)
-o lsmod: belongs in /bin, not /sbin (Thanks to Marco d'Itri)
+o lsmod: belongs in /System/Tools, not /System/AdminTools (Thanks to Marco d'Itri)
 o Makefile: create man directories (Thanks to John Levon)
 o Makefile: no, use normal automake (Thanks v. much to John Levon)
 o Makefile: docbook2man tweaks and cleanups (Thanks to Terje Rosten)
@@ -221,7 +221,7 @@
 o Double free fix (Marco d'Itri)
 o Add --dry-run as synonym for --show everywhere.
 o Change backwards compat test to sys_create_module(NULL, 0) != -ENOSYS,
-  for people who want /proc/ksyms.
+  for people who want /System/Processes/ksyms.
 o modules.conf2modprobe.conf renamed to generate-modprobe.conf, uses
   modprobe -c to get built-ins as well.
 	
@@ -230,7 +230,7 @@
 o Audit for more _ - comparisons: canonicalize at input.
 o Fix "include overrides alias" bug found during audit.
 o Testsuite added
-o lsmod ignores trailing (new-style) entries in /proc/modules, and deletes ,.
+o lsmod ignores trailing (new-style) entries in /System/Processes/modules, and deletes ,.
 o message segfault due to reusing varargs fixed.
 o Give 0 exit status with --dry-run with wildcards (Roger Luethi's bug report)
 o Add --all option (Roger Luethi's bug report)
@@ -240,7 +240,7 @@
 o Fix complex duplicate elimination handling.
 o Implemented --ignore-command in modprobe
 o Implemented "remove" in modprobe's modprobe.conf parsing.
-o Don't die if /proc/modules can't be opened.
+o Don't die if /System/Processes/modules can't be opened.
 o Modprobe -r checks for in-use modules before trying.
 o Warn about lines in modprobe.conf which aren't understood.
 o Remove extra spaces in options generated by modprobe.
@@ -295,7 +295,7 @@
 o Fixed patch in NEWS to leave #include linux/elf.h, needed for
   CONFIG_KALLSYMS.
 o Fixed extra newline in "in use by" message.
-o Fixed parsing for new-style /proc/modules.
+o Fixed parsing for new-style /System/Processes/modules.
 o Fixed version parsing code (thanks to Adam Richter's report)
 o Fixed "running out of filedescriptors" (Adam Richter)	
 o Implemented options in modprobe
@@ -308,7 +308,7 @@
 	
 0.8a Version
 o Fixed erroneous warning on rmmod saying it didn't find module in
-  /proc/modules
+  /System/Processes/modules
 	
 0.8 Version
 o Chris Cheney's automake patch
diff -urN module-init-tools-3.2/FAQ module-init-tools-3.2-STEP/FAQ
--- module-init-tools-3.2/FAQ	2005-05-12 15:23:31.000000000 +1200
+++ module-init-tools-3.2-STEP/FAQ	2006-04-27 00:45:16.021125544 +1200
@@ -1,17 +1,17 @@
 Frequently Asked Module User Questions
 
-Q) I get "/usr/bin/ld: cannot find -lc"
+Q) I get "/System/Tools/ld: cannot find -lc"
 A) You need to install a development package which contains libc.a.
 
 Q) I'm using RedHat and modules don't autoload any more.
-A) Old versions of RedHat turns module autoloading off if /proc/ksyms
+A) Old versions of RedHat turns module autoloading off if /System/Processes/ksyms
    isn't found.  Change line 337 of /etc/rc.d/rc.sysinit from:
 
-  if ! grep -iq nomodules /proc/cmdline 2>/dev/null && [ -f /proc/ksyms ]; then
+  if ! grep -iq nomodules /System/Processes/cmdline 2>/System/Devices/null && [ -f /System/Processes/ksyms ]; then
 
    to
 
-  if ! grep -iq nomodules /proc/cmdline 2>/dev/null && [ -f /proc/modules ]; then
+  if ! grep -iq nomodules /System/Processes/cmdline 2>/System/Devices/null && [ -f /System/Processes/modules ]; then
 
 Q) Things still don't load properly.
 A) Do you have an /etc/modprobe.conf?  If not, use
diff -urN module-init-tools-3.2/INSTALL module-init-tools-3.2-STEP/INSTALL
--- module-init-tools-3.2/INSTALL	2002-11-25 18:44:51.000000000 +1300
+++ module-init-tools-3.2-STEP/INSTALL	2006-04-27 00:44:45.507764280 +1200
@@ -100,7 +100,7 @@
 ==================
 
    By default, `make install' will install the package's files in
-`/usr/local/bin', `/usr/local/man', etc.  You can specify an
+`/usr/local/System/Tools', `/usr/local/man', etc.  You can specify an
 installation prefix other than `/usr/local' by giving `configure' the
 option `--prefix=PATH'.
 
@@ -184,7 +184,7 @@
 variables may be lost.  In order to avoid this problem, you should set
 them in the `configure' command line, using `VAR=value'.  For example:
 
-     ./configure CC=/usr/local2/bin/gcc
+     ./configure CC=/usr/local2/System/Tools/gcc
 
 will cause the specified gcc to be used as the C compiler (unless it is
 overridden in the site shell script).
@@ -206,7 +206,7 @@
 
 `--cache-file=FILE'
      Enable the cache: use and save the results of the tests in FILE,
-     traditionally `config.cache'.  FILE defaults to `/dev/null' to
+     traditionally `config.cache'.  FILE defaults to `/System/Devices/null' to
      disable caching.
 
 `--config-cache'
@@ -217,7 +217,7 @@
 `--silent'
 `-q'
      Do not print messages saying which checks are being made.  To
-     suppress all normal output, redirect it to `/dev/null' (any error
+     suppress all normal output, redirect it to `/System/Devices/null' (any error
      messages will still be shown).
 
 `--srcdir=DIR'
diff -urN module-init-tools-3.2/Makefile.am module-init-tools-3.2-STEP/Makefile.am
--- module-init-tools-3.2/Makefile.am	2005-08-09 16:54:28.000000000 +1200
+++ module-init-tools-3.2-STEP/Makefile.am	2006-04-27 00:55:18.132590688 +1200
@@ -36,27 +36,14 @@
 
 TESTS = tests/runtests
 
-DIST_DIR := /home/rusty/devel/kernel/www/modules/
+DIST_DIR := /home/rusty/System/Devicesel/kernel/www/modules/
 
 MAINTAINERCLEANFILES := $(man_MANS)
 
 # According to Warren Togami, RH has docbook2man in the docbook-utils rpm.
-DOCBOOKTOMAN := $(shell if command -v docbook-to-man >/dev/null 2>&1; then echo docbook-to-man; else echo docbook2man; fi)
+DOCBOOKTOMAN := $(shell if command -v docbook-to-man >/System/Devices/null 2>&1; then echo docbook-to-man; else echo docbook2man; fi)
 
 # docbook2man writes file itself, doesn't do stdout.
-%.8: doc/%.sgml
-	if [ "$(DOCBOOKTOMAN)" = "docbook2man" ]; then                     \
-	    $(DOCBOOKTOMAN) $< > /dev/null 2>&1;                       \
-	else                                                               \
-	    $(DOCBOOKTOMAN) $< 2>&1 > $@ | sed 's/^[^:]*://';              \
-	fi
-
-%.5: doc/%.sgml
-	if [ "$(DOCBOOKTOMAN)" = "docbook2man" ]; then                     \
-	    $(DOCBOOKTOMAN) $< > /dev/null 2>&1;                       \
-	else                                                               \
-	    $(DOCBOOKTOMAN) $< 2>&1 > $@ | sed 's/^[^:]*://';              \
-	fi
 
 # docbook2man creates extra crap files which need cleaning.
 distclean: killbuildmanpages
@@ -73,10 +60,10 @@
 	ln -sf $(DIST_DIR)/module-init-tools-$(VERSION).tar.gz /usr/src/rpm/SOURCES/
 	set -e; RELEASE=`grep '^Release:' /usr/src/rpm/SPECS/modutils.spec | awk '{ print $$2 }'`; \
 	if [ "`grep '%define mit_ver' /usr/src/rpm/SPECS/modutils.spec | awk '{print $$3}'`" != $(VERSION) ]; then \
-		sed -e "s/Release: $$RELEASE/Release: `expr $$RELEASE + 1`/" -e 's/%define mit_ver.*/%define mit_ver $(VERSION)/' < /usr/src/rpm/SPECS/modutils.spec > /tmp/modutils.spec; \
-		rpm -ba /tmp/modutils.spec; \
+		sed -e "s/Release: $$RELEASE/Release: `expr $$RELEASE + 1`/" -e 's/%define mit_ver.*/%define mit_ver $(VERSION)/' < /usr/src/rpm/SPECS/modutils.spec > /System/TemporaryFiles/modutils.spec; \
+		rpm -ba /System/TemporaryFiles/modutils.spec; \
 		mv /usr/src/rpm/SRPMS/modutils-2.4.21-`expr $$RELEASE + 1`.src.rpm $(DIST_DIR); \
-		mv /tmp/modutils.spec /usr/src/rpm/SPECS/modutils.spec; \
+		mv /System/TemporaryFiles/modutils.spec /usr/src/rpm/SPECS/modutils.spec; \
 	else \
 		rpm -ba /usr/src/rpm/SPECS/modutils.spec; \
 		mv /usr/src/rpm/SRPMS/modutils-2.4.21-$$RELEASE.src.rpm $(DIST_DIR); \
@@ -85,40 +72,40 @@
 # No testsuite?
 tests/runtests:
 	mkdir tests
-	echo '#! /bin/sh' > $@
+	echo '#! /System/Tools/sh' > $@
 	echo '# Install the testsuite over this dir. ' >> $@
 	chmod a+x $@
 
 $(DIST_DIR)/module-init-tools-testsuite-$(VERSION).tar.gz:
-	ln -sfn `pwd` /tmp/module-init-tools-$(VERSION) 
-	cd /tmp && tar --exclude '*~' -c -z -f $@ module-init-tools-$(VERSION)/tests
-	rm /tmp/module-init-tools-$(VERSION)
+	ln -sfn `pwd` /System/TemporaryFiles/module-init-tools-$(VERSION) 
+	cd /System/TemporaryFiles && tar --exclude '*~' -c -z -f $@ module-init-tools-$(VERSION)/tests
+	rm /System/TemporaryFiles/module-init-tools-$(VERSION)
 
 release: check clean tarball
 
 moveold: check-for-sbin check-for-old move-old-targets
 
 check-for-sbin:
-	if [ "`echo $(DESTDIR)$(sbindir) | tr -s / /`" = /sbin ]; then :;    \
+	if [ "`echo $(DESTDIR)$(sbindir) | tr -s / /`" = /System/AdminTools ]; then :;    \
 	else								     \
-		echo moveold usually only makes sense when installing into /sbin; \
+		echo moveold usually only makes sense when installing into /System/AdminTools; \
 		exit 1;							     \
 	fi
 
 check-for-old:
-	if [ -f /sbin/lsmod.old ]; then					\
+	if [ -f /System/AdminTools/lsmod.old ]; then					\
 		echo Someone already moved old versions. >&2; exit 1;	\
 	fi
 
 # Don't just move symlinks, reset them to point to xxx.old.
 # RedHat 8.0 doesn't ship with readlink by default.  Use ls -l.
-# Also, make symlink from /bin to /sbin for lsmod (FHS compliant).
+# Also, make symlink from /System/Tools to /System/AdminTools for lsmod (FHS compliant).
 move-old-targets:
 	for f in lsmod modprobe rmmod depmod insmod modinfo; do		    \
-	    if [ -L /sbin/$$f ]; then					    \
-		ln -sf `ls -l /sbin/$$f | sed 's/.* -> //'`.old /sbin/$$f;  \
+	    if [ -L /System/AdminTools/$$f ]; then					    \
+		ln -sf `ls -l /System/AdminTools/$$f | sed 's/.* -> //'`.old /System/AdminTools/$$f;  \
 	    fi;								    \
-	    mv /sbin/$$f /sbin/$$f.old;					    \
+	    mv /System/AdminTools/$$f /System/AdminTools/$$f.old;					    \
 	    if [ -f /usr/share/man/man8/$$f.8.gz ]; then		    \
 		mv /usr/share/man/man8/$$f.8.gz				    \
 			/usr/share/man/man8/$$f.old.8.gz;		    \
@@ -130,13 +117,13 @@
 	    fi;								    \
 	done
 	for f in kallsyms ksyms; do					    \
-	    if [ -L /sbin/$$f ]; then					    \
-		ln -sf `ls -l /sbin/$$f | sed 's/.* -> //'`.old /sbin/$$f;  \
+	    if [ -L /System/AdminTools/$$f ]; then					    \
+		ln -sf `ls -l /System/AdminTools/$$f | sed 's/.* -> //'`.old /System/AdminTools/$$f;  \
 	    fi;								    \
 	done
-	ln -s /sbin/lsmod.old /bin/lsmod.old
+	ln -s /System/AdminTools/lsmod.old /System/Tools/lsmod.old
 
-# For installs in /usr/local/sbin
+# For installs in /usr/local/System/AdminTools
 links:
-	for f in insmod modprobe rmmod depmod; do ln -s /sbin/$$f $(DESTDIR)$(sbindir)/$$f.old; done
-	for f in  lsmod; do ln -s /sbin/$$f $(DESTDIR)$(bindir)/$$f.old; done
+	for f in insmod modprobe rmmod depmod; do ln -s /System/AdminTools/$$f $(DESTDIR)$(sbindir)/$$f.old; done
+	for f in  lsmod; do ln -s /System/AdminTools/$$f $(DESTDIR)$(bindir)/$$f.old; done
diff -urN module-init-tools-3.2/Makefile.in module-init-tools-3.2-STEP/Makefile.in
--- module-init-tools-3.2/Makefile.in	2005-11-19 15:16:17.000000000 +1300
+++ module-init-tools-3.2-STEP/Makefile.in	2006-04-27 00:52:23.219181568 +1200
@@ -118,12 +118,12 @@
 
 TESTS = tests/runtests
 
-DIST_DIR := /home/rusty/devel/kernel/www/modules/
+DIST_DIR := /home/rusty/System/Devicesel/kernel/www/modules/
 
 MAINTAINERCLEANFILES := $(man_MANS)
 
 # According to Warren Togami, RH has docbook2man in the docbook-utils rpm.
-DOCBOOKTOMAN := $(shell if command -v docbook-to-man >/dev/null 2>&1; then echo docbook-to-man; else echo docbook2man; fi)
+DOCBOOKTOMAN := $(shell if command -v docbook-to-man >/System/Devices/null 2>&1; then echo docbook-to-man; else echo docbook2man; fi)
 subdir = .
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
@@ -706,19 +706,6 @@
 
 
 # docbook2man writes file itself, doesn't do stdout.
-%.8: doc/%.sgml
-	if [ "$(DOCBOOKTOMAN)" = "docbook2man" ]; then                     \
-	    $(DOCBOOKTOMAN) $< > /dev/null 2>&1;                       \
-	else                                                               \
-	    $(DOCBOOKTOMAN) $< 2>&1 > $@ | sed 's/^[^:]*://';              \
-	fi
-
-%.5: doc/%.sgml
-	if [ "$(DOCBOOKTOMAN)" = "docbook2man" ]; then                     \
-	    $(DOCBOOKTOMAN) $< > /dev/null 2>&1;                       \
-	else                                                               \
-	    $(DOCBOOKTOMAN) $< 2>&1 > $@ | sed 's/^[^:]*://';              \
-	fi
 
 # docbook2man creates extra crap files which need cleaning.
 distclean: killbuildmanpages
@@ -735,10 +722,10 @@
 	ln -sf $(DIST_DIR)/module-init-tools-$(VERSION).tar.gz /usr/src/rpm/SOURCES/
 	set -e; RELEASE=`grep '^Release:' /usr/src/rpm/SPECS/modutils.spec | awk '{ print $$2 }'`; \
 	if [ "`grep '%define mit_ver' /usr/src/rpm/SPECS/modutils.spec | awk '{print $$3}'`" != $(VERSION) ]; then \
-		sed -e "s/Release: $$RELEASE/Release: `expr $$RELEASE + 1`/" -e 's/%define mit_ver.*/%define mit_ver $(VERSION)/' < /usr/src/rpm/SPECS/modutils.spec > /tmp/modutils.spec; \
-		rpm -ba /tmp/modutils.spec; \
+		sed -e "s/Release: $$RELEASE/Release: `expr $$RELEASE + 1`/" -e 's/%define mit_ver.*/%define mit_ver $(VERSION)/' < /usr/src/rpm/SPECS/modutils.spec > /System/TemporaryFiles/modutils.spec; \
+		rpm -ba /System/TemporaryFiles/modutils.spec; \
 		mv /usr/src/rpm/SRPMS/modutils-2.4.21-`expr $$RELEASE + 1`.src.rpm $(DIST_DIR); \
-		mv /tmp/modutils.spec /usr/src/rpm/SPECS/modutils.spec; \
+		mv /System/TemporaryFiles/modutils.spec /usr/src/rpm/SPECS/modutils.spec; \
 	else \
 		rpm -ba /usr/src/rpm/SPECS/modutils.spec; \
 		mv /usr/src/rpm/SRPMS/modutils-2.4.21-$$RELEASE.src.rpm $(DIST_DIR); \
@@ -747,40 +734,40 @@
 # No testsuite?
 tests/runtests:
 	mkdir tests
-	echo '#! /bin/sh' > $@
+	echo '#! /System/Tools/sh' > $@
 	echo '# Install the testsuite over this dir. ' >> $@
 	chmod a+x $@
 
 $(DIST_DIR)/module-init-tools-testsuite-$(VERSION).tar.gz:
-	ln -sfn `pwd` /tmp/module-init-tools-$(VERSION) 
-	cd /tmp && tar --exclude '*~' -c -z -f $@ module-init-tools-$(VERSION)/tests
-	rm /tmp/module-init-tools-$(VERSION)
+	ln -sfn `pwd` /System/TemporaryFiles/module-init-tools-$(VERSION) 
+	cd /System/TemporaryFiles && tar --exclude '*~' -c -z -f $@ module-init-tools-$(VERSION)/tests
+	rm /System/TemporaryFiles/module-init-tools-$(VERSION)
 
 release: check clean tarball
 
 moveold: check-for-sbin check-for-old move-old-targets
 
 check-for-sbin:
-	if [ "`echo $(DESTDIR)$(sbindir) | tr -s / /`" = /sbin ]; then :;    \
+	if [ "`echo $(DESTDIR)$(sbindir) | tr -s / /`" = /System/AdminTools ]; then :;    \
 	else								     \
-		echo moveold usually only makes sense when installing into /sbin; \
+		echo moveold usually only makes sense when installing into /System/AdminTools; \
 		exit 1;							     \
 	fi
 
 check-for-old:
-	if [ -f /sbin/lsmod.old ]; then					\
+	if [ -f /System/AdminTools/lsmod.old ]; then					\
 		echo Someone already moved old versions. >&2; exit 1;	\
 	fi
 
 # Don't just move symlinks, reset them to point to xxx.old.
 # RedHat 8.0 doesn't ship with readlink by default.  Use ls -l.
-# Also, make symlink from /bin to /sbin for lsmod (FHS compliant).
+# Also, make symlink from /System/Tools to /System/AdminTools for lsmod (FHS compliant).
 move-old-targets:
 	for f in lsmod modprobe rmmod depmod insmod modinfo; do		    \
-	    if [ -L /sbin/$$f ]; then					    \
-		ln -sf `ls -l /sbin/$$f | sed 's/.* -> //'`.old /sbin/$$f;  \
+	    if [ -L /System/AdminTools/$$f ]; then					    \
+		ln -sf `ls -l /System/AdminTools/$$f | sed 's/.* -> //'`.old /System/AdminTools/$$f;  \
 	    fi;								    \
-	    mv /sbin/$$f /sbin/$$f.old;					    \
+	    mv /System/AdminTools/$$f /System/AdminTools/$$f.old;					    \
 	    if [ -f /usr/share/man/man8/$$f.8.gz ]; then		    \
 		mv /usr/share/man/man8/$$f.8.gz				    \
 			/usr/share/man/man8/$$f.old.8.gz;		    \
@@ -792,16 +779,16 @@
 	    fi;								    \
 	done
 	for f in kallsyms ksyms; do					    \
-	    if [ -L /sbin/$$f ]; then					    \
-		ln -sf `ls -l /sbin/$$f | sed 's/.* -> //'`.old /sbin/$$f;  \
+	    if [ -L /System/AdminTools/$$f ]; then					    \
+		ln -sf `ls -l /System/AdminTools/$$f | sed 's/.* -> //'`.old /System/AdminTools/$$f;  \
 	    fi;								    \
 	done
-	ln -s /sbin/lsmod.old /bin/lsmod.old
+	ln -s /System/AdminTools/lsmod.old /System/Tools/lsmod.old
 
-# For installs in /usr/local/sbin
+# For installs in /usr/local/System/AdminTools
 links:
-	for f in insmod modprobe rmmod depmod; do ln -s /sbin/$$f $(DESTDIR)$(sbindir)/$$f.old; done
-	for f in  lsmod; do ln -s /sbin/$$f $(DESTDIR)$(bindir)/$$f.old; done
+	for f in insmod modprobe rmmod depmod; do ln -s /System/AdminTools/$$f $(DESTDIR)$(sbindir)/$$f.old; done
+	for f in  lsmod; do ln -s /System/AdminTools/$$f $(DESTDIR)$(bindir)/$$f.old; done
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
diff -urN module-init-tools-3.2/README module-init-tools-3.2-STEP/README
--- module-init-tools-3.2/README	2003-06-03 12:16:12.000000000 +1200
+++ module-init-tools-3.2-STEP/README	2006-04-27 00:44:45.494766256 +1200
@@ -1,6 +1,6 @@
 READ INSTRUCTIONS CAREFULLY, OTHERWISE YOU MAY DESTROY YOUR OLD UTILS!
 
-1a) If you want to install in /sbin:
+1a) If you want to install in /System/AdminTools:
 	./configure --prefix=/
 	make moveold (if installing for the first time).
 
@@ -10,12 +10,12 @@
 
 OR,
 
-1b) If you want to install in /usr/local/sbin:
+1b) If you want to install in /usr/local/System/AdminTools:
 	./configure
 	make links
 
   "make links" makes links to the previous insmod, modprobe, rmmod and
-  lsmod (which are in /sbin) in /usr/local/sbin
+  lsmod (which are in /System/AdminTools) in /usr/local/System/AdminTools
 
 2) Now, build it:
 	make
diff -urN module-init-tools-3.2/TODO module-init-tools-3.2-STEP/TODO
--- module-init-tools-3.2/TODO	2002-11-29 16:13:27.000000000 +1300
+++ module-init-tools-3.2-STEP/TODO	2006-04-27 00:44:45.534760176 +1200
@@ -1,6 +1,6 @@
 Partially Ordered TODO list:
 
-DONE: oprofile1) Fix rmmod to handle module offsets in /proc/modules
+DONE: oprofile1) Fix rmmod to handle module offsets in /System/Processes/modules
 DONE: Andi1) Fix new rmmod to set O_SYNC
 DONE: Petr1) Fix install mess which blows away old modutils sometimes.
 DONE: Petr2) Dummy insmod -p, -s and -f options.
@@ -12,12 +12,12 @@
 DONE: Modprobe1) Release 0.8
 	Requires Andi1, oprofile1, depmod1, depmod2, Modprobe0, Petr1, Petr2
 
-oprofile2) Fix /proc/modules format
+oprofile2) Fix /System/Processes/modules format
 	Needs oprofile1
-oprofile3) Put module location in /proc/modules
+oprofile3) Put module location in /System/Processes/modules
 	Needs oprofile2, Rth7
 
-Andi2) Change module->live to module->state, and show in /proc/modules
+Andi2) Change module->live to module->state, and show in /System/Processes/modules
 Andi3) Fix kernel to detect old rmmods (using O_SYNC)
 	Needs Andi2
 
diff -urN module-init-tools-3.2/aclocal.m4 module-init-tools-3.2-STEP/aclocal.m4
--- module-init-tools-3.2/aclocal.m4	2005-11-19 15:16:16.000000000 +1300
+++ module-init-tools-3.2-STEP/aclocal.m4	2006-04-27 00:44:49.656133632 +1200
@@ -220,7 +220,7 @@
 # (eg FreeBSD returns the mod time of the symlink's containing
 # directory).
 if (
-   set X `ls -Lt $srcdir/configure conftest.file 2> /dev/null`
+   set X `ls -Lt $srcdir/configure conftest.file 2> /System/Devices/null`
    if test "$[*]" = "X"; then
       # -L didn't work.
       set X `ls -t $srcdir/configure conftest.file`
@@ -518,9 +518,9 @@
     if depmode=$depmode \
        source=conftest.c object=conftest.o \
        depfile=conftest.Po tmpdepfile=conftest.TPo \
-       $SHELL ./depcomp $depcc -c conftest.c -o conftest.o >/dev/null 2>&1 &&
-       grep conftest.h conftest.Po > /dev/null 2>&1 &&
-       ${MAKE-make} -s -f confmf > /dev/null 2>&1; then
+       $SHELL ./depcomp $depcc -c conftest.c -o conftest.o >/System/Devices/null 2>&1 &&
+       grep conftest.h conftest.Po > /System/Devices/null 2>&1 &&
+       ${MAKE-make} -s -f confmf > /System/Devices/null 2>&1; then
       am_cv_$1_dependencies_compiler_type=$depmode
       break
     fi
@@ -541,15 +541,15 @@
 # Choose a directory name for dependency files.
 # This macro is AC_REQUIREd in _AM_DEPENDENCIES
 AC_DEFUN([AM_SET_DEPDIR],
-[rm -f .deps 2>/dev/null
-mkdir .deps 2>/dev/null
+[rm -f .deps 2>/System/Devices/null
+mkdir .deps 2>/System/Devices/null
 if test -d .deps; then
   DEPDIR=.deps
 else
   # MS-DOS does not allow filenames that begin with a dot.
   DEPDIR=_deps
 fi
-rmdir .deps 2>/dev/null
+rmdir .deps 2>/System/Devices/null
 AC_SUBST([DEPDIR])
 ])
 
@@ -601,12 +601,12 @@
   # Grep'ing the first line is not enough: some people post-process
   # each Makefile.in and add a new line on top of each file to say so.
   # So let's grep whole file.
-  if grep '^#.*generated by automake' $mf > /dev/null 2>&1; then
+  if grep '^#.*generated by automake' $mf > /System/Devices/null 2>&1; then
     dirpart=`AS_DIRNAME("$mf")`
   else
     continue
   fi
-  grep '^DEP_FILES *= *[[^ @%:@]]' < "$mf" > /dev/null || continue
+  grep '^DEP_FILES *= *[[^ @%:@]]' < "$mf" > /System/Devices/null || continue
   # Extract the definition of DEP_FILES from the Makefile without
   # running `make'.
   DEPDIR=`sed -n -e '/^DEPDIR = / s///p' < "$mf"`
@@ -692,7 +692,7 @@
 # In particular we don't look at `^make:' because GNU make might
 # be invoked under some other name (usually "gmake"), in which
 # case it prints its new name instead of `make'.
-if test "`$am_make -s -f confmf 2> /dev/null | fgrep -v 'ing directory'`" = "done"; then
+if test "`$am_make -s -f confmf 2> /System/Devices/null | fgrep -v 'ing directory'`" = "done"; then
    am__include=include
    am__quote=
    _am_result=GNU
@@ -700,7 +700,7 @@
 # Now try BSD make style include.
 if test "$am__include" = "#"; then
    echo '.include "confinc"' > confmf
-   if test "`$am_make -s -f confmf 2> /dev/null`" = "done"; then
+   if test "`$am_make -s -f confmf 2> /System/Devices/null`" = "done"; then
       am__include=.include
       am__quote="\""
       _am_result=BSD
diff -urN module-init-tools-3.2/config.guess module-init-tools-3.2-STEP/config.guess
--- module-init-tools-3.2/config.guess	2002-11-26 14:38:55.000000000 +1300
+++ module-init-tools-3.2-STEP/config.guess	2006-04-27 00:44:49.672131200 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Attempt to guess a canonical system name.
 #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
 #   2000, 2001, 2002 Free Software Foundation, Inc.
@@ -100,7 +100,7 @@
 
 # This shell variable is my proudest work .. or something. --bje
 
-set_cc_for_build='tmpdir=${TMPDIR-/tmp}/config-guess-$$ ;
+set_cc_for_build='tmpdir=${TMPDIR-/System/TemporaryFiles}/config-guess-$$ ;
 (old=`umask` && umask 077 && mkdir $tmpdir && umask $old && unset old)
    || (echo "$me: cannot create $tmpdir" >&2 && exit 1) ;
 dummy=$tmpdir/dummy ;
@@ -109,7 +109,7 @@
 case $CC_FOR_BUILD,$HOST_CC,$CC in
  ,,)    echo "int x;" > $dummy.c ;
 	for c in cc gcc c89 c99 ; do
-	  if ($c $dummy.c -c -o $dummy.o) >/dev/null 2>&1 ; then
+	  if ($c $dummy.c -c -o $dummy.o) >/System/Devices/null 2>&1 ; then
 	     CC_FOR_BUILD="$c"; break ;
 	  fi ;
 	done ;
@@ -125,14 +125,14 @@
 
 # This is needed to find uname on a Pyramid OSx when run in the BSD universe.
 # (ghazi@noc.rutgers.edu 1994-08-24)
-if (test -f /.attbin/uname) >/dev/null 2>&1 ; then
+if (test -f /.attbin/uname) >/System/Devices/null 2>&1 ; then
 	PATH=$PATH:/.attbin ; export PATH
 fi
 
-UNAME_MACHINE=`(uname -m) 2>/dev/null` || UNAME_MACHINE=unknown
-UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown
-UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
-UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
+UNAME_MACHINE=`(uname -m) 2>/System/Devices/null` || UNAME_MACHINE=unknown
+UNAME_RELEASE=`(uname -r) 2>/System/Devices/null` || UNAME_RELEASE=unknown
+UNAME_SYSTEM=`(uname -s) 2>/System/Devices/null`  || UNAME_SYSTEM=unknown
+UNAME_VERSION=`(uname -v) 2>/System/Devices/null` || UNAME_VERSION=unknown
 
 # Note: order is significant - the case branches are not exclusive.
 
@@ -149,8 +149,8 @@
 	# Note: NetBSD doesn't particularly care about the vendor
 	# portion of the name.  We always set it to "unknown".
 	sysctl="sysctl -n hw.machine_arch"
-	UNAME_MACHINE_ARCH=`(/sbin/$sysctl 2>/dev/null || \
-	    /usr/sbin/$sysctl 2>/dev/null || echo unknown)`
+	UNAME_MACHINE_ARCH=`(/System/AdminTools/$sysctl 2>/System/Devices/null || \
+	    /System/AdminTools/$sysctl 2>/System/Devices/null || echo unknown)`
 	case "${UNAME_MACHINE_ARCH}" in
 	    armeb) machine=armeb-unknown ;;
 	    arm*) machine=arm-unknown ;;
@@ -163,8 +163,8 @@
 	case "${UNAME_MACHINE_ARCH}" in
 	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
 		eval $set_cc_for_build
-		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
-			| grep __ELF__ >/dev/null
+		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/System/Devices/null \
+			| grep __ELF__ >/System/Devices/null
 		then
 		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).
 		    # Return netbsd for either.  FIX?
@@ -225,7 +225,7 @@
 	exit 0 ;;
     alpha:OSF1:*:*)
 	if test $UNAME_RELEASE = "V4.0"; then
-		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
+		UNAME_RELEASE=`/System/AdminTools/sizer -v | awk '{print $3}'`
 	fi
 	# A Vn.n version is a released version.
 	# A Tn.n version is a released field test version.
@@ -257,7 +257,7 @@
 	jsr \$26,exit
 	.end main
 EOF
-	$CC_FOR_BUILD $dummy.s -o $dummy 2>/dev/null
+	$CC_FOR_BUILD $dummy.s -o $dummy 2>/System/Devices/null
 	if test "$?" = 0 ; then
 		case `$dummy` in
 			0-0)
@@ -318,7 +318,7 @@
 	exit 0;;
     Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
 	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
-	if test "`(/bin/universe) 2>/dev/null`" = att ; then
+	if test "`(/System/Tools/universe) 2>/System/Devices/null`" = att ; then
 		echo pyramid-pyramid-sysv3
 	else
 		echo pyramid-pyramid-bsd
@@ -328,7 +328,7 @@
 	echo pyramid-pyramid-svr4
 	exit 0 ;;
     DRS?6000:UNIX_SV:4.2*:7*)
-	case `/usr/bin/uname -p` in
+	case `/System/Tools/uname -p` in
 	    sparc) echo sparc-icl-nx7 && exit 0 ;;
 	esac ;;
     sun4H:SunOS:5.*:*)
@@ -347,7 +347,7 @@
 	echo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
 	exit 0 ;;
     sun4*:SunOS:*:*)
-	case "`/usr/bin/arch -k`" in
+	case "`/System/Tools/arch -k`" in
 	    Series*|S4*)
 		UNAME_RELEASE=`uname -v`
 		;;
@@ -359,9 +359,9 @@
 	echo m68k-sun-sunos${UNAME_RELEASE}
 	exit 0 ;;
     sun*:*:4.2BSD:*)
-	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
+	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/System/Devices/null`
 	test "x${UNAME_RELEASE}" = "x" && UNAME_RELEASE=3
-	case "`/bin/arch`" in
+	case "`/System/Tools/arch`" in
 	    sun3)
 		echo m68k-sun-sunos${UNAME_RELEASE}
 		;;
@@ -466,7 +466,7 @@
 	exit 0 ;;
     AViiON:dgux:*:*)
         # DG/UX returns AViiON for all architectures
-        UNAME_PROCESSOR=`/usr/bin/uname -p`
+        UNAME_PROCESSOR=`/System/Tools/uname -p`
 	if [ $UNAME_PROCESSOR = mc88100 ] || [ $UNAME_PROCESSOR = mc88110 ]
 	then
 	    if [ ${TARGET_BINARY_INTERFACE}x = m88kdguxelfx ] || \
@@ -503,15 +503,15 @@
 	echo i386-ibm-aix
 	exit 0 ;;
     ia64:AIX:*:*)
-	if [ -x /usr/bin/oslevel ] ; then
-		IBM_REV=`/usr/bin/oslevel`
+	if [ -x /System/Tools/oslevel ] ; then
+		IBM_REV=`/System/Tools/oslevel`
 	else
 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
 	fi
 	echo ${UNAME_MACHINE}-ibm-aix${IBM_REV}
 	exit 0 ;;
     *:AIX:2:3)
-	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
+	if grep bos325 /usr/include/stdio.h >/System/Devices/null 2>&1; then
 		eval $set_cc_for_build
 		sed 's/^		//' << EOF >$dummy.c
 		#include <sys/systemcfg.h>
@@ -527,21 +527,21 @@
 		$CC_FOR_BUILD $dummy.c -o $dummy && $dummy && rm -f $dummy.c $dummy && rmdir $tmpdir && exit 0
 		rm -f $dummy.c $dummy && rmdir $tmpdir
 		echo rs6000-ibm-aix3.2.5
-	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
+	elif grep bos324 /usr/include/stdio.h >/System/Devices/null 2>&1; then
 		echo rs6000-ibm-aix3.2.4
 	else
 		echo rs6000-ibm-aix3.2
 	fi
 	exit 0 ;;
     *:AIX:*:[45])
-	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
-	if /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then
+	IBM_CPU_ID=`/System/AdminTools/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
+	if /System/AdminTools/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/System/Devices/null 2>&1; then
 		IBM_ARCH=rs6000
 	else
 		IBM_ARCH=powerpc
 	fi
-	if [ -x /usr/bin/oslevel ] ; then
-		IBM_REV=`/usr/bin/oslevel`
+	if [ -x /System/Tools/oslevel ] ; then
+		IBM_REV=`/System/Tools/oslevel`
 	else
 		IBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}
 	fi
@@ -574,9 +574,9 @@
 	    9000/31? )            HP_ARCH=m68000 ;;
 	    9000/[34]?? )         HP_ARCH=m68k ;;
 	    9000/[678][0-9][0-9])
-		if [ -x /usr/bin/getconf ]; then
-		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`
-                    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`
+		if [ -x /System/Tools/getconf ]; then
+		    sc_cpu_version=`/System/Tools/getconf SC_CPU_VERSION 2>/System/Devices/null`
+                    sc_kernel_bits=`/System/Tools/getconf SC_KERNEL_BITS 2>/System/Devices/null`
                     case "${sc_cpu_version}" in
                       523) HP_ARCH="hppa1.0" ;; # CPU_PA_RISC1_0
                       528) HP_ARCH="hppa1.1" ;; # CPU_PA_RISC1_1
@@ -623,7 +623,7 @@
                   exit (0);
               }
 EOF
-		    (CCOPTS= $CC_FOR_BUILD $dummy.c -o $dummy 2>/dev/null) && HP_ARCH=`$dummy`
+		    (CCOPTS= $CC_FOR_BUILD $dummy.c -o $dummy 2>/System/Devices/null) && HP_ARCH=`$dummy`
 		    if test -z "$HP_ARCH"; then HP_ARCH=hppa; fi
 		    rm -f $dummy.c $dummy && rmdir $tmpdir
 		fi ;;
@@ -681,7 +681,7 @@
 	echo hppa1.0-hp-osf
 	exit 0 ;;
     i*86:OSF1:*:*)
-	if [ -x /usr/sbin/sysversion ] ; then
+	if [ -x /System/AdminTools/sysversion ] ; then
 	    echo ${UNAME_MACHINE}-unknown-osf1mk
 	else
 	    echo ${UNAME_MACHINE}-unknown-osf1
@@ -755,7 +755,7 @@
 	LIBC=
 	#endif
 EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
+	eval `$CC_FOR_BUILD -E $dummy.c 2>/System/Devices/null | grep ^LIBC=`
 	rm -f $dummy.c && rmdir $tmpdir
 	echo ${UNAME_MACHINE}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`${LIBC:+-$LIBC}
 	exit 0 ;;
@@ -817,7 +817,7 @@
 	#endif
 	#endif
 EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^CPU=`
+	eval `$CC_FOR_BUILD -E $dummy.c 2>/System/Devices/null | grep ^CPU=`
 	rm -f $dummy.c && rmdir $tmpdir
 	test x"${CPU}" != x && echo "${CPU}-pc-linux-gnu" && exit 0
 	;;
@@ -828,7 +828,7 @@
 	echo powerpc64-unknown-linux-gnu
 	exit 0 ;;
     alpha:Linux:*:*)
-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /System/Processes/cpuinfo` in
 	  EV5)   UNAME_MACHINE=alphaev5 ;;
 	  EV56)  UNAME_MACHINE=alphaev56 ;;
 	  PCA56) UNAME_MACHINE=alphapca56 ;;
@@ -837,13 +837,13 @@
 	  EV67)  UNAME_MACHINE=alphaev67 ;;
 	  EV68*) UNAME_MACHINE=alphaev68 ;;
         esac
-	objdump --private-headers /bin/sh | grep ld.so.1 >/dev/null
+	objdump --private-headers /System/Tools/sh | grep ld.so.1 >/System/Devices/null
 	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
 	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
 	exit 0 ;;
     parisc:Linux:*:* | hppa:Linux:*:*)
 	# Look for CPU level
-	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
+	case `grep '^cpu[^a-z]*:' /System/Processes/cpuinfo 2>/System/Devices/null | cut -d' ' -f2` in
 	  PA7*) echo hppa1.1-unknown-linux-gnu ;;
 	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
 	  *)    echo hppa-unknown-linux-gnu ;;
@@ -913,7 +913,7 @@
 	#endif
 	#endif
 EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep ^LIBC=`
+	eval `$CC_FOR_BUILD -E $dummy.c 2>/System/Devices/null | grep ^LIBC=`
 	rm -f $dummy.c && rmdir $tmpdir
 	test x"${LIBC}" != x && echo "${UNAME_MACHINE}-pc-linux-${LIBC}" && exit 0
 	test x"${TENTATIVE}" != x && echo "${TENTATIVE}" && exit 0
@@ -934,14 +934,14 @@
 	exit 0 ;;
     i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)
 	UNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\/MP$//'`
-	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
+	if grep Novell /usr/include/link.h >/System/Devices/null 2>/System/Devices/null; then
 		echo ${UNAME_MACHINE}-univel-sysv${UNAME_REL}
 	else
 		echo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}
 	fi
 	exit 0 ;;
     i*86:*:5:[78]*)
-	case `/bin/uname -X | grep "^Machine"` in
+	case `/System/Tools/uname -X | grep "^Machine"` in
 	    *486*)	     UNAME_MACHINE=i486 ;;
 	    *Pentium)	     UNAME_MACHINE=i586 ;;
 	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
@@ -952,14 +952,14 @@
 	if test -f /usr/options/cb.name; then
 		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
 		echo ${UNAME_MACHINE}-pc-isc$UNAME_REL
-	elif /bin/uname -X 2>/dev/null >/dev/null ; then
-		UNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`
-		(/bin/uname -X|grep i80486 >/dev/null) && UNAME_MACHINE=i486
-		(/bin/uname -X|grep '^Machine.*Pentium' >/dev/null) \
+	elif /System/Tools/uname -X 2>/System/Devices/null >/System/Devices/null ; then
+		UNAME_REL=`(/System/Tools/uname -X|grep Release|sed -e 's/.*= //')`
+		(/System/Tools/uname -X|grep i80486 >/System/Devices/null) && UNAME_MACHINE=i486
+		(/System/Tools/uname -X|grep '^Machine.*Pentium' >/System/Devices/null) \
 			&& UNAME_MACHINE=i586
-		(/bin/uname -X|grep '^Machine.*Pent *II' >/dev/null) \
+		(/System/Tools/uname -X|grep '^Machine.*Pent *II' >/System/Devices/null) \
 			&& UNAME_MACHINE=i686
-		(/bin/uname -X|grep '^Machine.*Pentium Pro' >/dev/null) \
+		(/System/Tools/uname -X|grep '^Machine.*Pentium Pro' >/System/Devices/null) \
 			&& UNAME_MACHINE=i686
 		echo ${UNAME_MACHINE}-pc-sco$UNAME_REL
 	else
@@ -982,7 +982,7 @@
 	echo i860-intel-osf1
 	exit 0 ;;
     i860:*:4.*:*) # i860-SVR4
-	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
+	if grep Stardent /usr/include/sys/uadmin.h >/System/Devices/null 2>&1 ; then
 	  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4
 	else # Add other i860-SVR4 vendors below as they are discovered.
 	  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4
@@ -1001,12 +1001,12 @@
 	OS_REL=''
 	test -r /etc/.relid \
 	&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
-	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+	/System/Tools/uname -p 2>/System/Devices/null | grep 86 >/System/Devices/null \
 	  && echo i486-ncr-sysv4.3${OS_REL} && exit 0
-	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
+	/System/Tools/uname -p 2>/System/Devices/null | /System/Tools/grep entium >/System/Devices/null \
 	  && echo i586-ncr-sysv4.3${OS_REL} && exit 0 ;;
     3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
-        /bin/uname -p 2>/dev/null | grep 86 >/dev/null \
+        /System/Tools/uname -p 2>/System/Devices/null | grep 86 >/System/Devices/null \
           && echo i486-ncr-sysv4 && exit 0 ;;
     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
 	echo m68k-unknown-lynxos${UNAME_RELEASE}
@@ -1036,8 +1036,8 @@
 	echo mips-sni-sysv4
 	exit 0 ;;
     *:SINIX-*:*:*)
-	if uname -p 2>/dev/null >/dev/null ; then
-		UNAME_MACHINE=`(uname -p) 2>/dev/null`
+	if uname -p 2>/System/Devices/null >/System/Devices/null ; then
+		UNAME_MACHINE=`(uname -p) 2>/System/Devices/null`
 		echo ${UNAME_MACHINE}-sni-sysv4
 	else
 		echo ns32k-sni-sysv
@@ -1206,7 +1206,7 @@
 #define __ARCHITECTURE__ "m68k"
 #endif
   int version;
-  version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null`;
+  version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/System/Devices/null`;
   if (version < 4)
     printf ("%s-next-nextstep%d\n", __ARCHITECTURE__, version);
   else
@@ -1283,7 +1283,7 @@
 }
 EOF
 
-$CC_FOR_BUILD $dummy.c -o $dummy 2>/dev/null && $dummy && rm -f $dummy.c $dummy && rmdir $tmpdir && exit 0
+$CC_FOR_BUILD $dummy.c -o $dummy 2>/System/Devices/null && $dummy && rm -f $dummy.c $dummy && rmdir $tmpdir && exit 0
 rm -f $dummy.c $dummy && rmdir $tmpdir
 
 # Apollos put the system type in the environment.
@@ -1332,20 +1332,20 @@
 
 config.guess timestamp = $timestamp
 
-uname -m = `(uname -m) 2>/dev/null || echo unknown`
-uname -r = `(uname -r) 2>/dev/null || echo unknown`
-uname -s = `(uname -s) 2>/dev/null || echo unknown`
-uname -v = `(uname -v) 2>/dev/null || echo unknown`
-
-/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null`
-/bin/uname -X     = `(/bin/uname -X) 2>/dev/null`
-
-hostinfo               = `(hostinfo) 2>/dev/null`
-/bin/universe          = `(/bin/universe) 2>/dev/null`
-/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null`
-/bin/arch              = `(/bin/arch) 2>/dev/null`
-/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null`
-/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null`
+uname -m = `(uname -m) 2>/System/Devices/null || echo unknown`
+uname -r = `(uname -r) 2>/System/Devices/null || echo unknown`
+uname -s = `(uname -s) 2>/System/Devices/null || echo unknown`
+uname -v = `(uname -v) 2>/System/Devices/null || echo unknown`
+
+/System/Tools/uname -p = `(/System/Tools/uname -p) 2>/System/Devices/null`
+/System/Tools/uname -X     = `(/System/Tools/uname -X) 2>/System/Devices/null`
+
+hostinfo               = `(hostinfo) 2>/System/Devices/null`
+/System/Tools/universe          = `(/System/Tools/universe) 2>/System/Devices/null`
+/System/Tools/arch -k       = `(/System/Tools/arch -k) 2>/System/Devices/null`
+/System/Tools/arch              = `(/System/Tools/arch) 2>/System/Devices/null`
+/System/Tools/oslevel       = `(/System/Tools/oslevel) 2>/System/Devices/null`
+/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/System/Devices/null`
 
 UNAME_MACHINE = ${UNAME_MACHINE}
 UNAME_RELEASE = ${UNAME_RELEASE}
diff -urN module-init-tools-3.2/config.sub module-init-tools-3.2-STEP/config.sub
--- module-init-tools-3.2/config.sub	2002-11-26 14:38:55.000000000 +1300
+++ module-init-tools-3.2-STEP/config.sub	2006-04-27 00:44:54.198443096 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Configuration validation subroutine script.
 #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
 #   2000, 2001, 2002 Free Software Foundation, Inc.
diff -urN module-init-tools-3.2/configure module-init-tools-3.2-STEP/configure
--- module-init-tools-3.2/configure	2005-11-19 15:16:18.000000000 +1300
+++ module-init-tools-3.2-STEP/configure	2006-04-27 00:45:04.452884184 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Guess values for system-dependent variables and create Makefiles.
 # Generated by GNU Autoconf 2.59.
 #
@@ -10,19 +10,19 @@
 ## --------------------- ##
 
 # Be Bourne compatible
-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/System/Devices/null 2>&1; then
   emulate sh
   NULLCMD=:
   # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
   # is contrary to our usage.  Disable this feature.
   alias -g '${1+"$@"}'='"$@"'
-elif test -n "${BASH_VERSION+set}" && (set -o posix) >/dev/null 2>&1; then
+elif test -n "${BASH_VERSION+set}" && (set -o posix) >/System/Devices/null 2>&1; then
   set -o posix
 fi
 DUALCASE=1; export DUALCASE # for MKS sh
 
 # Support unset when possible.
-if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
+if ( (MAIL=60; unset MAIL) || exit) >/System/Devices/null 2>&1; then
   as_unset=unset
 else
   as_unset=false
@@ -49,13 +49,13 @@
 done
 
 # Required to use basename.
-if expr a : '\(a\)' >/dev/null 2>&1; then
+if expr a : '\(a\)' >/System/Devices/null 2>&1; then
   as_expr=expr
 else
   as_expr=false
 fi
 
-if (basename /) >/dev/null 2>&1 && test "X`basename / 2>&1`" = "X/"; then
+if (basename /) >/System/Devices/null 2>&1 && test "X`basename / 2>&1`" = "X/"; then
   as_basename=basename
 else
   as_basename=false
@@ -67,7 +67,7 @@
 $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
 	 X"$0" : 'X\(//\)$' \| \
 	 X"$0" : 'X\(/\)$' \| \
-	 .     : '\(.\)' 2>/dev/null ||
+	 .     : '\(.\)' 2>/System/Devices/null ||
 echo X/"$0" |
     sed '/^.*\/\([^/][^/]*\)\/*$/{ s//\1/; q; }
   	  /^X\/\(\/\/\)$/{ s//\1/; q; }
@@ -85,10 +85,10 @@
 
 # The user is always right.
 if test "${PATH_SEPARATOR+set}" != set; then
-  echo "#! /bin/sh" >conf$$.sh
+  echo "#! /System/Tools/sh" >conf$$.sh
   echo  "exit 0"   >>conf$$.sh
   chmod +x conf$$.sh
-  if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
+  if (PATH="/nonexistent;."; conf$$.sh) >/System/Devices/null 2>&1; then
     PATH_SEPARATOR=';'
   else
     PATH_SEPARATOR=:
@@ -99,7 +99,7 @@
 
   as_lineno_1=$LINENO
   as_lineno_2=$LINENO
-  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/System/Devices/null`
   test "x$as_lineno_1" != "x$as_lineno_2" &&
   test "x$as_lineno_3"  = "x$as_lineno_2"  || {
   # Find who we are.  Look in the path if we contain no path at all
@@ -128,7 +128,7 @@
   case $CONFIG_SHELL in
   '')
     as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
+for as_dir in /System/Tools$PATH_SEPARATOR/System/Tools$PATH_SEPARATOR$PATH
 do
   IFS=$as_save_IFS
   test -z "$as_dir" && as_dir=.
@@ -138,9 +138,9 @@
 	   if ("$as_dir/$as_base" -c '
   as_lineno_1=$LINENO
   as_lineno_2=$LINENO
-  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/System/Devices/null`
   test "x$as_lineno_1" != "x$as_lineno_2" &&
-  test "x$as_lineno_3"  = "x$as_lineno_2" ') 2>/dev/null; then
+  test "x$as_lineno_3"  = "x$as_lineno_2" ') 2>/System/Devices/null; then
 	     $as_unset BASH_ENV || test "${BASH_ENV+set}" != set || { BASH_ENV=; export BASH_ENV; }
 	     $as_unset ENV || test "${ENV+set}" != set || { ENV=; export ENV; }
 	     CONFIG_SHELL=$as_dir/$as_base
@@ -191,7 +191,7 @@
   *)       ECHO_N= ECHO_C='\c' ECHO_T= ;;
 esac
 
-if expr a : '\(a\)' >/dev/null 2>&1; then
+if expr a : '\(a\)' >/System/Devices/null 2>&1; then
   as_expr=expr
 else
   as_expr=false
@@ -199,7 +199,7 @@
 
 rm -f conf$$ conf$$.exe conf$$.file
 echo >conf$$.file
-if ln -s conf$$.file conf$$ 2>/dev/null; then
+if ln -s conf$$.file conf$$ 2>/System/Devices/null; then
   # We could just check for DJGPP; but this test a) works b) is more generic
   # and c) will remain valid once DJGPP supports symlinks (DJGPP 2.04).
   if test -f conf$$.exe; then
@@ -208,14 +208,14 @@
   else
     as_ln_s='ln -s'
   fi
-elif ln conf$$.file conf$$ 2>/dev/null; then
+elif ln conf$$.file conf$$ 2>/System/Devices/null; then
   as_ln_s=ln
 else
   as_ln_s='cp -p'
 fi
 rm -f conf$$ conf$$.exe conf$$.file
 
-if mkdir -p . 2>/dev/null; then
+if mkdir -p . 2>/System/Devices/null; then
   as_mkdir_p=:
 else
   test -d ./-p && rmdir ./-p
@@ -244,7 +244,7 @@
 # Name of the host.
 # hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
 # so uname gets run too.
-ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
+ac_hostname=`(hostname || uname -n) 2>/System/Devices/null | sed 1q`
 
 exec 6>&1
 
@@ -257,7 +257,7 @@
 subdirs=
 MFLAGS=
 MAKEFLAGS=
-SHELL=${CONFIG_SHELL-/bin/sh}
+SHELL=${CONFIG_SHELL-/System/Tools/sh}
 
 # Maximum number of lines to put in a shell here document.
 # This variable seems obsolete.  It should probably be removed, and
@@ -279,7 +279,7 @@
 ac_init_version=false
 # The variables have the same names as the options, with
 # dashes changed to underlines.
-cache_file=/dev/null
+cache_file=/System/Devices/null
 exec_prefix=NONE
 no_create=
 no_recursion=
@@ -299,13 +299,13 @@
 # and all the variables that are supposed to be based on exec_prefix
 # by default will actually change.
 # Use braces instead of parens because sh, perl, etc. also accept them.
-bindir='${exec_prefix}/bin'
-sbindir='${exec_prefix}/sbin'
+bindir='${exec_prefix}/System/Tools'
+sbindir='${exec_prefix}/System/AdminTools'
 libexecdir='${exec_prefix}/libexec'
 datadir='${prefix}/share'
 sysconfdir='${prefix}/etc'
 sharedstatedir='${prefix}/com'
-localstatedir='${prefix}/var'
+localstatedir='${prefix}/System/ApplicationData'
 libdir='${exec_prefix}/lib'
 includedir='${prefix}/include'
 oldincludedir='/usr/include'
@@ -357,7 +357,7 @@
   -disable-* | --disable-*)
     ac_feature=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+    expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/System/Devices/null &&
       { echo "$as_me: error: invalid feature name: $ac_feature" >&2
    { (exit 1); exit 1; }; }
     ac_feature=`echo $ac_feature | sed 's/-/_/g'`
@@ -366,7 +366,7 @@
   -enable-* | --enable-*)
     ac_feature=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+    expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/System/Devices/null &&
       { echo "$as_me: error: invalid feature name: $ac_feature" >&2
    { (exit 1); exit 1; }; }
     ac_feature=`echo $ac_feature | sed 's/-/_/g'`
@@ -548,7 +548,7 @@
   -with-* | --with-*)
     ac_package=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+    expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/System/Devices/null &&
       { echo "$as_me: error: invalid package name: $ac_package" >&2
    { (exit 1); exit 1; }; }
     ac_package=`echo $ac_package| sed 's/-/_/g'`
@@ -561,7 +561,7 @@
   -without-* | --without-*)
     ac_package=`expr "x$ac_option" : 'x-*without-\(.*\)'`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/dev/null &&
+    expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/System/Devices/null &&
       { echo "$as_me: error: invalid package name: $ac_package" >&2
    { (exit 1); exit 1; }; }
     ac_package=`echo $ac_package | sed 's/-/_/g'`
@@ -593,7 +593,7 @@
   *=*)
     ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/dev/null &&
+    expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/System/Devices/null &&
       { echo "$as_me: error: invalid variable name: $ac_envvar" >&2
    { (exit 1); exit 1; }; }
     ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`
@@ -603,7 +603,7 @@
   *)
     # FIXME: should be removed in autoconf 3.0.
     echo "$as_me: WARNING: you should use --build, --host, --target" >&2
-    expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
+    expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/System/Devices/null &&
       echo "$as_me: WARNING: invalid host type: $ac_option" >&2
     : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
     ;;
@@ -661,19 +661,19 @@
 ac_tool_prefix=
 test -n "$host_alias" && ac_tool_prefix=$host_alias-
 
-test "$silent" = yes && exec 6>/dev/null
+test "$silent" = yes && exec 6>/System/Devices/null
 
 
 # Find the source files, if location was not specified.
 if test -z "$srcdir"; then
   ac_srcdir_defaulted=yes
   # Try the directory containing this script, then its parent.
-  ac_confdir=`(dirname "$0") 2>/dev/null ||
+  ac_confdir=`(dirname "$0") 2>/System/Devices/null ||
 $as_expr X"$0" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$0" : 'X\(//\)[^/]' \| \
 	 X"$0" : 'X\(//\)$' \| \
 	 X"$0" : 'X\(/\)' \| \
-	 .     : '\(.\)' 2>/dev/null ||
+	 .     : '\(.\)' 2>/System/Devices/null ||
 echo X"$0" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
   	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
@@ -696,7 +696,7 @@
    { (exit 1); exit 1; }; }
   fi
 fi
-(cd $srcdir && test -r ./$ac_unique_file) 2>/dev/null ||
+(cd $srcdir && test -r ./$ac_unique_file) 2>/System/Devices/null ||
   { echo "$as_me: error: sources are in $srcdir, but \`cd $srcdir' does not work" >&2
    { (exit 1); exit 1; }; }
 srcdir=`echo "$srcdir" | sed 's%\([^\\/]\)[\\/]*$%\1%'`
@@ -766,20 +766,20 @@
 			  [PREFIX]
 
 By default, \`make install' will install all the files in
-\`$ac_default_prefix/bin', \`$ac_default_prefix/lib' etc.  You can specify
+\`$ac_default_prefix/System/Tools', \`$ac_default_prefix/lib' etc.  You can specify
 an installation prefix other than \`$ac_default_prefix' using \`--prefix',
 for instance \`--prefix=\$HOME'.
 
 For better control, use the options below.
 
 Fine tuning of the installation directories:
-  --bindir=DIR           user executables [EPREFIX/bin]
-  --sbindir=DIR          system admin executables [EPREFIX/sbin]
+  --bindir=DIR           user executables [EPREFIX/System/Tools]
+  --sbindir=DIR          system admin executables [EPREFIX/System/AdminTools]
   --libexecdir=DIR       program executables [EPREFIX/libexec]
   --datadir=DIR          read-only architecture-independent data [PREFIX/share]
   --sysconfdir=DIR       read-only single-machine data [PREFIX/etc]
   --sharedstatedir=DIR   modifiable architecture-independent data [PREFIX/com]
-  --localstatedir=DIR    modifiable single-machine data [PREFIX/var]
+  --localstatedir=DIR    modifiable single-machine data [PREFIX/System/ApplicationData]
   --libdir=DIR           object code libraries [EPREFIX/lib]
   --includedir=DIR       C header files [PREFIX/include]
   --oldincludedir=DIR    C header files for non-gcc [/usr/include]
@@ -948,22 +948,22 @@
 ## Platform. ##
 ## --------- ##
 
-hostname = `(hostname || uname -n) 2>/dev/null | sed 1q`
-uname -m = `(uname -m) 2>/dev/null || echo unknown`
-uname -r = `(uname -r) 2>/dev/null || echo unknown`
-uname -s = `(uname -s) 2>/dev/null || echo unknown`
-uname -v = `(uname -v) 2>/dev/null || echo unknown`
-
-/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null || echo unknown`
-/bin/uname -X     = `(/bin/uname -X) 2>/dev/null     || echo unknown`
-
-/bin/arch              = `(/bin/arch) 2>/dev/null              || echo unknown`
-/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null       || echo unknown`
-/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null || echo unknown`
-hostinfo               = `(hostinfo) 2>/dev/null               || echo unknown`
-/bin/machine           = `(/bin/machine) 2>/dev/null           || echo unknown`
-/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null       || echo unknown`
-/bin/universe          = `(/bin/universe) 2>/dev/null          || echo unknown`
+hostname = `(hostname || uname -n) 2>/System/Devices/null | sed 1q`
+uname -m = `(uname -m) 2>/System/Devices/null || echo unknown`
+uname -r = `(uname -r) 2>/System/Devices/null || echo unknown`
+uname -s = `(uname -s) 2>/System/Devices/null || echo unknown`
+uname -v = `(uname -v) 2>/System/Devices/null || echo unknown`
+
+/System/Tools/uname -p = `(/System/Tools/uname -p) 2>/System/Devices/null || echo unknown`
+/System/Tools/uname -X     = `(/System/Tools/uname -X) 2>/System/Devices/null     || echo unknown`
+
+/System/Tools/arch              = `(/System/Tools/arch) 2>/System/Devices/null              || echo unknown`
+/System/Tools/arch -k       = `(/System/Tools/arch -k) 2>/System/Devices/null       || echo unknown`
+/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/System/Devices/null || echo unknown`
+hostinfo               = `(hostinfo) 2>/System/Devices/null               || echo unknown`
+/System/Tools/machine           = `(/System/Tools/machine) 2>/System/Devices/null           || echo unknown`
+/System/Tools/oslevel       = `(/System/Tools/oslevel) 2>/System/Devices/null       || echo unknown`
+/System/Tools/universe          = `(/System/Tools/universe) 2>/System/Devices/null          || echo unknown`
 
 _ASUNAME
 
@@ -1173,7 +1173,7 @@
 done
 
 if test -r "$cache_file"; then
-  # Some versions of bash will fail to source /dev/null (special
+  # Some versions of bash will fail to source /System/Devices/null (special
   # files actually), so we avoid doing that.
   if test -f "$cache_file"; then
     { echo "$as_me:$LINENO: loading cache $cache_file" >&5
@@ -1291,7 +1291,7 @@
 ac_configure="$SHELL $ac_aux_dir/configure" # This should be Cygnus configure.
 
 # Make sure we can run config.sub.
-$ac_config_sub sun4 >/dev/null 2>&1 ||
+$ac_config_sub sun4 >/System/Devices/null 2>&1 ||
   { { echo "$as_me:$LINENO: error: cannot run $ac_config_sub" >&5
 echo "$as_me: error: cannot run $ac_config_sub" >&2;}
    { (exit 1); exit 1; }; }
@@ -1377,13 +1377,13 @@
 # Find a good install program.  We prefer a C program (faster),
 # so one script is as good as another.  But avoid the broken or
 # incompatible versions:
-# SysV /etc/install, /usr/sbin/install
+# SysV /etc/install, /System/AdminTools/install
 # SunOS /usr/etc/install
-# IRIX /sbin/install
-# AIX /bin/install
+# IRIX /System/AdminTools/install
+# AIX /System/Tools/install
 # AmigaOS /C/install, which installs bootblocks on floppy discs
-# AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
-# AFS /usr/afsws/bin/install, which mishandles nonexistent args
+# AIX 4 /System/Tools/installbsd, which doesn't work without a -g flag
+# AFS /usr/afsws/System/Tools/install, which mishandles nonexistent args
 # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
 # OS/2's system install, which has a completely different semantic
 # ./install, which can be erroneously created by make from ./install.sh.
@@ -1401,7 +1401,7 @@
   # Account for people who put trailing slashes in PATH elements.
 case $as_dir/ in
   ./ | .// | /cC/* | \
-  /etc/* | /usr/sbin/* | /usr/etc/* | /sbin/* | /usr/afsws/bin/* | \
+  /etc/* | /System/AdminTools/* | /usr/etc/* | /System/AdminTools/* | /usr/afsws/System/Tools/* | \
   ?:\\/os2\\/install\\/* | ?:\\/OS2\\/INSTALL\\/* | \
   /usr/ucb/* ) ;;
   *)
@@ -1412,11 +1412,11 @@
       for ac_exec_ext in '' $ac_executable_extensions; do
 	if $as_executable_p "$as_dir/$ac_prog$ac_exec_ext"; then
 	  if test $ac_prog = install &&
-	    grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+	    grep dspmsg "$as_dir/$ac_prog$ac_exec_ext" >/System/Devices/null 2>&1; then
 	    # AIX install.  It has an incompatible calling convention.
 	    :
 	  elif test $ac_prog = install &&
-	    grep pwplus "$as_dir/$ac_prog$ac_exec_ext" >/dev/null 2>&1; then
+	    grep pwplus "$as_dir/$ac_prog$ac_exec_ext" >/System/Devices/null 2>&1; then
 	    # program-specific install script used by HP pwplus--don't use.
 	    :
 	  else
@@ -1464,7 +1464,7 @@
 # (eg FreeBSD returns the mod time of the symlink's containing
 # directory).
 if (
-   set X `ls -Lt $srcdir/configure conftest.file 2> /dev/null`
+   set X `ls -Lt $srcdir/configure conftest.file 2> /System/Devices/null`
    if test "$*" = "X"; then
       # -L didn't work.
       set X `ls -t $srcdir/configure conftest.file`
@@ -1576,7 +1576,7 @@
 	@echo 'ac_maketemp="$(MAKE)"'
 _ACEOF
 # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
-eval `${MAKE-make} -f conftest.make 2>/dev/null | grep temp=`
+eval `${MAKE-make} -f conftest.make 2>/System/Devices/null | grep temp=`
 if test -n "$ac_maketemp"; then
   eval ac_cv_prog_make_${ac_make}_set=yes
 else
@@ -1732,7 +1732,7 @@
 
 
 # If zlib is required, libz must be linked static, modprobe is in
-# /sbin, libz is in /usr/lib and may not be available when it is run.
+# /System/AdminTools, libz is in /usr/lib and may not be available when it is run.
 # Check whether --enable-zlib or --disable-zlib was given.
 if test "${enable_zlib+set}" = set; then
   enableval="$enable_zlib"
@@ -2064,18 +2064,18 @@
 echo "$as_me:$LINENO:" \
      "checking for C compiler version" >&5
 ac_compiler=`set X $ac_compile; echo $2`
-{ (eval echo "$as_me:$LINENO: \"$ac_compiler --version </dev/null >&5\"") >&5
-  (eval $ac_compiler --version </dev/null >&5) 2>&5
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler --version </System/Devices/null >&5\"") >&5
+  (eval $ac_compiler --version </System/Devices/null >&5) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }
-{ (eval echo "$as_me:$LINENO: \"$ac_compiler -v </dev/null >&5\"") >&5
-  (eval $ac_compiler -v </dev/null >&5) 2>&5
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler -v </System/Devices/null >&5\"") >&5
+  (eval $ac_compiler -v </System/Devices/null >&5) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }
-{ (eval echo "$as_me:$LINENO: \"$ac_compiler -V </dev/null >&5\"") >&5
-  (eval $ac_compiler -V </dev/null >&5) 2>&5
+{ (eval echo "$as_me:$LINENO: \"$ac_compiler -V </System/Devices/null >&5\"") >&5
+  (eval $ac_compiler -V </System/Devices/null >&5) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }
@@ -2257,7 +2257,7 @@
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; then
-  for ac_file in `(ls conftest.o conftest.obj; ls conftest.*) 2>/dev/null`; do
+  for ac_file in `(ls conftest.o conftest.obj; ls conftest.*) 2>/System/Devices/null`; do
   case $ac_file in
     *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb | *.xSYM | *.bb | *.bbg ) ;;
     *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
@@ -2668,15 +2668,15 @@
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
-rm -f .deps 2>/dev/null
-mkdir .deps 2>/dev/null
+rm -f .deps 2>/System/Devices/null
+mkdir .deps 2>/System/Devices/null
 if test -d .deps; then
   DEPDIR=.deps
 else
   # MS-DOS does not allow filenames that begin with a dot.
   DEPDIR=_deps
 fi
-rmdir .deps 2>/dev/null
+rmdir .deps 2>/System/Devices/null
 
 
           ac_config_commands="$ac_config_commands depfiles"
@@ -2700,7 +2700,7 @@
 # In particular we don't look at `^make:' because GNU make might
 # be invoked under some other name (usually "gmake"), in which
 # case it prints its new name instead of `make'.
-if test "`$am_make -s -f confmf 2> /dev/null | fgrep -v 'ing directory'`" = "done"; then
+if test "`$am_make -s -f confmf 2> /System/Devices/null | fgrep -v 'ing directory'`" = "done"; then
    am__include=include
    am__quote=
    _am_result=GNU
@@ -2708,7 +2708,7 @@
 # Now try BSD make style include.
 if test "$am__include" = "#"; then
    echo '.include "confinc"' > confmf
-   if test "`$am_make -s -f confmf 2> /dev/null`" = "done"; then
+   if test "`$am_make -s -f confmf 2> /System/Devices/null`" = "done"; then
       am__include=.include
       am__quote="\""
       _am_result=BSD
@@ -2791,9 +2791,9 @@
     if depmode=$depmode \
        source=conftest.c object=conftest.o \
        depfile=conftest.Po tmpdepfile=conftest.TPo \
-       $SHELL ./depcomp $depcc -c conftest.c -o conftest.o >/dev/null 2>&1 &&
-       grep conftest.h conftest.Po > /dev/null 2>&1 &&
-       ${MAKE-make} -s -f confmf > /dev/null 2>&1; then
+       $SHELL ./depcomp $depcc -c conftest.c -o conftest.o >/System/Devices/null 2>&1 &&
+       grep conftest.h conftest.Po > /System/Devices/null 2>&1 &&
+       ${MAKE-make} -s -f confmf > /System/Devices/null 2>&1; then
       am_cv_CC_dependencies_compiler_type=$depmode
       break
     fi
@@ -2889,9 +2889,9 @@
      t end
      /^ac_cv_env/!s/^\([^=]*\)=\(.*\)$/\1=${\1=\2}/
      : end' >>confcache
-if diff $cache_file confcache >/dev/null 2>&1; then :; else
+if diff $cache_file confcache >/System/Devices/null 2>&1; then :; else
   if test -w $cache_file; then
-    test "x$cache_file" != "x/dev/null" && echo "updating cache $cache_file"
+    test "x$cache_file" != "x/System/Devices/null" && echo "updating cache $cache_file"
     cat confcache >$cache_file
   else
     echo "not updating unwritable cache $cache_file"
@@ -2998,19 +2998,19 @@
 ## --------------------- ##
 
 # Be Bourne compatible
-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
+if test -n "${ZSH_VERSION+set}" && (emulate sh) >/System/Devices/null 2>&1; then
   emulate sh
   NULLCMD=:
   # Zsh 3.x and 4.x performs word splitting on ${1+"$@"}, which
   # is contrary to our usage.  Disable this feature.
   alias -g '${1+"$@"}'='"$@"'
-elif test -n "${BASH_VERSION+set}" && (set -o posix) >/dev/null 2>&1; then
+elif test -n "${BASH_VERSION+set}" && (set -o posix) >/System/Devices/null 2>&1; then
   set -o posix
 fi
 DUALCASE=1; export DUALCASE # for MKS sh
 
 # Support unset when possible.
-if ( (MAIL=60; unset MAIL) || exit) >/dev/null 2>&1; then
+if ( (MAIL=60; unset MAIL) || exit) >/System/Devices/null 2>&1; then
   as_unset=unset
 else
   as_unset=false
@@ -3037,13 +3037,13 @@
 done
 
 # Required to use basename.
-if expr a : '\(a\)' >/dev/null 2>&1; then
+if expr a : '\(a\)' >/System/Devices/null 2>&1; then
   as_expr=expr
 else
   as_expr=false
 fi
 
-if (basename /) >/dev/null 2>&1 && test "X`basename / 2>&1`" = "X/"; then
+if (basename /) >/System/Devices/null 2>&1 && test "X`basename / 2>&1`" = "X/"; then
   as_basename=basename
 else
   as_basename=false
@@ -3055,7 +3055,7 @@
 $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
 	 X"$0" : 'X\(//\)$' \| \
 	 X"$0" : 'X\(/\)$' \| \
-	 .     : '\(.\)' 2>/dev/null ||
+	 .     : '\(.\)' 2>/System/Devices/null ||
 echo X/"$0" |
     sed '/^.*\/\([^/][^/]*\)\/*$/{ s//\1/; q; }
   	  /^X\/\(\/\/\)$/{ s//\1/; q; }
@@ -3073,10 +3073,10 @@
 
 # The user is always right.
 if test "${PATH_SEPARATOR+set}" != set; then
-  echo "#! /bin/sh" >conf$$.sh
+  echo "#! /System/Tools/sh" >conf$$.sh
   echo  "exit 0"   >>conf$$.sh
   chmod +x conf$$.sh
-  if (PATH="/nonexistent;."; conf$$.sh) >/dev/null 2>&1; then
+  if (PATH="/nonexistent;."; conf$$.sh) >/System/Devices/null 2>&1; then
     PATH_SEPARATOR=';'
   else
     PATH_SEPARATOR=:
@@ -3087,7 +3087,7 @@
 
   as_lineno_1=$LINENO
   as_lineno_2=$LINENO
-  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/System/Devices/null`
   test "x$as_lineno_1" != "x$as_lineno_2" &&
   test "x$as_lineno_3"  = "x$as_lineno_2"  || {
   # Find who we are.  Look in the path if we contain no path at all
@@ -3117,7 +3117,7 @@
   case $CONFIG_SHELL in
   '')
     as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
-for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
+for as_dir in /System/Tools$PATH_SEPARATOR/System/Tools$PATH_SEPARATOR$PATH
 do
   IFS=$as_save_IFS
   test -z "$as_dir" && as_dir=.
@@ -3127,9 +3127,9 @@
 	   if ("$as_dir/$as_base" -c '
   as_lineno_1=$LINENO
   as_lineno_2=$LINENO
-  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/dev/null`
+  as_lineno_3=`(expr $as_lineno_1 + 1) 2>/System/Devices/null`
   test "x$as_lineno_1" != "x$as_lineno_2" &&
-  test "x$as_lineno_3"  = "x$as_lineno_2" ') 2>/dev/null; then
+  test "x$as_lineno_3"  = "x$as_lineno_2" ') 2>/System/Devices/null; then
 	     $as_unset BASH_ENV || test "${BASH_ENV+set}" != set || { BASH_ENV=; export BASH_ENV; }
 	     $as_unset ENV || test "${ENV+set}" != set || { ENV=; export ENV; }
 	     CONFIG_SHELL=$as_dir/$as_base
@@ -3181,7 +3181,7 @@
   *)       ECHO_N= ECHO_C='\c' ECHO_T= ;;
 esac
 
-if expr a : '\(a\)' >/dev/null 2>&1; then
+if expr a : '\(a\)' >/System/Devices/null 2>&1; then
   as_expr=expr
 else
   as_expr=false
@@ -3189,7 +3189,7 @@
 
 rm -f conf$$ conf$$.exe conf$$.file
 echo >conf$$.file
-if ln -s conf$$.file conf$$ 2>/dev/null; then
+if ln -s conf$$.file conf$$ 2>/System/Devices/null; then
   # We could just check for DJGPP; but this test a) works b) is more generic
   # and c) will remain valid once DJGPP supports symlinks (DJGPP 2.04).
   if test -f conf$$.exe; then
@@ -3198,14 +3198,14 @@
   else
     as_ln_s='ln -s'
   fi
-elif ln conf$$.file conf$$ 2>/dev/null; then
+elif ln conf$$.file conf$$ 2>/System/Devices/null; then
   as_ln_s=ln
 else
   as_ln_s='cp -p'
 fi
 rm -f conf$$ conf$$.exe conf$$.file
 
-if mkdir -p . 2>/dev/null; then
+if mkdir -p . 2>/System/Devices/null; then
   as_mkdir_p=:
 else
   test -d ./-p && rmdir ./-p
@@ -3254,7 +3254,7 @@
   $ $0 $@
 
 _CSEOF
-echo "on `(hostname || uname -n) 2>/dev/null | sed 1q`" >&5
+echo "on `(hostname || uname -n) 2>/System/Devices/null | sed 1q`" >&5
 echo >&5
 _ACEOF
 
@@ -3383,7 +3383,7 @@
 ac_configure_extra_args=
 
 if $ac_cs_silent; then
-  exec 6>/dev/null
+  exec 6>/System/Devices/null
   ac_configure_extra_args="$ac_configure_extra_args --silent"
 fi
 
@@ -3431,7 +3431,7 @@
 
 # Have a temporary directory for convenience.  Make it in the build tree
 # simply because there is no reason to put it here, and in addition,
-# creating and moving files from /tmp can sometimes cause problems.
+# creating and moving files from /System/TemporaryFiles can sometimes cause problems.
 # Create a temporary directory, and hook for its removal unless debugging.
 $debug ||
 {
@@ -3442,7 +3442,7 @@
 # Create a (secure) tmp directory for tmp files.
 
 {
-  tmp=`(umask 077 && mktemp -d -q "./confstatXXXXXX") 2>/dev/null` &&
+  tmp=`(umask 077 && mktemp -d -q "./confstatXXXXXX") 2>/System/Devices/null` &&
   test -n "$tmp" && test -d "$tmp"
 }  ||
 {
@@ -3603,12 +3603,12 @@
   esac
 
   # Compute @srcdir@, @top_srcdir@, and @INSTALL@ for subdirectories.
-  ac_dir=`(dirname "$ac_file") 2>/dev/null ||
+  ac_dir=`(dirname "$ac_file") 2>/System/Devices/null ||
 $as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$ac_file" : 'X\(//\)[^/]' \| \
 	 X"$ac_file" : 'X\(//\)$' \| \
 	 X"$ac_file" : 'X\(/\)' \| \
-	 .     : '\(.\)' 2>/dev/null ||
+	 .     : '\(.\)' 2>/System/Devices/null ||
 echo X"$ac_file" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
   	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
@@ -3622,12 +3622,12 @@
     as_dirs=
     while test ! -d "$as_dir"; do
       as_dirs="$as_dir $as_dirs"
-      as_dir=`(dirname "$as_dir") 2>/dev/null ||
+      as_dir=`(dirname "$as_dir") 2>/System/Devices/null ||
 $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$as_dir" : 'X\(//\)[^/]' \| \
 	 X"$as_dir" : 'X\(//\)$' \| \
 	 X"$as_dir" : 'X\(/\)' \| \
-	 .     : '\(.\)' 2>/dev/null ||
+	 .     : '\(.\)' 2>/System/Devices/null ||
 echo X"$as_dir" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
   	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
@@ -3742,7 +3742,7 @@
 	   # Source tree
 	   echo "$srcdir/$f"
 	 else
-	   # /dev/null tree
+	   # /System/Devices/null tree
 	   { { echo "$as_me:$LINENO: error: cannot find input file: $f" >&5
 echo "$as_me: error: cannot find input file: $f" >&2;}
    { (exit 1); exit 1; }; }
@@ -3792,12 +3792,12 @@
 for ac_file in : $CONFIG_COMMANDS; do test "x$ac_file" = x: && continue
   ac_dest=`echo "$ac_file" | sed 's,:.*,,'`
   ac_source=`echo "$ac_file" | sed 's,[^:]*:,,'`
-  ac_dir=`(dirname "$ac_dest") 2>/dev/null ||
+  ac_dir=`(dirname "$ac_dest") 2>/System/Devices/null ||
 $as_expr X"$ac_dest" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$ac_dest" : 'X\(//\)[^/]' \| \
 	 X"$ac_dest" : 'X\(//\)$' \| \
 	 X"$ac_dest" : 'X\(/\)' \| \
-	 .     : '\(.\)' 2>/dev/null ||
+	 .     : '\(.\)' 2>/System/Devices/null ||
 echo X"$ac_dest" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
   	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
@@ -3811,12 +3811,12 @@
     as_dirs=
     while test ! -d "$as_dir"; do
       as_dirs="$as_dir $as_dirs"
-      as_dir=`(dirname "$as_dir") 2>/dev/null ||
+      as_dir=`(dirname "$as_dir") 2>/System/Devices/null ||
 $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$as_dir" : 'X\(//\)[^/]' \| \
 	 X"$as_dir" : 'X\(//\)$' \| \
 	 X"$as_dir" : 'X\(/\)' \| \
-	 .     : '\(.\)' 2>/dev/null ||
+	 .     : '\(.\)' 2>/System/Devices/null ||
 echo X"$as_dir" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
   	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
@@ -3907,13 +3907,13 @@
   # Grep'ing the first line is not enough: some people post-process
   # each Makefile.in and add a new line on top of each file to say so.
   # So let's grep whole file.
-  if grep '^#.*generated by automake' $mf > /dev/null 2>&1; then
-    dirpart=`(dirname "$mf") 2>/dev/null ||
+  if grep '^#.*generated by automake' $mf > /System/Devices/null 2>&1; then
+    dirpart=`(dirname "$mf") 2>/System/Devices/null ||
 $as_expr X"$mf" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$mf" : 'X\(//\)[^/]' \| \
 	 X"$mf" : 'X\(//\)$' \| \
 	 X"$mf" : 'X\(/\)' \| \
-	 .     : '\(.\)' 2>/dev/null ||
+	 .     : '\(.\)' 2>/System/Devices/null ||
 echo X"$mf" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
   	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
@@ -3923,7 +3923,7 @@
   else
     continue
   fi
-  grep '^DEP_FILES *= *[^ #]' < "$mf" > /dev/null || continue
+  grep '^DEP_FILES *= *[^ #]' < "$mf" > /System/Devices/null || continue
   # Extract the definition of DEP_FILES from the Makefile without
   # running `make'.
   DEPDIR=`sed -n -e '/^DEPDIR = / s///p' < "$mf"`
@@ -3947,12 +3947,12 @@
        sed -e 's/\$(DEPDIR)/'"$DEPDIR"'/g' -e 's/\$U/'"$U"'/g'`; do
     # Make sure the directory exists.
     test -f "$dirpart/$file" && continue
-    fdir=`(dirname "$file") 2>/dev/null ||
+    fdir=`(dirname "$file") 2>/System/Devices/null ||
 $as_expr X"$file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$file" : 'X\(//\)[^/]' \| \
 	 X"$file" : 'X\(//\)$' \| \
 	 X"$file" : 'X\(/\)' \| \
-	 .     : '\(.\)' 2>/dev/null ||
+	 .     : '\(.\)' 2>/System/Devices/null ||
 echo X"$file" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
   	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
@@ -3966,12 +3966,12 @@
     as_dirs=
     while test ! -d "$as_dir"; do
       as_dirs="$as_dir $as_dirs"
-      as_dir=`(dirname "$as_dir") 2>/dev/null ||
+      as_dir=`(dirname "$as_dir") 2>/System/Devices/null ||
 $as_expr X"$as_dir" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
 	 X"$as_dir" : 'X\(//\)[^/]' \| \
 	 X"$as_dir" : 'X\(//\)$' \| \
 	 X"$as_dir" : 'X\(/\)' \| \
-	 .     : '\(.\)' 2>/dev/null ||
+	 .     : '\(.\)' 2>/System/Devices/null ||
 echo X"$as_dir" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{ s//\1/; q; }
   	  /^X\(\/\/\)[^/].*/{ s//\1/; q; }
@@ -4005,7 +4005,7 @@
 # config.status does its own redirection, appending to config.log.
 # Unfortunately, on DOS this fails, as config.log is still kept open
 # by configure, so config.status won't be able to write to it; its
-# output is simply discarded.  So we exec the FD to /dev/null,
+# output is simply discarded.  So we exec the FD to /System/Devices/null,
 # effectively closing config.log, so it can be properly (re)opened and
 # appended to by config.status.  When coming back to configure, we
 # need to make the FD available again.
@@ -4014,7 +4014,7 @@
   ac_config_status_args=
   test "$silent" = yes &&
     ac_config_status_args="$ac_config_status_args --quiet"
-  exec 5>/dev/null
+  exec 5>/System/Devices/null
   $SHELL $CONFIG_STATUS $ac_config_status_args || ac_cs_success=false
   exec 5>>config.log
   # Use ||, not &&, to avoid exiting from the if with $? = 1, which
diff -urN module-init-tools-3.2/configure.in module-init-tools-3.2-STEP/configure.in
--- module-init-tools-3.2/configure.in	2005-11-19 15:15:36.000000000 +1300
+++ module-init-tools-3.2-STEP/configure.in	2006-04-27 00:45:04.453884032 +1200
@@ -5,7 +5,7 @@
 AM_INIT_AUTOMAKE(module-init-tools, "3.2")
 
 # If zlib is required, libz must be linked static, modprobe is in
-# /sbin, libz is in /usr/lib and may not be available when it is run.
+# /System/AdminTools, libz is in /usr/lib and may not be available when it is run.
 AC_ARG_ENABLE(zlib,
 [  --enable-zlib               Handle gzipped modules],
 [if test "$enableval" = "yes"; then
diff -urN module-init-tools-3.2/depcomp module-init-tools-3.2-STEP/depcomp
--- module-init-tools-3.2/depcomp	2003-04-01 11:21:57.000000000 +1200
+++ module-init-tools-3.2-STEP/depcomp	2006-04-27 00:45:04.457883424 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 # depcomp - compile a program generating dependencies as side-effects
 # Copyright 1999, 2000 Free Software Foundation, Inc.
@@ -265,7 +265,7 @@
     shift
   fi
 
-  # Remove `-o $object'.  We will use -o /dev/null later,
+  # Remove `-o $object'.  We will use -o /System/Devices/null later,
   # however we can't do the remplacement now because
   # `-o $object' might simply not be used
   IFS=" "
@@ -287,7 +287,7 @@
   done
 
   test -z "$dashmflag" && dashmflag=-M
-  "$@" -o /dev/null $dashmflag | sed 's:^[^:]*\:[ 	]*:'"$object"'\: :' > "$tmpdepfile"
+  "$@" -o /System/Devices/null $dashmflag | sed 's:^[^:]*\:[ 	]*:'"$object"'\: :' > "$tmpdepfile"
   rm -f "$depfile"
   cat < "$tmpdepfile" > "$depfile"
   tr ' ' '
diff -urN module-init-tools-3.2/depmod.8 module-init-tools-3.2-STEP/depmod.8
--- module-init-tools-3.2/depmod.8	2003-08-16 01:44:32.000000000 +1200
+++ module-init-tools-3.2-STEP/depmod.8	2006-04-27 00:45:16.638031760 +1200
@@ -72,7 +72,7 @@
 .PP 
 \fBdepmod\fP creates a list of module dependencies, 
 by reading each module under 
-\fB/lib/modules/\fP\fIversion\fP  
+\fB/System/Drivers/\fP\fIversion\fP  
 and determining what symbols it exports, and what symbols it 
 needs.  By default this list is written to 
 \fBmodules.dep\fP in the same directory.  If 
@@ -93,7 +93,7 @@
 .IP "\fB-b \fIbasedir\fP\fP \fB--basedir \fIbasedir\fP\fP 	  " 10 
 If your modules are not currently in the (normal) 
 directory 
-\fB/lib/modules/\fP\fIversion\fP, 
+\fB/System/Drivers/\fP\fIversion\fP, 
 but in a staging area, you can specify a 
 \fIbasedir\fP which is prepended to 
 the directory name.  This 
diff -urN module-init-tools-3.2/depmod.c module-init-tools-3.2-STEP/depmod.c
--- module-init-tools-3.2/depmod.c	2005-10-11 09:10:09.000000000 +1300
+++ module-init-tools-3.2-STEP/depmod.c	2006-04-27 00:45:10.590951056 +1200
@@ -26,7 +26,7 @@
 #include "testing.h"
 
 #ifndef MODULE_DIR
-#define MODULE_DIR "/lib/modules/"
+#define MODULE_DIR "/System/Drivers/"
 #endif
 
 static int verbose;
diff -urN module-init-tools-3.2/doc/depmod.sgml module-init-tools-3.2-STEP/doc/depmod.sgml
--- module-init-tools-3.2/doc/depmod.sgml	2003-08-16 01:31:38.000000000 +1200
+++ module-init-tools-3.2-STEP/doc/depmod.sgml	2006-04-27 00:45:22.351163232 +1200
@@ -60,7 +60,7 @@
     <para>
       <command>depmod</command> creates a list of module dependencies,
       by reading each module under
-      <filename>/lib/modules/</filename><replaceable>version</replaceable> 
+      <filename>/System/Drivers/</filename><replaceable>version</replaceable> 
       and determining what symbols it exports, and what symbols it
       needs.  By default this list is written to
       <filename>modules.dep</filename> in the same directory.  If
@@ -88,7 +88,7 @@
 	    <para>
 	      If your modules are not currently in the (normal)
 	      directory
-	      <filename>/lib/modules/</filename><replaceable>version</replaceable>,
+	      <filename>/System/Drivers/</filename><replaceable>version</replaceable>,
 	      but in a staging area, you can specify a
 	      <replaceable>basedir</replaceable> which is prepended to
 	      the directory name.  This
@@ -97,7 +97,7 @@
 	      is ready to be moved into the normal location.
 	    </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-e</option> <option>--errsyms</option>
         </term>
@@ -111,7 +111,7 @@
 	      perfect world).
 	    </para>
 	  </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-F</option> <option>--filesyms <replaceable>System.map</replaceable></option>
         </term>
@@ -122,7 +122,7 @@
 	    <option>-e</option> option to report unresolved symbols.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-n</option> <option>--dry-run</option>
         </term>
@@ -133,7 +133,7 @@
 	    the module directory.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-A</option> <option>--quick</option>
         </term>
@@ -145,8 +145,8 @@
 	    the files.
 	  </para>
         </listitem>
-      </varlistentry>
-    </variablelist>
+      </System/ApplicationDatalistentry>
+    </System/ApplicationDataiablelist>
   </refsect1>
   <refsect1>
     <title>BACKWARDS COMPATIBILITY</title>
diff -urN module-init-tools-3.2/doc/lsmod.sgml module-init-tools-3.2-STEP/doc/lsmod.sgml
--- module-init-tools-3.2/doc/lsmod.sgml	2002-12-28 22:01:09.000000000 +1300
+++ module-init-tools-3.2-STEP/doc/lsmod.sgml	2006-04-27 00:45:22.353162928 +1200
@@ -36,7 +36,7 @@
     <title>DESCRIPTION</title>
 
     <para><command>lsmod</command> is a trivial program which nicely
-      formats the contents of the <filename>/proc/modules</filename>,
+      formats the contents of the <filename>/System/Processes/modules</filename>,
       showing what kernel modules are currently loaded.
     </para>
 
diff -urN module-init-tools-3.2/doc/modinfo.sgml module-init-tools-3.2-STEP/doc/modinfo.sgml
--- module-init-tools-3.2/doc/modinfo.sgml	2004-08-26 21:11:07.000000000 +1200
+++ module-init-tools-3.2-STEP/doc/modinfo.sgml	2006-04-27 00:45:28.312257008 +1200
@@ -47,7 +47,7 @@
     <para><command>modinfo</command> extracts information from the Linux
       Kernel modules given on the command line.  If the module name is
       not a filename, then the
-      <filename>/lib/modules/</filename><replaceable>version</replaceable>
+      <filename>/System/Drivers/</filename><replaceable>version</replaceable>
       directory is searched, as done by
       <citerefentry><refentrytitle>modprobe</refentrytitle><manvolnum>8</manvolnum></citerefentry>.
     </para>
@@ -75,7 +75,7 @@
 	    <command>modinfo.old</command>.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-F</option> <option>--field</option>
         </term>
@@ -93,7 +93,7 @@
 	    lists the filename of the module.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-0</option> <option>--null</option>
         </term>
@@ -104,7 +104,7 @@
 	    a new line can theoretically appear inside a field.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-a</option> <option>-d</option> <option>-l</option> <option>-p</option> <option>-n</option>
         </term>
@@ -118,8 +118,8 @@
 	    <command>modinfo</command>.
 	  </para>
         </listitem>
-      </varlistentry>
-    </variablelist>
+      </System/ApplicationDatalistentry>
+    </System/ApplicationDataiablelist>
   </refsect1>
   <refsect1>
     <title>BACKWARDS COMPATIBILITY</title>
diff -urN module-init-tools-3.2/doc/modprobe.conf.sgml module-init-tools-3.2-STEP/doc/modprobe.conf.sgml
--- module-init-tools-3.2/doc/modprobe.conf.sgml	2005-08-09 16:23:34.000000000 +1200
+++ module-init-tools-3.2-STEP/doc/modprobe.conf.sgml	2006-04-27 00:45:22.346163992 +1200
@@ -85,7 +85,7 @@
 	    command in the configuration).
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term>options <replaceable>modulename</replaceable> <replaceable>option...</replaceable>
         </term>
@@ -104,7 +104,7 @@
 	    alias, and on the command line.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term>install <replaceable>modulename</replaceable> <replaceable>command...</replaceable>
         </term>
@@ -119,8 +119,8 @@
 	    module "fred" worked better with the module "barney"
 	    already installed (but it didn't depend on it, so
 	    <command>modprobe</command> won't automatically load it),
-	    you could say "install fred /sbin/modprobe barney;
-	    /sbin/modprobe --ignore-install fred", which would do what
+	    you could say "install fred /System/AdminTools/modprobe barney;
+	    /System/AdminTools/modprobe --ignore-install fred", which would do what
 	    you wanted.  Note the <option>--ignore-install</option>,
 	    which stops the second <command>modprobe</command> from
 	    re-running the same <command>install</command> command.
@@ -129,8 +129,8 @@
 	  <para>
 	    You can also use <command>install</command> to make up
 	    modules which don't otherwise exist.  For example:
-	    "install probe-ethernet /sbin/modprobe e100 ||
-	    /sbin/modprobe eepro100", which will try first the e100
+	    "install probe-ethernet /System/AdminTools/modprobe e100 ||
+	    /System/AdminTools/modprobe eepro100", which will try first the e100
 	    driver, then the eepro100 driver, when you do "modprobe
 	    probe-ethernet".
 	  </para>
@@ -141,11 +141,11 @@
 	    "modprobe fred opt=1" to pass the "opt=1" arg to the
 	    module, even if there's an install command in the
 	    configuration file.  So our above example becomes "install
-	    fred /sbin/modprobe barney; /sbin/modprobe
+	    fred /System/AdminTools/modprobe barney; /System/AdminTools/modprobe
 	    --ignore-install fred $CMDLINE_OPTS"
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term>remove <replaceable>modulename</replaceable> <replaceable>command...</replaceable>
         </term>
@@ -154,12 +154,12 @@
 	    This is similar to the <command>install</command> command
 	    above, except it is invoked when "modprobe -r" is run.
 	    The removal counterparts to the two examples above would
-	    be: "remove fred /sbin/modprobe -r --ignore-remove fred &&
-	    /sbin/modprobe -r barney", and "remove probe-ethernet
-	    /sbin/modprobe -r eepro100 || /sbin/modprobe -r e100".
+	    be: "remove fred /System/AdminTools/modprobe -r --ignore-remove fred &&
+	    /System/AdminTools/modprobe -r barney", and "remove probe-ethernet
+	    /System/AdminTools/modprobe -r eepro100 || /System/AdminTools/modprobe -r e100".
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term>include <replaceable>filename</replaceable>
         </term>
@@ -171,7 +171,7 @@
 	    declared in the current file.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term>blacklist <replaceable>modulename</replaceable>
         </term>
@@ -187,8 +187,8 @@
 	    a particular module's internal aliases are to be ignored.
 	  </para>
         </listitem>
-      </varlistentry>
-    </variablelist>
+      </System/ApplicationDatalistentry>
+    </System/ApplicationDataiablelist>
   </refsect1>
   <refsect1>
     <title>Backwards Compatibility</title>
diff -urN module-init-tools-3.2/doc/modprobe.sgml module-init-tools-3.2-STEP/doc/modprobe.sgml
--- module-init-tools-3.2/doc/modprobe.sgml	2005-10-11 09:06:56.000000000 +1300
+++ module-init-tools-3.2-STEP/doc/modprobe.sgml	2006-04-27 00:45:28.309257464 +1200
@@ -67,7 +67,7 @@
       module from the Linux kernel: note that for convenience, there
       is no difference between _ and - in module names.
       <command>modprobe</command> looks in the module directory
-      <filename>/lib/modules/`uname -r`</filename> for all
+      <filename>/System/Drivers/`uname -r`</filename> for all
       the modules and other files, except for the optional
       <filename>/etc/modprobe.conf</filename> configuration file and
       <filename>/etc/modprobe.d</filename> directory
@@ -122,7 +122,7 @@
 	    MODPROBE_OPTIONS environment variable.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-C</option> <option>--config</option>
         </term>
@@ -138,7 +138,7 @@
 	    MODPROBE_OPTIONS environment variable.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-c</option> <option>--showconfig</option>
         </term>
@@ -146,7 +146,7 @@
           <para>Dump out the configuration file and exit.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-n</option> <option>--dry-run</option>
         </term>
@@ -157,7 +157,7 @@
 		useful for debugging problems.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-i</option> <option>--ignore-install</option> <option>--ignore-remove</option>
         </term>
@@ -173,7 +173,7 @@
 </citerefentry>.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-q</option> <option>--quiet</option>
         </term>
@@ -188,7 +188,7 @@
 	    to opportunistically probe for modules which might exist).
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-r</option> <option>--remove</option>
         </term>
@@ -207,14 +207,14 @@
 	    removal of modules.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-V</option> <option>--version</option>
         </term>
         <listitem>
           <para>Show version of program, and exit.  See below for caveats when run on older kernels.</para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-f</option> <option>--force</option>
         </term>
@@ -232,7 +232,7 @@
 	    alias) on the command line, and any modules it depends on.
 	 </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>--force-vermagic</option>
         </term>
@@ -250,7 +250,7 @@
 	    alias) on the command line, and any modules it depends on.
 	 </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>--force-modversion</option>
         </term>
@@ -270,7 +270,7 @@
 	    alias) on the command line, and any modules it depends on.
 	 </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-l</option> <option>--list</option>
         </term>
@@ -286,7 +286,7 @@
 	    </citerefentry> for a more flexible alternative.
 	 </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-a</option> <option>--all</option>
         </term>
@@ -294,7 +294,7 @@
           <para>Insert all module names on the command line.
 	 </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-t</option> <option>--type</option>
         </term>
@@ -312,7 +312,7 @@
 	    </citerefentry> or a more flexible alternative.
 	 </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-s</option> <option>--syslog</option>
         </term>
@@ -330,7 +330,7 @@
 	    MODPROBE_OPTIONS environment variable.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>--set-version</option>
         </term>
@@ -344,7 +344,7 @@
 	      <refentrytitle>modprobe.old</refentrytitle><manvolnum>8</manvolnum></citerefentry> will never be run).
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>--show-depends</option>
         </term>
@@ -360,7 +360,7 @@
 	    module itself, but knows nothing of aliases or install commands.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-o</option> <option>--name</option>
         </term>
@@ -374,7 +374,7 @@
 	    would make them useless if there were no module support.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>--first-time</option>
         </term>
@@ -390,8 +390,8 @@
 	    case.
 	  </para>
         </listitem>
-      </varlistentry>
-    </variablelist>
+      </System/ApplicationDatalistentry>
+    </System/ApplicationDataiablelist>
   </refsect1>
   <refsect1>
     <title>BACKWARDS COMPATIBILITY</title>
diff -urN module-init-tools-3.2/doc/modules.dep.sgml module-init-tools-3.2-STEP/doc/modules.dep.sgml
--- module-init-tools-3.2/doc/modules.dep.sgml	2002-12-28 22:02:47.000000000 +1300
+++ module-init-tools-3.2-STEP/doc/modules.dep.sgml	2006-04-27 00:45:22.348163688 +1200
@@ -34,7 +34,7 @@
       The <filename>modules.dep</filename> as generated by
       module-init-tools <command>depmod</command>, lists the
       dependencies for every module in the directories under
-      <filename>/lib/modules/</filename><replaceable>version</replaceable>,
+      <filename>/System/Drivers/</filename><replaceable>version</replaceable>,
       where <filename>modules.dep</filename> is.
     </para>
     <para>
@@ -45,16 +45,16 @@
     </para>
     <para>
       For example, if
-      <filename>/lib/modules/2.5.53/kernel/a.ko</filename> depended on
+      <filename>/System/Drivers/2.5.53/kernel/a.ko</filename> depended on
       <filename>b.ko</filename> and <filename>c.ko</filename> in the
       same directory, and <filename>c.ko</filename> depended on
       <filename>b.ko</filename> as well, the file might look like:
     </para>
     <screen>
 # This is a comment.
-/lib/modules/2.5.53/kernel/a.ko: /lib/modules/2.5.53/kernel/c.ko /lib/modules/2.5.53/kernel/b.ko
-/lib/modules/2.5.53/kernel/b.ko:
-/lib/modules/2.5.53/kernel/c.ko: /lib/modules/2.5.53/kernel/b.ko
+/System/Drivers/2.5.53/kernel/a.ko: /System/Drivers/2.5.53/kernel/c.ko /System/Drivers/2.5.53/kernel/b.ko
+/System/Drivers/2.5.53/kernel/b.ko:
+/System/Drivers/2.5.53/kernel/c.ko: /System/Drivers/2.5.53/kernel/b.ko
     </screen>
     <para>
       This file is used by <command>modprobe</command> to know the
diff -urN module-init-tools-3.2/doc/rmmod.sgml module-init-tools-3.2-STEP/doc/rmmod.sgml
--- module-init-tools-3.2/doc/rmmod.sgml	2003-10-26 16:51:38.000000000 +1300
+++ module-init-tools-3.2-STEP/doc/rmmod.sgml	2006-04-27 00:45:22.355162624 +1200
@@ -60,7 +60,7 @@
 	    if something goes wrong.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-f</option> <option>--force</option>
         </term>
@@ -75,7 +75,7 @@
       </citerefentry>).
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-w</option> <option>--wait</option>
         </term>
@@ -92,7 +92,7 @@
       </citerefentry>) for information on usage counts.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-s</option> <option>--syslog</option>
         </term>
@@ -101,7 +101,7 @@
 	    Send errors to the syslog, instead of standard error.
 	  </para>
         </listitem>
-      </varlistentry>
+      </System/ApplicationDatalistentry>
       <varlistentry>
         <term><option>-V</option> <option>--version</option>
         </term>
@@ -111,8 +111,8 @@
 	    when run on older kernels.
 	  </para>
         </listitem>
-      </varlistentry>
-    </variablelist>
+      </System/ApplicationDatalistentry>
+    </System/ApplicationDataiablelist>
   </refsect1>
   <refsect1>
     <title>BACKWARDS COMPATIBILITY</title>
diff -urN module-init-tools-3.2/generate-modprobe.conf module-init-tools-3.2-STEP/generate-modprobe.conf
--- module-init-tools-3.2/generate-modprobe.conf	2004-07-12 18:11:46.000000000 +1200
+++ module-init-tools-3.2-STEP/generate-modprobe.conf	2006-04-27 00:45:16.019125848 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh -e
+#! /System/Tools/sh -e
 
 # Naive shell script to translate modules.conf + defaults to modprobe.conf
 # Normal caveats apply, as with any machine translation.
@@ -19,23 +19,23 @@
 # Set up output if specified.
 if [ $# -eq 1 ]; then exec > $1; fi
 
-MODPROBECONF=`mktemp /tmp/modprobe.XXXXXX || tempfile || echo /tmp/modprobe.$$`
+MODPROBECONF=`mktemp /System/TemporaryFiles/modprobe.XXXXXX || tempfile || echo /System/TemporaryFiles/modprobe.$$`
 trap "rm -f $MODPROBECONF" 0
 
 if [ x"$TESTING_MODPROBE_CONF" != x ]; then
     cp $TESTING_MODPROBE_CONF $MODPROBECONF
 elif [ "$STDIN" = "1" ]; then
     cat > $MODPROBECONF
-elif [ -x /sbin/modprobe.old ]; then
+elif [ -x /System/AdminTools/modprobe.old ]; then
     # In sbin.
-    /sbin/modprobe.old -c > $MODPROBECONF
-elif modprobe.old -c >/dev/null 2>&1; then
+    /System/AdminTools/modprobe.old -c > $MODPROBECONF
+elif modprobe.old -c >/System/Devices/null 2>&1; then
     # Somewhere in path.
     modprobe.old -c > $MODPROBECONF
-elif /sbin/modprobe -V 2>/dev/null | grep -q 'modprobe version'; then
-    # Running /sbin/modprobe gives old version.
-    /sbin/modprobe -c > $MODPROBECONF
-elif modprobe -V 2>/dev/null | grep -q 'modprobe version'; then
+elif /System/AdminTools/modprobe -V 2>/System/Devices/null | grep -q 'modprobe version'; then
+    # Running /System/AdminTools/modprobe gives old version.
+    /System/AdminTools/modprobe -c > $MODPROBECONF
+elif modprobe -V 2>/System/Devices/null | grep -q 'modprobe version'; then
     # Running modprobe gives old version.
     modprobe -c > $MODPROBECONF
 else
@@ -111,8 +111,8 @@
 {
     mp_res=""
     for mp_arg in $1; do
-	if [ x"$mp_res" = x ]; then mp_res="/sbin/$2 $mp_arg";
-	else mp_res="$mp_res${3}/sbin/$2 $mp_arg";
+	if [ x"$mp_res" = x ]; then mp_res="/System/AdminTools/$2 $mp_arg";
+	else mp_res="$mp_res${3}/System/AdminTools/$2 $mp_arg";
 	fi
     done
     echo "$mp_res"
@@ -123,7 +123,7 @@
 # our versions of rmmod and insmod are deliberately stupid.
 convert_command()
 {
-    echo "$@" | sed -e 's,insmod,/sbin/modprobe --ignore-install,' -e 's,rmmod,/sbin/modprobe -r --ignore-remove,'
+    echo "$@" | sed -e 's,insmod,/System/AdminTools/modprobe --ignore-install,' -e 's,rmmod,/System/AdminTools/modprobe -r --ignore-remove,'
 }
 
 while read ADD NAME MODULE REST; do
@@ -147,7 +147,7 @@
     alias)
 	if [ x"$REST" = xoff ] || [ x"$REST" = xnull ]; then
 	    INSTALL_COMMANDS="$INSTALL_COMMANDS $MODULE"
-	    eval install_$MODNAME=\"/bin/true\"
+	    eval install_$MODNAME=\"/System/Tools/true\"
 	else
 	    parse_alias $MODPROBECONF "$MODULE" $REST
 	fi
@@ -161,7 +161,7 @@
 	    parse_options $MODULE `grab_noninstall_options $REST`
 	    INSTALL_OPTIONS=`grab_install_options $REST`
 	    INSTALL_COMMANDS="$INSTALL_COMMANDS $MODULE"
-	    eval install_$MODNAME=\"/sbin/modprobe $INSTALL_OPTIONS --ignore-install `resolve_alias $MODPROBECONF $MODULE`\"
+	    eval install_$MODNAME=\"/System/AdminTools/modprobe $INSTALL_OPTIONS --ignore-install `resolve_alias $MODPROBECONF $MODULE`\"
 	    ;;
 	*)
 	    parse_options $MODULE "$REST"
@@ -172,7 +172,7 @@
     above)
 	# Pull in these modules after me.
 	INSTALL_COMMANDS="$INSTALL_COMMANDS $MODULE"
-	eval post_install_$MODNAME=\"`multi "$REST" 'modprobe' '; '`\; /bin/true\"
+	eval post_install_$MODNAME=\"`multi "$REST" 'modprobe' '; '`\; /System/Tools/true\"
 	REMOVE_COMMANDS="$REMOVE_COMMANDS $MODULE"
 	eval pre_remove_$MODNAME=\"`multi "$REST" 'modprobe -r' '; '`\"
 	;;
@@ -181,7 +181,7 @@
 	INSTALL_COMMANDS="$INSTALL_COMMANDS $MODULE"
 	eval pre_install_$MODNAME=\"`multi "$REST" 'modprobe' '; '`\"
 	REMOVE_COMMANDS="$REMOVE_COMMANDS $MODULE"
-	eval post_remove_$MODNAME=\"`multi "$REST" 'modprobe -r' '; '`\; /bin/true\"
+	eval post_remove_$MODNAME=\"`multi "$REST" 'modprobe -r' '; '`\; /System/Tools/true\"
 	;;
     probe) 
 	INSTALL_COMMANDS="$INSTALL_COMMANDS $MODULE"
@@ -190,7 +190,7 @@
     probeall)
 	# Not quite correct.  If they all fail, we should fail.
 	INSTALL_COMMANDS="$INSTALL_COMMANDS $MODULE"
-	eval install_$MODNAME=\"`multi "$REST" 'modprobe' '; '`\; /bin/true\"
+	eval install_$MODNAME=\"`multi "$REST" 'modprobe' '; '`\; /System/Tools/true\"
 	;;
     post-install)
 	INSTALL_COMMANDS="$INSTALL_COMMANDS $MODULE"
@@ -221,7 +221,7 @@
 	($0 $MODULE)
 	;;
     # Ignore default lines which are not required any more.
-    "path[boot]=/lib/modules/boot"|"path[toplevel]=/lib/modules/`uname -r`"|"path[toplevel]=/lib/modules/2.4"|"path[kernel]=/lib/modules/kernel"|"path[fs]=/lib/modules/fs"|"path[net]=/lib/modules/net"|"path[scsi]=/lib/modules/scsi"|"path[block]=/lib/modules/block"|"path[cdrom]=/lib/modules/cdrom"|"path[ipv4]=/lib/modules/ipv4"|"path[ipv6]=/lib/modules/ipv6"|"path[sound]=/lib/modules/sound"|"path[fc4]=/lib/modules/fc4"|"path[video]=/lib/modules/video"|"path[misc]=/lib/modules/misc"|"path[pcmcia]=/lib/modules/pcmcia"|"path[atm]=/lib/modules/atm"|"path[usb]=/lib/modules/usb"|"path[ide]=/lib/modules/ide"|"path[ieee1394]=/lib/modules/ieee1394"|"path[mtd]=/lib/modules/mtd"|"generic_stringfile=/lib/modules/`uname -r`/modules.generic_string"|"pcimapfile=/lib/modules/`uname -r`/modules.pcimap"|"isapnpmapfile=/lib/modules/`uname -r`/modules.isapnpmap"|"usbmapfile=/lib/modules/`uname -r`/modules.usbmap"|"parportmapfile=/lib/modules/`uname -r`/modules.parportmap"|"ieee1394mapfile=/lib/modules/`uname -r`/modules.ieee1394map"|"pnpbiosmapfile=/lib/modules/`uname -r`/modules.pnpbiosmap"|"depfile=/lib/modules/`uname -r`/modules.dep"|"persistdir=/var/lib/modules/persist")
+    "path[boot]=/System/Drivers/System/Boot"|"path[toplevel]=/System/Drivers/`uname -r`"|"path[toplevel]=/System/Drivers/2.4"|"path[kernel]=/System/Drivers/kernel"|"path[fs]=/System/Drivers/fs"|"path[net]=/System/Drivers/net"|"path[scsi]=/System/Drivers/scsi"|"path[block]=/System/Drivers/block"|"path[cdrom]=/System/Drivers/cdrom"|"path[ipv4]=/System/Drivers/ipv4"|"path[ipv6]=/System/Drivers/ipv6"|"path[sound]=/System/Drivers/sound"|"path[fc4]=/System/Drivers/fc4"|"path[video]=/System/Drivers/video"|"path[misc]=/System/Drivers/misc"|"path[pcmcia]=/System/Drivers/pcmcia"|"path[atm]=/System/Drivers/atm"|"path[usb]=/System/Drivers/usb"|"path[ide]=/System/Drivers/ide"|"path[ieee1394]=/System/Drivers/ieee1394"|"path[mtd]=/System/Drivers/mtd"|"generic_stringfile=/System/Drivers/`uname -r`/modules.generic_string"|"pcimapfile=/System/Drivers/`uname -r`/modules.pcimap"|"isapnpmapfile=/System/Drivers/`uname -r`/modules.isapnpmap"|"usbmapfile=/System/Drivers/`uname -r`/modules.usbmap"|"parportmapfile=/System/Drivers/`uname -r`/modules.parportmap"|"ieee1394mapfile=/System/Drivers/`uname -r`/modules.ieee1394map"|"pnpbiosmapfile=/System/Drivers/`uname -r`/modules.pnpbiosmap"|"depfile=/System/Drivers/`uname -r`/modules.dep"|"persistdir=/System/ApplicationData/System/Drivers/persist")
 	;;
 
     # Ignore prune lines unless they end in .o or .ko, which would
@@ -244,7 +244,7 @@
     MODNAME=`echo $mod | tr -c A-Za-z_0-9 _`
     eval PREINSTALL=\"\$pre_install_$MODNAME\"
     eval POSTINSTALL=\"\$post_install_$MODNAME\"
-    eval INSTALL=\"\$\{install_$MODNAME:-/sbin/modprobe --first-time --ignore-install $mod}\"
+    eval INSTALL=\"\$\{install_$MODNAME:-/System/AdminTools/modprobe --first-time --ignore-install $mod}\"
     if [ -n "$PREINSTALL" ]; then PREINSTALL="{ $PREINSTALL; } ; "; fi
     if [ -n "$POSTINSTALL" ]; then POSTINSTALL="&& { $POSTINSTALL; }"; fi
     echo install $mod $PREINSTALL $INSTALL $POSTINSTALL
@@ -255,7 +255,7 @@
     MODNAME=`echo $mod | tr -c A-Za-z_0-9 _`
     eval PREREMOVE=\"\$pre_remove_$MODNAME\"
     eval POSTREMOVE=\"\$post_remove_$MODNAME\"
-    eval REMOVE=\"\$\{remove_$MODNAME:-/sbin/modprobe -r --first-time --ignore-remove $mod}\"
+    eval REMOVE=\"\$\{remove_$MODNAME:-/System/AdminTools/modprobe -r --first-time --ignore-remove $mod}\"
     if [ -n "$PREREMOVE" ]; then PREREMOVE="{ $PREREMOVE; } ; "; fi
     if [ -n "$POSTREMOVE" ]; then POSTREMOVE="&& { $POSTREMOVE; }"; fi
     echo remove $mod $PREREMOVE $REMOVE $POSTREMOVE
diff -urN module-init-tools-3.2/install-sh module-init-tools-3.2-STEP/install-sh
--- module-init-tools-3.2/install-sh	2002-11-26 14:38:55.000000000 +1300
+++ module-init-tools-3.2-STEP/install-sh	2006-04-27 00:45:04.460882968 +1200
@@ -1,4 +1,4 @@
-#!/bin/sh
+#!/System/Tools/sh
 #
 # install - install a program, script, or datafile
 # This comes from X11R5 (mit/util/scripts/install.sh).
@@ -95,7 +95,7 @@
 	    then
 		src=$1
 	    else
-		# this colon is to work around a 386BSD /bin/sh bug
+		# this colon is to work around a 386BSD /System/Tools/sh bug
 		:
 		dst=$1
 	    fi
diff -urN module-init-tools-3.2/install-with-care module-init-tools-3.2-STEP/install-with-care
--- module-init-tools-3.2/install-with-care	2004-07-12 18:11:46.000000000 +1200
+++ module-init-tools-3.2-STEP/install-with-care	2006-04-27 00:45:16.022125392 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 echo install-with-care "$@"
 
@@ -6,15 +6,15 @@
 eval DEST=\$$#
 
 case `echo $DEST | tr -s / /` in
-    /sbin/insmod.static) ;;# This didn't exist before, OK.
-    /sbin/insmod|/sbin/lsmod|/sbin/modprobe|/sbin/rmmod|/sbin/depmod)
+    /System/AdminTools/insmod.static) ;;# This didn't exist before, OK.
+    /System/AdminTools/insmod|/System/AdminTools/lsmod|/System/AdminTools/modprobe|/System/AdminTools/rmmod|/System/AdminTools/depmod)
 	if [ -f $DEST ] && [ ! -f $DEST.old ]; then
 	    echo Refusing to install $DEST, move old utils first. >&2
 	    exit 1
 	fi
 	;;
-    /bin/lsmod) # If we're installing into /bin, make /sbin/lsmod link.
-	ln -sf ../bin/lsmod /sbin/lsmod
+    /System/Tools/lsmod) # If we're installing into /System/Tools, make /System/AdminTools/lsmod link.
+	ln -sf ../System/Tools/lsmod /System/AdminTools/lsmod
 	;;
 esac
 
diff -urN module-init-tools-3.2/lsmod.8 module-init-tools-3.2-STEP/lsmod.8
--- module-init-tools-3.2/lsmod.8	2003-03-28 12:01:38.000000000 +1200
+++ module-init-tools-3.2-STEP/lsmod.8	2006-04-27 00:45:22.337165360 +1200
@@ -62,7 +62,7 @@
 .SH "DESCRIPTION" 
 .PP 
 \fBlsmod\fP is a trivial program which nicely 
-formats the contents of the \fB/proc/modules\fP, 
+formats the contents of the \fB/System/Processes/modules\fP, 
 showing what kernel modules are currently loaded. 
  
 .SH "BACKWARDS COMPATIBILITY" 
diff -urN module-init-tools-3.2/lsmod.c module-init-tools-3.2-STEP/lsmod.c
--- module-init-tools-3.2/lsmod.c	2003-01-30 14:23:29.000000000 +1300
+++ module-init-tools-3.2-STEP/lsmod.c	2006-04-27 00:45:10.612947712 +1200
@@ -45,9 +45,9 @@
 	if (argc != 1)
 		print_usage("lsmod");
 
-	file = fopen("/proc/modules", "r");
+	file = fopen("/System/Processes/modules", "r");
 	if (!file) {
-		perror("Opening /proc/modules");
+		perror("Opening /System/Processes/modules");
 		exit(1);
 	}
 
diff -urN module-init-tools-3.2/missing module-init-tools-3.2-STEP/missing
--- module-init-tools-3.2/missing	2003-09-15 13:18:16.000000000 +1200
+++ module-init-tools-3.2-STEP/missing	2006-04-27 00:45:04.463882512 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Common stub for a few missing GNU programs while installing.
 # Copyright (C) 1996, 1997, 1999, 2000, 2002 Free Software Foundation, Inc.
 # Originally by Fran,cois Pinard <pinard@iro.umontreal.ca>, 1996.
@@ -88,7 +88,7 @@
     ;;
 
   aclocal*)
-    if test -z "$run" && ($1 --version) > /dev/null 2>&1; then
+    if test -z "$run" && ($1 --version) > /System/Devices/null 2>&1; then
        # We have it, but it failed.
        exit 1
     fi
@@ -102,7 +102,7 @@
     ;;
 
   autoconf)
-    if test -z "$run" && ($1 --version) > /dev/null 2>&1; then
+    if test -z "$run" && ($1 --version) > /System/Devices/null 2>&1; then
        # We have it, but it failed.
        exit 1
     fi
@@ -116,7 +116,7 @@
     ;;
 
   autoheader)
-    if test -z "$run" && ($1 --version) > /dev/null 2>&1; then
+    if test -z "$run" && ($1 --version) > /System/Devices/null 2>&1; then
        # We have it, but it failed.
        exit 1
     fi
@@ -140,7 +140,7 @@
     ;;
 
   automake*)
-    if test -z "$run" && ($1 --version) > /dev/null 2>&1; then
+    if test -z "$run" && ($1 --version) > /System/Devices/null 2>&1; then
        # We have it, but it failed.
        exit 1
     fi
@@ -156,7 +156,7 @@
     ;;
 
   autom4te)
-    if test -z "$run" && ($1 --version) > /dev/null 2>&1; then
+    if test -z "$run" && ($1 --version) > /System/Devices/null 2>&1; then
        # We have it, but it failed.
        exit 1
     fi
@@ -174,7 +174,7 @@
 	touch $file
     else
 	test -z "$file" || exec >$file
-	echo "#! /bin/sh"
+	echo "#! /System/Tools/sh"
 	echo "# Created by GNU Automake missing as a replacement of"
 	echo "#  $ $@"
 	echo "exit 0"
@@ -237,7 +237,7 @@
     ;;
 
   help2man)
-    if test -z "$run" && ($1 --version) > /dev/null 2>&1; then
+    if test -z "$run" && ($1 --version) > /System/Devices/null 2>&1; then
        # We have it, but it failed.
        exit 1
     fi
@@ -262,7 +262,7 @@
     ;;
 
   makeinfo)
-    if test -z "$run" && (makeinfo --version) > /dev/null 2>&1; then
+    if test -z "$run" && (makeinfo --version) > /System/Devices/null 2>&1; then
        # We have makeinfo, but it failed.
        exit 1
     fi
@@ -292,10 +292,10 @@
     # We have already tried tar in the generic part.
     # Look for gnutar/gtar before invocation to avoid ugly error
     # messages.
-    if (gnutar --version > /dev/null 2>&1); then
+    if (gnutar --version > /System/Devices/null 2>&1); then
        gnutar "$@" && exit 0
     fi
-    if (gtar --version > /dev/null 2>&1); then
+    if (gtar --version > /System/Devices/null 2>&1); then
        gtar "$@" && exit 0
     fi
     firstarg="$1"
diff -urN module-init-tools-3.2/mkinstalldirs module-init-tools-3.2-STEP/mkinstalldirs
--- module-init-tools-3.2/mkinstalldirs	2002-11-26 14:38:55.000000000 +1300
+++ module-init-tools-3.2-STEP/mkinstalldirs	2006-04-27 00:45:04.464882360 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 # mkinstalldirs --- make directory hierarchy
 # Author: Noah Friedman <friedman@prep.ai.mit.edu>
 # Created: 1993-05-16
diff -urN module-init-tools-3.2/modinfo.8 module-init-tools-3.2-STEP/modinfo.8
--- module-init-tools-3.2/modinfo.8	2004-08-26 21:11:07.000000000 +1200
+++ module-init-tools-3.2-STEP/modinfo.8	2006-04-27 00:45:22.343164448 +1200
@@ -1,4 +1,4 @@
-.\" $Header: /aolnet/dev/src/CVS/sgml/docbook-to-man/cmd/docbook-to-man.sh,v 1.1.1.1 1998/11/13 21:31:59 db3l Exp $
+.\" $Header: /aolnet/System/Devices/src/CVS/sgml/docbook-to-man/cmd/docbook-to-man.sh,v 1.1.1.1 1998/11/13 21:31:59 db3l Exp $
 .\"
 .\"	transcript compatibility for postscript use.
 .\"
@@ -66,7 +66,7 @@
 \fBmodinfo\fR extracts information from the Linux 
 Kernel modules given on the command line.  If the module name is 
 not a filename, then the 
-\fB/lib/modules/\fP\fIversion\fR       directory is searched, as done by 
+\fB/System/Drivers/\fP\fIversion\fR       directory is searched, as done by 
 \fBmodprobe\fP\fB(8)\fP. 
  
 .PP 
diff -urN module-init-tools-3.2/modprobe.8 module-init-tools-3.2-STEP/modprobe.8
--- module-init-tools-3.2/modprobe.8	2005-10-28 20:12:12.000000000 +1300
+++ module-init-tools-3.2-STEP/modprobe.8	2006-04-27 00:45:22.341164752 +1200
@@ -26,7 +26,7 @@
 module from the Linux kernel: note that for convenience, there
 is no difference between _ and - in module names.
 \fBmodprobe\fR looks in the module directory
-\fI/lib/modules/`uname -r`\fR for all
+\fI/System/Drivers/`uname -r`\fR for all
 the modules and other files, except for the optional
 \fI/etc/modprobe.conf\fR configuration file and
 \fI/etc/modprobe.d\fR directory
diff -urN module-init-tools-3.2/modprobe.c module-init-tools-3.2-STEP/modprobe.c
--- module-init-tools-3.2/modprobe.c	2005-11-19 15:11:50.000000000 +1300
+++ module-init-tools-3.2-STEP/modprobe.c	2006-04-27 00:45:16.005127976 +1200
@@ -355,7 +355,7 @@
 	}
 }
 
-/* Is module in /proc/modules?  If so, fill in usecount if not NULL. 
+/* Is module in /System/Processes/modules?  If so, fill in usecount if not NULL. 
    0 means no, 1 means yes, -1 means unknown.
  */
 static int module_in_kernel(const char *modname, unsigned int *usecount)
@@ -365,7 +365,7 @@
 
 again:
 	/* Might not be mounted yet.  Don't fail. */
-	proc_modules = fopen("/proc/modules", "r");
+	proc_modules = fopen("/System/Processes/modules", "r");
 	if (!proc_modules)
 		return -1;
 
@@ -1382,9 +1382,9 @@
 {
 	unsigned int i;
 
-	/* Look for "/dev" arg */
+	/* Look for "/System/Devices" arg */
 	for (i = 1; argv[i]; i++) {
-		if (strncmp(argv[i], "/dev/", 5) == 0)
+		if (strncmp(argv[i], "/System/Devices/", 5) == 0)
 			return 1;
 	}
 	return 0;
diff -urN module-init-tools-3.2/modprobe.conf.5 module-init-tools-3.2-STEP/modprobe.conf.5
--- module-init-tools-3.2/modprobe.conf.5	2005-08-09 16:30:20.000000000 +1200
+++ module-init-tools-3.2-STEP/modprobe.conf.5	2006-04-27 00:45:16.635032216 +1200
@@ -72,8 +72,8 @@
 module "fred" worked better with the module "barney"
 already installed (but it didn't depend on it, so
 \fBmodprobe\fR won't automatically load it),
-you could say "install fred /sbin/modprobe barney;
-/sbin/modprobe --ignore-install fred", which would do what
+you could say "install fred /System/AdminTools/modprobe barney;
+/System/AdminTools/modprobe --ignore-install fred", which would do what
 you wanted.  Note the \fB--ignore-install\fR,
 which stops the second \fBmodprobe\fR from
 re-running the same \fBinstall\fR command.
@@ -81,8 +81,8 @@
 
 You can also use \fBinstall\fR to make up
 modules which don't otherwise exist.  For example:
-"install probe-ethernet /sbin/modprobe e100 ||
-/sbin/modprobe eepro100", which will try first the e100
+"install probe-ethernet /System/AdminTools/modprobe e100 ||
+/System/AdminTools/modprobe eepro100", which will try first the e100
 driver, then the eepro100 driver, when you do "modprobe
 probe-ethernet".
 
@@ -92,16 +92,16 @@
 "modprobe fred opt=1" to pass the "opt=1" arg to the
 module, even if there's an install command in the
 configuration file.  So our above example becomes "install
-fred /sbin/modprobe barney; /sbin/modprobe
+fred /System/AdminTools/modprobe barney; /System/AdminTools/modprobe
 --ignore-install fred $CMDLINE_OPTS"
 .TP
 \fBremove \fImodulename\fB \fIcommand...\fB \fR
 This is similar to the \fBinstall\fR command
 above, except it is invoked when "modprobe -r" is run.
 The removal counterparts to the two examples above would
-be: "remove fred /sbin/modprobe -r --ignore-remove fred &&
-/sbin/modprobe -r barney", and "remove probe-ethernet
-/sbin/modprobe -r eepro100 || /sbin/modprobe -r e100".
+be: "remove fred /System/AdminTools/modprobe -r --ignore-remove fred &&
+/System/AdminTools/modprobe -r barney", and "remove probe-ethernet
+/System/AdminTools/modprobe -r eepro100 || /System/AdminTools/modprobe -r e100".
 .TP
 \fBinclude \fIfilename\fB \fR
 Using this command, you can include other configuration
diff -urN module-init-tools-3.2/modprobe.devfs module-init-tools-3.2-STEP/modprobe.devfs
--- module-init-tools-3.2/modprobe.devfs	2004-08-26 21:13:28.000000000 +1200
+++ module-init-tools-3.2-STEP/modprobe.devfs	2006-04-27 00:45:16.020125696 +1200
@@ -1,62 +1,62 @@
 # /etc/modprobe.devfs:
 
-alias /dev/discs/* /dev/discs
-alias /dev/cdroms/* /dev/cdroms
-alias /dev/cdrom /dev/cdroms
-alias /dev/tapes/* /dev/tapes
-alias /dev/ide/*/cd ide-cd
-alias /dev/sd* /dev/sd
-alias /dev/sr* /dev/sr
-alias /dev/scsi/*/cd sr_mod
-alias /dev/st* /dev/st
-alias /dev/nst* /dev/st
-alias /dev/sg* /dev/sg
-alias /dev/scsi/*/generic /dev/sg
-alias /dev/pg /dev/sg
-alias /dev/pg* /dev/sg
-alias /dev/floppy floppy
-alias /dev/fd* floppy
-alias /dev/rd rd
-alias /dev/ram* rd
-alias /dev/loop* loop
-alias /dev/md* gen-md
-alias /dev/printers* lp
-alias /dev/lp* /dev/printers
-alias /dev/sound sound-slot-0
-alias /dev/audio sound-slot-0
-alias /dev/mixer sound-slot-0
-alias /dev/dsp sound-slot-0
-alias /dev/dspW sound-slot-0
-alias /dev/midi sound-slot-0
-alias /dev/js* /dev/joysticks
-alias /dev/tts* serial
-alias /dev/ttyS* /dev/tts
-alias /dev/cua* /dev/tts
-alias /dev/input/mouse* mousedev
-alias /dev/apm_bios apm
-alias /dev/misc/apm_bios apm
-alias /dev/misc/atibm atixlmouse
-alias /dev/misc/inportbm msbusmouse
-alias /dev/misc/logibm busmouse
-alias /dev/misc/rtc rtc
-alias /dev/misc/agpgart agpgart
-alias /dev/rtc rtc
-alias /dev/ppp* ppp_generic
-alias /dev/video* /dev/v4l
-alias /dev/vbi* /dev/v4l
-alias /dev/agpgart agpgart
-alias /dev/dri* agpgart
-alias /dev/ircomm ircomm-tty
-alias /dev/ircomm* ircomm-tty
-alias /dev/rawctl /dev/raw
-install /dev/cdroms /sbin/modprobe scsi_hostadapter; /sbin/modprobe sr_mod; /sbin/modprobe ide-probe-mod; /sbin/modprobe ide-cd; /sbin/modprobe cdrom; /bin/true
-install /dev/discs /sbin/modprobe scsi_hostadapter; /sbin/modprobe sd_mod; /sbin/modprobe ide-probe-mod; /sbin/modprobe ide-disk; /sbin/modprobe ide-floppy; /sbin/modprobe DAC960; /bin/true
-install /dev/ide /sbin/modprobe ide-probe-mod; /sbin/modprobe ide-disk; /sbin/modprobe ide-cd; /sbin/modprobe ide-tape; /sbin/modprobe ide-floppy; /bin/true
-install /dev/scsi /sbin/modprobe scsi_hostadapter; /sbin/modprobe sd_mod; /sbin/modprobe sr_mod; /sbin/modprobe st; /sbin/modprobe sg; /bin/true
-install /dev/sd /sbin/modprobe scsi_hostadapter; /sbin/modprobe sd_mod; /bin/true
-install /dev/sg /sbin/modprobe scsi_hostadapter; /sbin/modprobe sg; /bin/true
-install /dev/sr /sbin/modprobe scsi_hostadapter; /sbin/modprobe sr_mod; /bin/true
-install /dev/st /sbin/modprobe scsi_hostadapter; /sbin/modprobe st; /bin/true
-install /dev/tapes /sbin/modprobe scsi_hostadapter; /sbin/modprobe st; /sbin/modprobe ide-probe-mod; /sbin/modprobe ide-tape; /bin/true
+alias /System/Devices/discs/* /System/Devices/discs
+alias /System/Devices/cdroms/* /System/Devices/cdroms
+alias /System/Devices/cdrom /System/Devices/cdroms
+alias /System/Devices/tapes/* /System/Devices/tapes
+alias /System/Devices/ide/*/cd ide-cd
+alias /System/Devices/sd* /System/Devices/sd
+alias /System/Devices/sr* /System/Devices/sr
+alias /System/Devices/scsi/*/cd sr_mod
+alias /System/Devices/st* /System/Devices/st
+alias /System/Devices/nst* /System/Devices/st
+alias /System/Devices/sg* /System/Devices/sg
+alias /System/Devices/scsi/*/generic /System/Devices/sg
+alias /System/Devices/pg /System/Devices/sg
+alias /System/Devices/pg* /System/Devices/sg
+alias /System/Devices/floppy floppy
+alias /System/Devices/fd* floppy
+alias /System/Devices/rd rd
+alias /System/Devices/ram* rd
+alias /System/Devices/loop* loop
+alias /System/Devices/md* gen-md
+alias /System/Devices/printers* lp
+alias /System/Devices/lp* /System/Devices/printers
+alias /System/Devices/sound sound-slot-0
+alias /System/Devices/audio sound-slot-0
+alias /System/Devices/mixer sound-slot-0
+alias /System/Devices/dsp sound-slot-0
+alias /System/Devices/dspW sound-slot-0
+alias /System/Devices/midi sound-slot-0
+alias /System/Devices/js* /System/Devices/joysticks
+alias /System/Devices/tts* serial
+alias /System/Devices/ttyS* /System/Devices/tts
+alias /System/Devices/cua* /System/Devices/tts
+alias /System/Devices/input/mouse* mousedev
+alias /System/Devices/apm_bios apm
+alias /System/Devices/misc/apm_bios apm
+alias /System/Devices/misc/atibm atixlmouse
+alias /System/Devices/misc/inportbm msbusmouse
+alias /System/Devices/misc/logibm busmouse
+alias /System/Devices/misc/rtc rtc
+alias /System/Devices/misc/agpgart agpgart
+alias /System/Devices/rtc rtc
+alias /System/Devices/ppp* ppp_generic
+alias /System/Devices/video* /System/Devices/v4l
+alias /System/Devices/vbi* /System/Devices/v4l
+alias /System/Devices/agpgart agpgart
+alias /System/Devices/dri* agpgart
+alias /System/Devices/ircomm ircomm-tty
+alias /System/Devices/ircomm* ircomm-tty
+alias /System/Devices/rawctl /System/Devices/raw
+install /System/Devices/cdroms /System/AdminTools/modprobe scsi_hostadapter; /System/AdminTools/modprobe sr_mod; /System/AdminTools/modprobe ide-probe-mod; /System/AdminTools/modprobe ide-cd; /System/AdminTools/modprobe cdrom; /System/Tools/true
+install /System/Devices/discs /System/AdminTools/modprobe scsi_hostadapter; /System/AdminTools/modprobe sd_mod; /System/AdminTools/modprobe ide-probe-mod; /System/AdminTools/modprobe ide-disk; /System/AdminTools/modprobe ide-floppy; /System/AdminTools/modprobe DAC960; /System/Tools/true
+install /System/Devices/ide /System/AdminTools/modprobe ide-probe-mod; /System/AdminTools/modprobe ide-disk; /System/AdminTools/modprobe ide-cd; /System/AdminTools/modprobe ide-tape; /System/AdminTools/modprobe ide-floppy; /System/Tools/true
+install /System/Devices/scsi /System/AdminTools/modprobe scsi_hostadapter; /System/AdminTools/modprobe sd_mod; /System/AdminTools/modprobe sr_mod; /System/AdminTools/modprobe st; /System/AdminTools/modprobe sg; /System/Tools/true
+install /System/Devices/sd /System/AdminTools/modprobe scsi_hostadapter; /System/AdminTools/modprobe sd_mod; /System/Tools/true
+install /System/Devices/sg /System/AdminTools/modprobe scsi_hostadapter; /System/AdminTools/modprobe sg; /System/Tools/true
+install /System/Devices/sr /System/AdminTools/modprobe scsi_hostadapter; /System/AdminTools/modprobe sr_mod; /System/Tools/true
+install /System/Devices/st /System/AdminTools/modprobe scsi_hostadapter; /System/AdminTools/modprobe st; /System/Tools/true
+install /System/Devices/tapes /System/AdminTools/modprobe scsi_hostadapter; /System/AdminTools/modprobe st; /System/AdminTools/modprobe ide-probe-mod; /System/AdminTools/modprobe ide-tape; /System/Tools/true
 
 include /etc/modprobe.conf
diff -urN module-init-tools-3.2/modules.dep.5 module-init-tools-3.2-STEP/modules.dep.5
--- module-init-tools-3.2/modules.dep.5	2003-03-28 12:01:37.000000000 +1200
+++ module-init-tools-3.2-STEP/modules.dep.5	2006-04-27 00:45:16.636032064 +1200
@@ -61,7 +61,7 @@
 The \fBmodules.dep\fP as generated by 
 module-init-tools \fBdepmod\fP, lists the 
 dependencies for every module in the directories under 
-\fB/lib/modules/\fP\fIversion\fP, 
+\fB/System/Drivers/\fP\fIversion\fP, 
 where \fBmodules.dep\fP is. 
  
 .PP 
@@ -72,7 +72,7 @@
  
 .PP 
 For example, if 
-\fB/lib/modules/2.5.53/kernel/a.ko\fP depended on 
+\fB/System/Drivers/2.5.53/kernel/a.ko\fP depended on 
 \fBb.ko\fP and \fBc.ko\fP in the 
 same directory, and \fBc.ko\fP depended on 
 \fBb.ko\fP as well, the file might look like: 
@@ -81,9 +81,9 @@
 .nf 
 .ta 8n 16n 24n 32n 40n 48n 56n 64n 72n 
 # This is a comment. 
-/lib/modules/2.5.53/kernel/a.ko: /lib/modules/2.5.53/kernel/c.ko /lib/modules/2.5.53/kernel/b.ko 
-/lib/modules/2.5.53/kernel/b.ko: 
-/lib/modules/2.5.53/kernel/c.ko: /lib/modules/2.5.53/kernel/b.ko 
+/System/Drivers/2.5.53/kernel/a.ko: /System/Drivers/2.5.53/kernel/c.ko /System/Drivers/2.5.53/kernel/b.ko 
+/System/Drivers/2.5.53/kernel/b.ko: 
+/System/Drivers/2.5.53/kernel/c.ko: /System/Drivers/2.5.53/kernel/b.ko 
  
 .fi 
 .PP 
diff -urN module-init-tools-3.2/rmmod.8 module-init-tools-3.2-STEP/rmmod.8
--- module-init-tools-3.2/rmmod.8	2003-10-30 13:07:53.000000000 +1300
+++ module-init-tools-3.2-STEP/rmmod.8	2006-04-27 00:45:22.339165056 +1200
@@ -1,4 +1,4 @@
-...\" $Header: /aolnet/dev/src/CVS/sgml/docbook-to-man/cmd/docbook-to-man.sh,v 1.1.1.1 1998/11/13 21:31:59 db3l Exp $
+...\" $Header: /aolnet/System/Devices/src/CVS/sgml/docbook-to-man/cmd/docbook-to-man.sh,v 1.1.1.1 1998/11/13 21:31:59 db3l Exp $
 ...\"
 ...\"	transcript compatibility for postscript use.
 ...\"
diff -urN module-init-tools-3.2/rmmod.c module-init-tools-3.2-STEP/rmmod.c
--- module-init-tools-3.2/rmmod.c	2004-02-25 20:10:51.000000000 +1300
+++ module-init-tools-3.2-STEP/rmmod.c	2006-04-27 00:45:16.016126304 +1200
@@ -86,19 +86,19 @@
 /* Report that the module is in use. */
 static void mod_in_use(int log, const char *modname, char *usedby)
 {
-	/* New /proc/modules uses a single "-" to mean "nothing".  Old
+	/* New /System/Processes/modules uses a single "-" to mean "nothing".  Old
            one just puts nothing there. */
 	if (usedby[0] == '-' || strcmp(usedby, "") == 0) {
 		error(log, "Module %s is in use\n", modname);
 		return;
 	}
 
-	/* New /proc/modules *always* prints commas (even if only one) */
+	/* New /System/Processes/modules *always* prints commas (even if only one) */
 	if (strchr(usedby, ','))
 		/* Blatt over trailing comma for neatness */
 		usedby[strcspn(usedby, " \n")-1] = '\0';
 	else {
-		/* Older /proc/modules just put them as
+		/* Older /System/Processes/modules just put them as
                    space-separated names.  Blatt over trailing \n */
 		usedby[strlen(usedby)-1] = '\0';
 	}
@@ -114,11 +114,11 @@
 	unsigned long size, refs;
 	int scanned;
 
-	module_list = fopen("/proc/modules", "r");
+	module_list = fopen("/System/Processes/modules", "r");
 	if (!module_list) {
-		if (errno == ENOENT) /* /proc may not be mounted. */
+		if (errno == ENOENT) /* /System/Processes may not be mounted. */
 			return 0;
-		fatal(log, "can't open /proc/modules: %s\n", strerror(errno));
+		fatal(log, "can't open /System/Processes/modules: %s\n", strerror(errno));
 	}
 	while (fgets(line, sizeof(line)-1, module_list) != NULL) {
 		if (strchr(line, '\n') == NULL) {
@@ -131,7 +131,7 @@
 			continue;
 
 		if (scanned < 2)
-			fatal(log, "Unknown format in /proc/modules: %s\n",
+			fatal(log, "Unknown format in /System/Processes/modules: %s\n",
 			      line);
 
 		if (scanned == 2)
@@ -143,7 +143,7 @@
 				   next_field(next_field(next_field(line))));
 		goto out;
 	}
-	error(log, "Module %s does not exist in /proc/modules\n", modname);
+	error(log, "Module %s does not exist in /System/Processes/modules\n", modname);
 	refs = 1;
  out:
 	fclose(module_list);
diff -urN module-init-tools-3.2/stress_modules.sh module-init-tools-3.2-STEP/stress_modules.sh
--- module-init-tools-3.2/stress_modules.sh	2002-12-13 13:40:06.000000000 +1300
+++ module-init-tools-3.2-STEP/stress_modules.sh	2006-04-27 00:45:16.022125392 +1200
@@ -1,12 +1,12 @@
-#! /bin/sh
+#! /System/Tools/sh
 
-MODULE_DIR=/lib/modules/`uname -r`/kernel
+MODULE_DIR=/System/Drivers/`uname -r`/kernel
 
 case "$1" in
     mount-unmount)
 	trap "umount $3; rm -f $2; rmdir $3" 0
 	mkdir $3
-	dd bs=1204k count=20 if=/dev/zero of=$2
+	dd bs=1204k count=20 if=/System/Devices/zero of=$2
 	mke2fs -F $2
 	tune2fs -c 0 $2
 	modprobe loop
@@ -30,7 +30,7 @@
 	done
 	;;
     "")
-	$0 mount-unmount testfs.$$ /tmp/$$ &
+	$0 mount-unmount testfs.$$ /System/TemporaryFiles/$$ &
 	$0 bang-one ext2 &
 	$0 bang-all &
 	exit 0
diff -urN module-init-tools-3.2/tables.c module-init-tools-3.2-STEP/tables.c
--- module-init-tools-3.2/tables.c	2005-02-07 16:34:33.000000000 +1300
+++ module-init-tools-3.2-STEP/tables.c	2006-04-27 00:45:10.595950296 +1200
@@ -4,7 +4,7 @@
 #include "depmod.h"
 #include "tables.h"
 
-/* Turn /lib/modules/2.5.49/kernel/foo.ko(.gz) => foo */
+/* Turn /System/Drivers/2.5.49/kernel/foo.ko(.gz) => foo */
 static void make_shortname(char *dest, const char *src)
 {
 	char *ext;
diff -urN module-init-tools-3.2/testing.h module-init-tools-3.2-STEP/testing.h
--- module-init-tools-3.2/testing.h	2004-07-01 13:33:20.000000000 +1200
+++ module-init-tools-3.2-STEP/testing.h	2006-04-27 00:45:10.605948776 +1200
@@ -73,7 +73,7 @@
 		unlink(file);
 	}
 	if (getenv("MODTEST_INSERT_PROC")) {
-		int fd = modtest_open("/proc/modules", O_APPEND|O_WRONLY, 0);
+		int fd = modtest_open("/System/Processes/modules", O_APPEND|O_WRONLY, 0);
 		write(fd, getenv("MODPROBE_MODULE"), strlen(getenv("MODPROBE_MODULE")));
 		write(fd, " 1000 1 -\n", strlen(" 1000 1 -\n"));
 		close(fd);
diff -urN module-init-tools-3.2/tests/data/src/Makefile module-init-tools-3.2-STEP/tests/data/src/Makefile
--- module-init-tools-3.2/tests/data/src/Makefile	2005-01-18 16:31:05.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/data/src/Makefile	2006-04-27 00:45:41.057319464 +1200
@@ -1,4 +1,4 @@
-#! /usr/bin/make
+#! /System/Tools/make
 
 SOURCES:=$(wildcard *.c)
 
@@ -27,7 +27,7 @@
 MACHINES+=hugo # ppc
 MACHINES+=opteron # x86-64
 
-superego_CCPREFIX=/usr/local/ppc64/bin/powerpc64-linux-
+superego_CCPREFIX=/usr/local/ppc64/System/Tools/powerpc64-linux-
 
 build: install 
 	DIR=$$(dirname $$(pwd) ); $(foreach mach,$(MACHINES),rsync -az --delete $$DIR/ $(mach):mod-init-tools-data/ && echo $(mach) && ssh $(mach) make -C mod-init-tools-data/src CCPREFIX=$($(mach)_CCPREFIX) install && rsync -avz --delete $(mach):mod-init-tools-data/ $$DIR/ &&) true
diff -urN module-init-tools-3.2/tests/runtests module-init-tools-3.2-STEP/tests/runtests
--- module-init-tools-3.2/tests/runtests	2005-01-18 18:55:11.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/runtests	2006-04-27 00:45:28.314256704 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Shell script to run test suite.
 
 set -e
@@ -19,14 +19,14 @@
        exit 1
     fi
 
-    if [ -x /bin/tempfile ]
+    if [ -x /System/Tools/tempfile ]
     then
         # Debian 
         export $1="`tempfile`"
-    elif [ -x  /bin/mktemp ]
+    elif [ -x  /System/Tools/mktemp ]
     then
         # RedHat et. al.
-        export $1="`mktemp /tmp/modtest.XXXXXX`"
+        export $1="`mktemp /System/TemporaryFiles/modtest.XXXXXX`"
     else
         echo "Don't know how to make a temporary file on this "
         echo "system, sorry."
@@ -43,11 +43,11 @@
 
 for config in --enable-zlib --disable-zlib; do
     echo Building with $config...
-    ./configure $config CFLAGS="-DJUST_TESTING -g -Wall" >/dev/null
-    make clean >/dev/null
+    ./configure $config CFLAGS="-DJUST_TESTING -g -Wall" >/System/Devices/null
+    make clean >/System/Devices/null
     # ismod.static doesn't build with -DJUST_TESTING and --enable-zlib
-    make insmod.static >/dev/null 2>&1 || touch insmod.static
-    make all >/dev/null
+    make insmod.static >/System/Devices/null 2>&1 || touch insmod.static
+    make all >/System/Devices/null
 
     echo Testing with $config...
     if grep -q CONFIG_USE_ZLIB=1 Makefile; then
@@ -67,7 +67,7 @@
     ln -sfn 32-$ENDIAN tests/data/32
 
     # Make them run the valgrind wrappers, if available.
-    if type valgrind 2>/dev/null; then
+    if type valgrind 2>/System/Devices/null; then
 	PATH=`pwd`/tests:$PATH
     else
 	PATH=`pwd`:$PATH
@@ -75,8 +75,8 @@
 
     # By default, we want to look like a new kernel.
     MODTEST_UNAME=2.5.52
-    MODTEST_OVERRIDE0=/proc/ksyms
-    MODTEST_OVERRIDE_WITH0=/proc/nonexistent-file
+    MODTEST_OVERRIDE0=/System/Processes/ksyms
+    MODTEST_OVERRIDE_WITH0=/System/Processes/nonexistent-file
 
     export MODTEST_UNAME MODTEST_OVERRIDE0 MODTEST_OVERRIDE_WITH0
 
@@ -85,7 +85,7 @@
     for dir in `find tests/* -type d | sort`
       do
     # data and tmp dirs don't contain tests.
-      case "$dir" in tests/data*) continue;; tests/tmp*) continue;; esac
+      case "$dir" in tests/data*) continue;; tests/System/TemporaryFiles*) continue;; esac
 
       if [ -z "$VERBOSE" ]; then
 	  echo -n Running tests for $dir.
@@ -101,7 +101,7 @@
 	      case "$f" in *$1*) DOING=1;; *) continue;; esac
 	  fi
 
-	  rm -rf tests/tmp/*
+	  rm -rf tests/System/TemporaryFiles/*
 	  if sh -e $EXTRA_ARGS $f; then
 	      if [ -z "$VERBOSE" ]; then
 		  echo -n .
@@ -111,7 +111,7 @@
 	  else
 	      echo Test for $f failed.
 	      # Dangerous to leave these lying around
-	      make distclean >/dev/null
+	      make distclean >/System/Devices/null
 	      exit 1
 	  fi
       done
diff -urN module-init-tools-3.2/tests/test-depmod/01backcompat.sh module-init-tools-3.2-STEP/tests/test-depmod/01backcompat.sh
--- module-init-tools-3.2/tests/test-depmod/01backcompat.sh	2005-08-09 16:55:41.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/01backcompat.sh	2006-04-27 00:45:41.079316120 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 # Backwards compat using explicit version number
 [ "`./depmod 1.5.48 2>&1`" = "Version requires old depmod, but couldn't run ./depmod.old: No such file or directory" ]
@@ -13,11 +13,11 @@
 [ "`MODTEST_UNAME=2.4.49 ./depmod 2>&1`" = "Version requires old depmod, but couldn't run ./depmod.old: No such file or directory" ]
 
 # Create one for it to find, put it in the path.
-echo '#! /bin/sh' > tests/tmp/depmod.old
-echo 'echo -n DEPMOD.OLD' >> tests/tmp/depmod.old
-echo "for f; do echo -n \ \'\$f\'; done" >> tests/tmp/depmod.old
-chmod a+x tests/tmp/depmod.old
-PATH=`pwd`/tests/tmp:$PATH
+echo '#! /System/Tools/sh' > tests/System/TemporaryFiles/depmod.old
+echo 'echo -n DEPMOD.OLD' >> tests/System/TemporaryFiles/depmod.old
+echo "for f; do echo -n \ \'\$f\'; done" >> tests/System/TemporaryFiles/depmod.old
+chmod a+x tests/System/TemporaryFiles/depmod.old
+PATH=`pwd`/tests/System/TemporaryFiles:$PATH
 
 MODTEST_UNAME=2.4.20
 
@@ -34,9 +34,9 @@
 [ "`depmod -C 2.6.1 2>&1`" = "DEPMOD.OLD '-C' '2.6.1'" ]
 
 # This should skip the arg after -C, and NOT invoke backwards compat code.
-MODTEST_OVERRIDE1=/lib/modules/2.6.1-kexec
+MODTEST_OVERRIDE1=/System/Drivers/2.6.1-kexec
 MODTEST_OVERRIDE_WITH1=DOES_NOT_EXIST
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-[ "`depmod -ae -C /dev/null 2.6.1-kexec 2>&1`" = "WARNING: Couldn't open directory /lib/modules/2.6.1-kexec: No such file or directory
-FATAL: Could not open /lib/modules/2.6.1-kexec/modules.dep.temp for writing: No such file or directory" ]
+[ "`depmod -ae -C /System/Devices/null 2.6.1-kexec 2>&1`" = "WARNING: Couldn't open directory /System/Drivers/2.6.1-kexec: No such file or directory
+FATAL: Could not open /System/Drivers/2.6.1-kexec/modules.dep.temp for writing: No such file or directory" ]
diff -urN module-init-tools-3.2/tests/test-depmod/02simple.sh module-init-tools-3.2-STEP/tests/test-depmod/02simple.sh
--- module-init-tools-3.2/tests/test-depmod/02simple.sh	2005-03-29 16:49:24.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/02simple.sh	2006-04-27 00:45:41.084315360 +1200
@@ -1,235 +1,235 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Simple tests of generation of 32-bit and 64-bit modules.dep
 
 for ENDIAN in -be -le; do
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS$ENDIAN/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS$ENDIAN/normal/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS$ENDIAN/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS$ENDIAN/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS$ENDIAN/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Outputs
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules.pcimap
+MODTEST_OVERRIDE8=/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.usbmap
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.ccwmap
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules.alias
+MODTEST_OVERRIDE11=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules.symbols
+MODTEST_OVERRIDE12=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules.ieee1394map
+MODTEST_OVERRIDE13=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules.dep.temp
+MODTEST_OVERRIDE14=/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules.pcimap.temp
+MODTEST_OVERRIDE15=/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules.usbmap.temp
+MODTEST_OVERRIDE16=/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules.alias.temp
+MODTEST_OVERRIDE18=/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules.symbols.temp
+MODTEST_OVERRIDE19=/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules.isapnpmap
+MODTEST_OVERRIDE22=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules.inputmap.temp
+MODTEST_OVERRIDE23=/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules.inputmap
+MODTEST_OVERRIDE24=/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
-MODTEST_OVERRIDE25=/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH25=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE25=/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
-MODTEST_OVERRIDE26=/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE26=/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
 # Expect no output.
 [ "`depmod 2>&1`" = "" ]
 
 # Check modules.dep results: expect 5 lines
-[ `grep -vc '^#' < tests/tmp/modules.dep` = 5 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.dep` = 5 ]
 
-[ "`grep -w export_dep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
-[ "`grep -w noexport_dep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
-[ "`grep -w export_nodep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko:" ]
-[ "`grep -w noexport_nodep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" ]
-[ "`grep -w noexport_doubledep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
+[ "`grep -w export_dep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
+[ "`grep -w noexport_dep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
+[ "`grep -w export_nodep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko:" ]
+[ "`grep -w noexport_nodep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" ]
+[ "`grep -w noexport_doubledep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
 
 # Check modules.symbols results: expect 3 lines
-[ `grep -vc '^#' < tests/tmp/modules.symbols` = 3 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.symbols` = 3 ]
 
-[ "`grep -w symbol:exported1 tests/tmp/modules.symbols`" = "alias symbol:exported1 export_nodep_$BITNESS" ]
-[ "`grep -w symbol:exported2 tests/tmp/modules.symbols`" = "alias symbol:exported2 export_nodep_$BITNESS" ]
-[ "`grep -w symbol:exported3 tests/tmp/modules.symbols`" = "alias symbol:exported3 export_dep_$BITNESS" ]
+[ "`grep -w symbol:exported1 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported1 export_nodep_$BITNESS" ]
+[ "`grep -w symbol:exported2 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported2 export_nodep_$BITNESS" ]
+[ "`grep -w symbol:exported3 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported3 export_dep_$BITNESS" ]
 
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 # Synonyms
 [ "`depmod $MODTEST_UNAME`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -a`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -a $MODTEST_UNAME`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -A`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -A $MODTEST_UNAME`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -e -A`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -e -A $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod --all`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod --quick`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -e --quick`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -e --quick $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod --errsyms --quick`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod --errsyms --quick $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 # Combined should form stdout versions.
-grep -vh '^#' tests/tmp/modules.dep.old tests/tmp/modules.symbols.old > tests/tmp/modules.all.old
+grep -vh '^#' tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.symbols.old > tests/System/TemporaryFiles/modules.all.old
 
 # Stdout versions.
-depmod -n | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all >/dev/null
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -a -n | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all >/dev/null
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -n -a $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all >/dev/null
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all >/dev/null
-mv tests/tmp/modules.all tests/tmp/modules.all.old
+depmod -n | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -a -n | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -n -a $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
 
 done
 done
diff -urN module-init-tools-3.2/tests/test-depmod/04maps.sh module-init-tools-3.2-STEP/tests/test-depmod/04maps.sh
--- module-init-tools-3.2/tests/test-depmod/04maps.sh	2005-03-29 21:52:48.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/04maps.sh	2006-04-27 00:45:47.263376000 +1200
@@ -1,231 +1,231 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test of generation of 32-bit and 64-bit maps
 
 for ENDIAN in -le -be; do
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS$ENDIAN/map
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/ccw_map-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/ccw_map-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS$ENDIAN/map/ccw_map-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/pci_map-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/pci_map-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS$ENDIAN/map/pci_map-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/usb_map-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/usb_map-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS$ENDIAN/map/usb_map-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/ieee1394_map-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/ieee1394_map-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS$ENDIAN/map/ieee1394_map-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/pnp_map-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/pnp_map-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS$ENDIAN/map/pnp_map-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
-MODTEST_OVERRIDE27=/lib/modules/$MODTEST_UNAME/input_map-$BITNESS.ko
+MODTEST_OVERRIDE27=/System/Drivers/$MODTEST_UNAME/input_map-$BITNESS.ko
 MODTEST_OVERRIDE_WITH27=tests/data/$BITNESS$ENDIAN/map/input_map-$BITNESS.ko
 export MODTEST_OVERRIDE27 MODTEST_OVERRIDE_WITH27
 
 # Outputs
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules.pcimap
+MODTEST_OVERRIDE8=/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.usbmap
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.ccwmap
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules.alias
+MODTEST_OVERRIDE11=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules.symbols
+MODTEST_OVERRIDE12=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules.ieee1394map
+MODTEST_OVERRIDE13=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules.dep.temp
+MODTEST_OVERRIDE14=/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules.pcimap.temp
+MODTEST_OVERRIDE15=/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules.usbmap.temp
+MODTEST_OVERRIDE16=/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules.alias.temp
+MODTEST_OVERRIDE18=/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules.symbols.temp
+MODTEST_OVERRIDE19=/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules.isapnpmap
+MODTEST_OVERRIDE22=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules.inputmap.temp
+MODTEST_OVERRIDE23=/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules.inputmap
+MODTEST_OVERRIDE24=/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
 # FIXME: Test these
-MODTEST_OVERRIDE25=/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH25=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE25=/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
-MODTEST_OVERRIDE26=/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE26=/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
 # Expect no output.
 [ "`depmod`" = "" ]
 
 # Check PCI: expect 2 lines
-[ `grep -vc '^#' < tests/tmp/modules.pcimap` = 2 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.pcimap` = 2 ]
 
-[ "`grep pci_map tests/tmp/modules.pcimap`" = "pci_map-$BITNESS           0x00000001 0x00000002 0x00000003 0x00000004 0x00000005 0x00000006 0x0
+[ "`grep pci_map tests/System/TemporaryFiles/modules.pcimap`" = "pci_map-$BITNESS           0x00000001 0x00000002 0x00000003 0x00000004 0x00000005 0x00000006 0x0
 pci_map-$BITNESS           0x0000000b 0x0000000c 0x0000000d 0x0000000e 0x0000000f 0x00000010 0x0" ]
 
 # Check USB: expect 2 lines
-[ `grep -vc '^#' < tests/tmp/modules.usbmap` = 2 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.usbmap` = 2 ]
 
-[ "`grep usb_map tests/tmp/modules.usbmap`" = "usb_map-$BITNESS           0x0001      0x0002   0x0003    0x0004       0x0005       0x06         0x07            0x08            0x09            0x0a               0x0b               0x0
+[ "`grep usb_map tests/System/TemporaryFiles/modules.usbmap`" = "usb_map-$BITNESS           0x0001      0x0002   0x0003    0x0004       0x0005       0x06         0x07            0x08            0x09            0x0a               0x0b               0x0
 usb_map-$BITNESS           0x000b      0x000c   0x000d    0x000e       0x000f       0x10         0x11            0x12            0x13            0x14               0x15               0x0" ]
 
 # Check CCW: expect 2 lines
-[ `grep -vc '^#' < tests/tmp/modules.ccwmap` = 2 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.ccwmap` = 2 ]
 
-[ "`grep ccw_map tests/tmp/modules.ccwmap`" = "ccw_map-$BITNESS           0x000f      0x0001  0x03      0x0002  0x04
+[ "`grep ccw_map tests/System/TemporaryFiles/modules.ccwmap`" = "ccw_map-$BITNESS           0x000f      0x0001  0x03      0x0002  0x04
 ccw_map-$BITNESS           0x000f      0x000b  0x0d      0x000c  0x0e" ]
 
 # Check ieee1394: expect 2 lines
-[ `grep -vc '^#' < tests/tmp/modules.ieee1394map` = 2 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.ieee1394map` = 2 ]
 
 #%-20s 0x%08x  0x%06x  0x%06x 0x%06x     0x%06x\n",
 #+		name, fw->match_flags, fw->vendor_id, fw->model_id,
 #+		fw->specifier_id, fw->version);
-[ "`grep ieee1394_map tests/tmp/modules.ieee1394map`" = "ieee1394_map-$BITNESS      0x0000000c  0x000000  0x000000 0x00a02d     0x010001
+[ "`grep ieee1394_map tests/System/TemporaryFiles/modules.ieee1394map`" = "ieee1394_map-$BITNESS      0x0000000c  0x000000  0x000000 0x00a02d     0x010001
 ieee1394_map-$BITNESS      0x0000000c  0x000000  0x000000 0x00a02d     0x000100" ]
 
 # Check pnp: expect 5 lines
-[ `grep -vc '^#' < tests/tmp/modules.isapnpmap` = 5 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.isapnpmap` = 5 ]
 
 #%-20s  0x%04x     0x%04x     0x00000000  0x%04x     0x%04x    ...
 # For normal table:
 # name, 0xffff, 0xffff, 0x00000000, device, vendor
 # For card table:
 # name, vendor, device, driverinfo, device, vendor, [ device, vendor ]
-[ "`grep pnp_map tests/tmp/modules.isapnpmap`" = "pnp_map-$BITNESS           0xffff     0xffff     0x00000000  0x630e     0x0001    
+[ "`grep pnp_map tests/System/TemporaryFiles/modules.isapnpmap`" = "pnp_map-$BITNESS           0xffff     0xffff     0x00000000  0x630e     0x0001    
 pnp_map-$BITNESS           0xffff     0xffff     0x00000000  0x630e     0x0000    
 pnp_map-$BITNESS           0xffff     0xffff     0x00000000  0x2d1d     0x0001    
 pnp_map-$BITNESS           0x9304     0x5071     0x00000000  0x9304     0x5071     0x9304     0x5171    
 pnp_map-$BITNESS           0x9304     0x8171     0x00000000  0x9304     0x8071     0x9304     0x8171    " ]
 
 # Check input: expect 2 lines
-[ `grep -vc '^#' < tests/tmp/modules.inputmap` = 2 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.inputmap` = 2 ]
 
 # module         matchBits bustype vendor product version evBits keyBits relBits absBits mscBits ledBits sndBits ffBits driver_info
-[ "`grep input_map tests/tmp/modules.inputmap`" = "input_map-$BITNESS        0x10  0x0  0x0  0x0  0x0  2  0  0  0  0  0  0  0  0x0
+[ "`grep input_map tests/System/TemporaryFiles/modules.inputmap`" = "input_map-$BITNESS        0x10  0x0  0x0  0x0  0x0  2  0  0  0  0  0  0  0  0x0
 input_map-$BITNESS        0x10  0x0  0x0  0x0  0x0  40000  0  0  0  0  0  0  0  0x0" ]
 
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-mv tests/tmp/modules.pcimap tests/tmp/modules.pcimap.old
-mv tests/tmp/modules.usbmap tests/tmp/modules.usbmap.old
-mv tests/tmp/modules.ccwmap tests/tmp/modules.ccwmap.old
-mv tests/tmp/modules.ieee1394map tests/tmp/modules.ieee1394map.old
-mv tests/tmp/modules.isapnpmap tests/tmp/modules.isapnpmap.old
-mv tests/tmp/modules.inputmap tests/tmp/modules.inputmap.old
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+mv tests/System/TemporaryFiles/modules.pcimap tests/System/TemporaryFiles/modules.pcimap.old
+mv tests/System/TemporaryFiles/modules.usbmap tests/System/TemporaryFiles/modules.usbmap.old
+mv tests/System/TemporaryFiles/modules.ccwmap tests/System/TemporaryFiles/modules.ccwmap.old
+mv tests/System/TemporaryFiles/modules.ieee1394map tests/System/TemporaryFiles/modules.ieee1394map.old
+mv tests/System/TemporaryFiles/modules.isapnpmap tests/System/TemporaryFiles/modules.isapnpmap.old
+mv tests/System/TemporaryFiles/modules.inputmap tests/System/TemporaryFiles/modules.inputmap.old
 
 # Synonyms
 [ "`depmod -a`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-diff -u tests/tmp/modules.pcimap.old tests/tmp/modules.pcimap
-diff -u tests/tmp/modules.usbmap.old tests/tmp/modules.usbmap
-diff -u tests/tmp/modules.ccwmap.old tests/tmp/modules.ccwmap
-diff -u tests/tmp/modules.ieee1394map.old tests/tmp/modules.ieee1394map
-diff -u tests/tmp/modules.isapnpmap.old tests/tmp/modules.isapnpmap
-diff -u tests/tmp/modules.inputmap.old tests/tmp/modules.inputmap
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/modules.pcimap.old tests/System/TemporaryFiles/modules.pcimap
+diff -u tests/System/TemporaryFiles/modules.usbmap.old tests/System/TemporaryFiles/modules.usbmap
+diff -u tests/System/TemporaryFiles/modules.ccwmap.old tests/System/TemporaryFiles/modules.ccwmap
+diff -u tests/System/TemporaryFiles/modules.ieee1394map.old tests/System/TemporaryFiles/modules.ieee1394map
+diff -u tests/System/TemporaryFiles/modules.isapnpmap.old tests/System/TemporaryFiles/modules.isapnpmap
+diff -u tests/System/TemporaryFiles/modules.inputmap.old tests/System/TemporaryFiles/modules.inputmap
 
 [ "`depmod -A`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-diff -u tests/tmp/modules.pcimap.old tests/tmp/modules.pcimap
-diff -u tests/tmp/modules.usbmap.old tests/tmp/modules.usbmap
-diff -u tests/tmp/modules.ccwmap.old tests/tmp/modules.ccwmap
-diff -u tests/tmp/modules.ieee1394map.old tests/tmp/modules.ieee1394map
-diff -u tests/tmp/modules.isapnpmap.old tests/tmp/modules.isapnpmap
-diff -u tests/tmp/modules.inputmap.old tests/tmp/modules.inputmap
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/modules.pcimap.old tests/System/TemporaryFiles/modules.pcimap
+diff -u tests/System/TemporaryFiles/modules.usbmap.old tests/System/TemporaryFiles/modules.usbmap
+diff -u tests/System/TemporaryFiles/modules.ccwmap.old tests/System/TemporaryFiles/modules.ccwmap
+diff -u tests/System/TemporaryFiles/modules.ieee1394map.old tests/System/TemporaryFiles/modules.ieee1394map
+diff -u tests/System/TemporaryFiles/modules.isapnpmap.old tests/System/TemporaryFiles/modules.isapnpmap
+diff -u tests/System/TemporaryFiles/modules.inputmap.old tests/System/TemporaryFiles/modules.inputmap
 
 [ "`depmod -e -A`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-diff -u tests/tmp/modules.pcimap.old tests/tmp/modules.pcimap
-diff -u tests/tmp/modules.usbmap.old tests/tmp/modules.usbmap
-diff -u tests/tmp/modules.ccwmap.old tests/tmp/modules.ccwmap
-diff -u tests/tmp/modules.ieee1394map.old tests/tmp/modules.ieee1394map
-diff -u tests/tmp/modules.isapnpmap.old tests/tmp/modules.isapnpmap
-diff -u tests/tmp/modules.inputmap.old tests/tmp/modules.inputmap
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/modules.pcimap.old tests/System/TemporaryFiles/modules.pcimap
+diff -u tests/System/TemporaryFiles/modules.usbmap.old tests/System/TemporaryFiles/modules.usbmap
+diff -u tests/System/TemporaryFiles/modules.ccwmap.old tests/System/TemporaryFiles/modules.ccwmap
+diff -u tests/System/TemporaryFiles/modules.ieee1394map.old tests/System/TemporaryFiles/modules.ieee1394map
+diff -u tests/System/TemporaryFiles/modules.isapnpmap.old tests/System/TemporaryFiles/modules.isapnpmap
+diff -u tests/System/TemporaryFiles/modules.inputmap.old tests/System/TemporaryFiles/modules.inputmap
 
 [ "`depmod -e -A $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-diff -u tests/tmp/modules.pcimap.old tests/tmp/modules.pcimap
-diff -u tests/tmp/modules.usbmap.old tests/tmp/modules.usbmap
-diff -u tests/tmp/modules.ccwmap.old tests/tmp/modules.ccwmap
-diff -u tests/tmp/modules.ieee1394map.old tests/tmp/modules.ieee1394map
-diff -u tests/tmp/modules.isapnpmap.old tests/tmp/modules.isapnpmap
-diff -u tests/tmp/modules.inputmap.old tests/tmp/modules.inputmap
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/modules.pcimap.old tests/System/TemporaryFiles/modules.pcimap
+diff -u tests/System/TemporaryFiles/modules.usbmap.old tests/System/TemporaryFiles/modules.usbmap
+diff -u tests/System/TemporaryFiles/modules.ccwmap.old tests/System/TemporaryFiles/modules.ccwmap
+diff -u tests/System/TemporaryFiles/modules.ieee1394map.old tests/System/TemporaryFiles/modules.ieee1394map
+diff -u tests/System/TemporaryFiles/modules.isapnpmap.old tests/System/TemporaryFiles/modules.isapnpmap
+diff -u tests/System/TemporaryFiles/modules.inputmap.old tests/System/TemporaryFiles/modules.inputmap
 
 # We expect the same from -n.
-grep -hv '^#' tests/tmp/modules.dep.old tests/tmp/modules.pcimap.old tests/tmp/modules.usbmap.old tests/tmp/modules.ccwmap.old tests/tmp/modules.ieee1394map.old tests/tmp/modules.isapnpmap.old tests/tmp/modules.inputmap.old > tests/tmp/out
+grep -hv '^#' tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.pcimap.old tests/System/TemporaryFiles/modules.usbmap.old tests/System/TemporaryFiles/modules.ccwmap.old tests/System/TemporaryFiles/modules.ieee1394map.old tests/System/TemporaryFiles/modules.isapnpmap.old tests/System/TemporaryFiles/modules.inputmap.old > tests/System/TemporaryFiles/out
 
 # Stdout versions.
-depmod -n | grep -v '^#' > tests/tmp/stdout
-diff -u tests/tmp/out tests/tmp/stdout
+depmod -n | grep -v '^#' > tests/System/TemporaryFiles/stdout
+diff -u tests/System/TemporaryFiles/out tests/System/TemporaryFiles/stdout
 
-depmod -a -n | grep -v '^#' > tests/tmp/modules.dep
-diff -u tests/tmp/out tests/tmp/stdout
+depmod -a -n | grep -v '^#' > tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/out tests/System/TemporaryFiles/stdout
 
-depmod -n -a $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules.dep
-diff -u tests/tmp/out tests/tmp/stdout
+depmod -n -a $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/out tests/System/TemporaryFiles/stdout
 
-depmod -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules.dep
-diff -u tests/tmp/out tests/tmp/stdout
+depmod -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/out tests/System/TemporaryFiles/stdout
 
 done
 done
diff -urN module-init-tools-3.2/tests/test-depmod/05loop.sh module-init-tools-3.2-STEP/tests/test-depmod/05loop.sh
--- module-init-tools-3.2/tests/test-depmod/05loop.sh	2005-03-29 16:55:43.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/05loop.sh	2006-04-27 00:45:47.265375696 +1200
@@ -1,23 +1,23 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Loop detection test.
 
 for ENDIAN in -le -be; do
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS$ENDIAN/loop
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/loop1-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/loop1-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS$ENDIAN/loop/loop1-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/loop2-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/loop2-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS$ENDIAN/loop/loop2-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/loop_dep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/loop_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS$ENDIAN/loop/loop_dep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
@@ -30,100 +30,100 @@
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Outputs
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules.pcimap
+MODTEST_OVERRIDE8=/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.usbmap
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.ccwmap
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules.alias
+MODTEST_OVERRIDE11=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules.symbols
+MODTEST_OVERRIDE12=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules.ieee1394map
+MODTEST_OVERRIDE13=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules.dep.temp
+MODTEST_OVERRIDE14=/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules.pcimap.temp
+MODTEST_OVERRIDE15=/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules.usbmap.temp
+MODTEST_OVERRIDE16=/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules.alias.temp
+MODTEST_OVERRIDE18=/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules.symbols.temp
+MODTEST_OVERRIDE19=/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules.isapnpmap
+MODTEST_OVERRIDE22=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules.inputmap.temp
+MODTEST_OVERRIDE23=/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules.inputmap
+MODTEST_OVERRIDE24=/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
-MODTEST_OVERRIDE25=/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH25=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE25=/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
-MODTEST_OVERRIDE26=/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE26=/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
 # Expect no normal output.
-[ "`depmod 2>tests/tmp/stderr`" = "" ]
+[ "`depmod 2>tests/System/TemporaryFiles/stderr`" = "" ]
 
 # Check results: expect 0 lines (all have loops).
-[ `grep -vc '^#' < tests/tmp/modules.dep` = 0 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.dep` = 0 ]
 
 # Now, we should have only one error report, for loop1, and 3
 # warnings.
-[ `grep -vc '^#' < tests/tmp/stderr` = 4 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/stderr` = 4 ]
 
-[ "`grep -w /lib/modules/$MODTEST_UNAME/loop1-$BITNESS.ko\ ignored tests/tmp/stderr`" = "WARNING: Module /lib/modules/$MODTEST_UNAME/loop1-$BITNESS.ko ignored, due to loop" ]
-[ "`grep -w /lib/modules/$MODTEST_UNAME/loop2-$BITNESS.ko tests/tmp/stderr`" = "WARNING: Module /lib/modules/$MODTEST_UNAME/loop2-$BITNESS.ko ignored, due to loop" ]
-[ "`grep -w /lib/modules/$MODTEST_UNAME/loop_dep-$BITNESS.ko tests/tmp/stderr`" = "WARNING: Module /lib/modules/$MODTEST_UNAME/loop_dep-$BITNESS.ko ignored, due to loop" ]
-[ "`grep -w detected tests/tmp/stderr`" = "WARNING: Loop detected: /lib/modules/$MODTEST_UNAME/loop1-$BITNESS.ko needs loop2-$BITNESS.ko which needs loop1-$BITNESS.ko again!" ]
+[ "`grep -w /System/Drivers/$MODTEST_UNAME/loop1-$BITNESS.ko\ ignored tests/System/TemporaryFiles/stderr`" = "WARNING: Module /System/Drivers/$MODTEST_UNAME/loop1-$BITNESS.ko ignored, due to loop" ]
+[ "`grep -w /System/Drivers/$MODTEST_UNAME/loop2-$BITNESS.ko tests/System/TemporaryFiles/stderr`" = "WARNING: Module /System/Drivers/$MODTEST_UNAME/loop2-$BITNESS.ko ignored, due to loop" ]
+[ "`grep -w /System/Drivers/$MODTEST_UNAME/loop_dep-$BITNESS.ko tests/System/TemporaryFiles/stderr`" = "WARNING: Module /System/Drivers/$MODTEST_UNAME/loop_dep-$BITNESS.ko ignored, due to loop" ]
+[ "`grep -w detected tests/System/TemporaryFiles/stderr`" = "WARNING: Loop detected: /System/Drivers/$MODTEST_UNAME/loop1-$BITNESS.ko needs loop2-$BITNESS.ko which needs loop1-$BITNESS.ko again!" ]
 
 done
 done
diff -urN module-init-tools-3.2/tests/test-depmod/06undefined.sh module-init-tools-3.2-STEP/tests/test-depmod/06undefined.sh
--- module-init-tools-3.2/tests/test-depmod/06undefined.sh	2005-03-29 16:59:32.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/06undefined.sh	2006-04-27 00:45:47.267375392 +1200
@@ -1,15 +1,15 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Check for undefined symbols.
 
 for ENDIAN in -le -be; do
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS$ENDIAN/unknown
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/unknown-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/unknown-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS$ENDIAN/unknown/unknown-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
@@ -30,93 +30,93 @@
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Outputs
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules.pcimap
+MODTEST_OVERRIDE8=/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.usbmap
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.ccwmap
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules.alias
+MODTEST_OVERRIDE11=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules.symbols
+MODTEST_OVERRIDE12=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules.ieee1394map
+MODTEST_OVERRIDE13=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules.dep.temp
+MODTEST_OVERRIDE14=/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules.pcimap.temp
+MODTEST_OVERRIDE15=/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules.usbmap.temp
+MODTEST_OVERRIDE16=/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules.alias.temp
+MODTEST_OVERRIDE18=/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules.symbols.temp
+MODTEST_OVERRIDE19=/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules.isapnpmap
+MODTEST_OVERRIDE22=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules.inputmap.temp
+MODTEST_OVERRIDE23=/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules.inputmap
+MODTEST_OVERRIDE24=/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
-MODTEST_OVERRIDE25=/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH25=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE25=/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
-MODTEST_OVERRIDE26=/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE26=/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
 # Without -e, doesn't matter.
-[ "`depmod -F /dev/null 2>&1`" = "" ]
+[ "`depmod -F /System/Devices/null 2>&1`" = "" ]
 
 # Without -F doesn't matter
 [ "`depmod -e 2>&1`" = "" ]
 
-[ "`depmod -e -F /dev/null 2>&1`" = "WARNING: /lib/modules/$MODTEST_UNAME/unknown-$BITNESS.ko needs unknown symbol undefined" ]
+[ "`depmod -e -F /System/Devices/null 2>&1`" = "WARNING: /System/Drivers/$MODTEST_UNAME/unknown-$BITNESS.ko needs unknown symbol undefined" ]
 
 done
 done
diff -urN module-init-tools-3.2/tests/test-depmod/07complex.sh module-init-tools-3.2-STEP/tests/test-depmod/07complex.sh
--- module-init-tools-3.2/tests/test-depmod/07complex.sh	2005-03-29 16:59:32.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/07complex.sh	2006-04-27 00:45:47.270374936 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Complex tests of generation of 32-bit and 64-bit modules.dep
 # Direct dependencies:
 #   A: B C D
@@ -11,167 +11,167 @@
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS$ENDIAN/complex
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/complex_a-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/complex_a-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS$ENDIAN/complex/complex_a-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/complex_b-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/complex_b-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS$ENDIAN/complex/complex_b-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/complex_c-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/complex_c-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS$ENDIAN/complex/complex_c-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/complex_d-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/complex_d-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS$ENDIAN/complex/complex_d-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/complex_e-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/complex_e-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS$ENDIAN/complex/complex_e-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Outputs
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules.pcimap
+MODTEST_OVERRIDE8=/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.usbmap
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.ccwmap
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules.alias
+MODTEST_OVERRIDE11=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules.symbols
+MODTEST_OVERRIDE12=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules.ieee1394map
+MODTEST_OVERRIDE13=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules.dep.temp
+MODTEST_OVERRIDE14=/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules.pcimap.temp
+MODTEST_OVERRIDE15=/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules.usbmap.temp
+MODTEST_OVERRIDE16=/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules.alias.temp
+MODTEST_OVERRIDE18=/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules.symbols.temp
+MODTEST_OVERRIDE19=/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules.isapnpmap
+MODTEST_OVERRIDE22=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules.inputmap.temp
+MODTEST_OVERRIDE23=/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules.inputmap
+MODTEST_OVERRIDE24=/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
-MODTEST_OVERRIDE25=/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH25=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE25=/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
-MODTEST_OVERRIDE26=/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE26=/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
 # Expect no output.
 [ "`depmod 2>&1`" = "" ]
 
 # Check results: expect 5 lines
-[ `grep -vc '^#' < tests/tmp/modules.dep` = 5 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.dep` = 5 ]
 
 # Could be a: c d b e or A: d c b e.
-[ "`grep -w complex_a-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/complex_a-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/complex_c-$BITNESS.ko /lib/modules/$MODTEST_UNAME/complex_d-$BITNESS.ko /lib/modules/$MODTEST_UNAME/complex_b-$BITNESS.ko /lib/modules/$MODTEST_UNAME/complex_e-$BITNESS.ko" ] || [ "`grep -w complex_a-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/complex_a-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/complex_d-$BITNESS.ko /lib/modules/$MODTEST_UNAME/complex_c-$BITNESS.ko /lib/modules/$MODTEST_UNAME/complex_b-$BITNESS.ko /lib/modules/$MODTEST_UNAME/complex_e-$BITNESS.ko" ]
+[ "`grep -w complex_a-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/complex_a-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/complex_c-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/complex_d-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/complex_b-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/complex_e-$BITNESS.ko" ] || [ "`grep -w complex_a-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/complex_a-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/complex_d-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/complex_c-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/complex_b-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/complex_e-$BITNESS.ko" ]
 
-[ "`grep -w complex_b-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/complex_b-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/complex_e-$BITNESS.ko" ]
+[ "`grep -w complex_b-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/complex_b-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/complex_e-$BITNESS.ko" ]
 
-[ "`grep -w complex_c-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/complex_c-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/complex_b-$BITNESS.ko /lib/modules/$MODTEST_UNAME/complex_e-$BITNESS.ko" ]
+[ "`grep -w complex_c-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/complex_c-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/complex_b-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/complex_e-$BITNESS.ko" ]
 
-[ "`grep -w complex_d-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/complex_d-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/complex_b-$BITNESS.ko /lib/modules/$MODTEST_UNAME/complex_e-$BITNESS.ko" ]
+[ "`grep -w complex_d-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/complex_d-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/complex_b-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/complex_e-$BITNESS.ko" ]
 
-[ "`grep -w complex_e-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/complex_e-$BITNESS.ko:" ]
+[ "`grep -w complex_e-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/complex_e-$BITNESS.ko:" ]
 
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 # Synonyms
 [ "`depmod -a`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
 
 [ "`depmod -A`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
 
 [ "`depmod -e -A`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
 
 [ "`depmod -e -A $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
 
 # Combined should form stdout versions.
-grep -vh '^#' tests/tmp/modules.dep.old tests/tmp/modules.symbols.old > tests/tmp/modules.all.old
+grep -vh '^#' tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.symbols.old > tests/System/TemporaryFiles/modules.all.old
 
 # Stdout versions.
-depmod -n | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -a -n | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -n -a $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all
-mv tests/tmp/modules.all tests/tmp/modules.all.old
+depmod -n | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -a -n | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -n -a $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
 
 done
 done
diff -urN module-init-tools-3.2/tests/test-depmod/08basedir.sh module-init-tools-3.2-STEP/tests/test-depmod/08basedir.sh
--- module-init-tools-3.2/tests/test-depmod/08basedir.sh	2005-03-29 22:00:04.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/08basedir.sh	2006-04-27 00:45:47.273374480 +1200
@@ -1,173 +1,173 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Simple tests of generation of 32-bit and 64-bit modules.dep with basedir
 
 for ENDIAN in -le -be; do
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/BASEDIR/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/BASEDIR/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS$ENDIAN/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/BASEDIR/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/BASEDIR/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS$ENDIAN/normal/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/BASEDIR/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/BASEDIR/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS$ENDIAN/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/BASEDIR/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/BASEDIR/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS$ENDIAN/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/BASEDIR/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/BASEDIR/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS$ENDIAN/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/BASEDIR/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/BASEDIR/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Outputs
-MODTEST_OVERRIDE7=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules.pcimap
+MODTEST_OVERRIDE8=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.usbmap
+MODTEST_OVERRIDE9=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.ccwmap
+MODTEST_OVERRIDE10=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules.alias
+MODTEST_OVERRIDE11=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules.symbols
+MODTEST_OVERRIDE12=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules.ieee1394map
+MODTEST_OVERRIDE13=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules.dep.temp
+MODTEST_OVERRIDE14=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules.pcimap.temp
+MODTEST_OVERRIDE15=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules.usbmap.temp
+MODTEST_OVERRIDE16=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules.alias.temp
+MODTEST_OVERRIDE18=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules.symbols.temp
+MODTEST_OVERRIDE19=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules.isapnpmap
+MODTEST_OVERRIDE22=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules.inputmap.temp
+MODTEST_OVERRIDE23=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules.inputmap
+MODTEST_OVERRIDE24=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
-MODTEST_OVERRIDE25=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH25=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE25=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
-MODTEST_OVERRIDE26=/BASEDIR/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE26=/BASEDIR/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
 # Expect no output.
 [ "`depmod -b /BASEDIR 2>&1`" = "" ]
 
 # Check results: expect 5 lines
-[ `grep -vc '^#' < tests/tmp/modules.dep` = 5 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.dep` = 5 ]
 
-[ "`grep -w export_dep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
-[ "`grep -w noexport_dep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
-[ "`grep -w export_nodep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko:" ]
-[ "`grep -w noexport_nodep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" ]
-[ "`grep -w noexport_doubledep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
+[ "`grep -w export_dep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
+[ "`grep -w noexport_dep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
+[ "`grep -w export_nodep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko:" ]
+[ "`grep -w noexport_nodep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" ]
+[ "`grep -w noexport_doubledep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
 
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
 
 # Synonyms
 [ "`depmod -b /BASEDIR  -a`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
 
 [ "`depmod -b /BASEDIR -A`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
 
 [ "`depmod -b /BASEDIR -e -A`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
 
 [ "`depmod -b /BASEDIR -e -A $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
 
 [ "`depmod --basedir /BASEDIR -e -A $MODTEST_VERSION 2>&1`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
 
 [ "`depmod --basedir=/BASEDIR -e -A $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
 
 # Combined should form stdout versions.
-grep -vh '^#' tests/tmp/modules.dep.old tests/tmp/modules.symbols > tests/tmp/modules.all.old
+grep -vh '^#' tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.symbols > tests/System/TemporaryFiles/modules.all.old
 
 # Stdout versions.
-depmod -b /BASEDIR -n | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -b /BASEDIR -a -n | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -b /BASEDIR -n -a $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -b /BASEDIR -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all
-mv tests/tmp/modules.all tests/tmp/modules.all.old
+depmod -b /BASEDIR -n | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -b /BASEDIR -a -n | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -b /BASEDIR -n -a $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -b /BASEDIR -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
 
 done
 done
diff -urN module-init-tools-3.2/tests/test-depmod/09alias.sh module-init-tools-3.2-STEP/tests/test-depmod/09alias.sh
--- module-init-tools-3.2/tests/test-depmod/09alias.sh	2005-03-29 16:59:32.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/09alias.sh	2006-04-27 00:45:47.275374176 +1200
@@ -1,15 +1,15 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 # Test alias generation.
 for ENDIAN in -le -be; do
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS$ENDIAN/alias
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/alias-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/alias-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS$ENDIAN/alias/alias-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
@@ -30,102 +30,102 @@
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Outputs
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules.pcimap
+MODTEST_OVERRIDE8=/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.usbmap
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.ccwmap
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules.alias
+MODTEST_OVERRIDE11=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules.symbols
+MODTEST_OVERRIDE12=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules.ieee1394map
+MODTEST_OVERRIDE13=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules.dep.temp
+MODTEST_OVERRIDE14=/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules.pcimap.temp
+MODTEST_OVERRIDE15=/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules.usbmap.temp
+MODTEST_OVERRIDE16=/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules.alias.temp
+MODTEST_OVERRIDE18=/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules.symbols.temp
+MODTEST_OVERRIDE19=/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules.isapnpmap
+MODTEST_OVERRIDE22=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules.inputmap.temp
+MODTEST_OVERRIDE23=/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules.inputmap
+MODTEST_OVERRIDE24=/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
-MODTEST_OVERRIDE25=/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH25=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE25=/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
-MODTEST_OVERRIDE26=/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE26=/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
 # Expect no normal output.
 [ "`depmod 2>&1`" = "" ]
 
 # Check results: expect 2 lines.
-[ `grep -vc '^#' < tests/tmp/modules.alias` = 2 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.alias` = 2 ]
 
-[ "`grep alias1 < tests/tmp/modules.alias`" = "alias alias1 alias_$BITNESS" ]
-[ "`grep alias2 < tests/tmp/modules.alias`" = "alias alias2 alias_$BITNESS" ]
+[ "`grep alias1 < tests/System/TemporaryFiles/modules.alias`" = "alias alias1 alias_$BITNESS" ]
+[ "`grep alias2 < tests/System/TemporaryFiles/modules.alias`" = "alias alias2 alias_$BITNESS" ]
 
 # Version with stuff in .modinfo section.
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS$ENDIAN/modinfo
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/modinfo-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/modinfo-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS$ENDIAN/modinfo/modinfo-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
@@ -133,10 +133,10 @@
 [ "`depmod 2>&1`" = "" ]
 
 # Check results: expect 2 lines.
-[ `grep -vc '^#' < tests/tmp/modules.alias` = 2 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.alias` = 2 ]
 
-[ "`grep ALIAS1 < tests/tmp/modules.alias`" = "alias ALIAS1 modinfo_$BITNESS" ]
-[ "`grep ALIAS2 < tests/tmp/modules.alias`" = "alias ALIAS2 modinfo_$BITNESS" ]
+[ "`grep ALIAS1 < tests/System/TemporaryFiles/modules.alias`" = "alias ALIAS1 modinfo_$BITNESS" ]
+[ "`grep ALIAS2 < tests/System/TemporaryFiles/modules.alias`" = "alias ALIAS2 modinfo_$BITNESS" ]
 
 done
 done
diff -urN module-init-tools-3.2/tests/test-depmod/10badcommand.sh module-init-tools-3.2-STEP/tests/test-depmod/10badcommand.sh
--- module-init-tools-3.2/tests/test-depmod/10badcommand.sh	2005-01-18 18:38:08.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-depmod/10badcommand.sh	2006-04-27 00:45:47.276374024 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 # Test bad option handling.
 for ENDIAN in -le -be; do
diff -urN module-init-tools-3.2/tests/test-depmod/11quick.sh module-init-tools-3.2-STEP/tests/test-depmod/11quick.sh
--- module-init-tools-3.2/tests/test-depmod/11quick.sh	2005-03-29 16:57:39.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/11quick.sh	2006-04-27 00:45:47.279373568 +1200
@@ -1,122 +1,122 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Check that -A works correctly.
 
 for ENDIAN in -le -be; do
 for BITNESS in 32 64; do
 
 # Copy modules across so we can play with them.
-rm -rf tests/tmp/*
-cp -a tests/data tests/tmp/
+rm -rf tests/System/TemporaryFiles/*
+cp -a tests/data tests/System/TemporaryFiles/
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
-MODTEST_OVERRIDE_WITH1=tests/tmp/data/$BITNESS$ENDIAN/normal
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH2=tests/tmp/data/$BITNESS$ENDIAN/normal/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH3=tests/tmp/data/$BITNESS$ENDIAN/normal/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH4=tests/tmp/data/$BITNESS$ENDIAN/normal/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH5=tests/tmp/data/$BITNESS$ENDIAN/normal/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH5=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH6=tests/tmp/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH6=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Outputs
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules.pcimap
+MODTEST_OVERRIDE8=/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.usbmap
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.ccwmap
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules.alias
+MODTEST_OVERRIDE11=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules.symbols
+MODTEST_OVERRIDE12=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules.ieee1394map
+MODTEST_OVERRIDE13=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules.dep.temp
+MODTEST_OVERRIDE14=/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules.pcimap.temp
+MODTEST_OVERRIDE15=/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules.usbmap.temp
+MODTEST_OVERRIDE16=/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules.alias.temp
+MODTEST_OVERRIDE18=/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules.symbols.temp
+MODTEST_OVERRIDE19=/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules.isapnpmap
+MODTEST_OVERRIDE22=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules.inputmap.temp
+MODTEST_OVERRIDE23=/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules.inputmap
+MODTEST_OVERRIDE24=/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
-MODTEST_OVERRIDE25=/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH25=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE25=/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
-MODTEST_OVERRIDE26=/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE26=/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
 # Temporary file.
-MODTEST_OVERRIDE27=/lib/modules/$MODTEST_UNAME/README
-MODTEST_OVERRIDE_WITH27=tests/tmp/data/$BITNESS$ENDIAN/normal/README
+MODTEST_OVERRIDE27=/System/Drivers/$MODTEST_UNAME/README
+MODTEST_OVERRIDE_WITH27=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/README
 export MODTEST_OVERRIDE27 MODTEST_OVERRIDE_WITH27
 
 # First time, there is no modules.dep, so it will be generated.
@@ -124,58 +124,58 @@
 [ "`depmod -A 2>&1`" = "" ]
 
 # Check modules.dep results: expect 5 lines
-[ `grep -vc '^#' < tests/tmp/modules.dep` = 5 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.dep` = 5 ]
 
-[ "`grep -w export_dep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
-[ "`grep -w noexport_dep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
-[ "`grep -w export_nodep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko:" ]
-[ "`grep -w noexport_nodep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" ]
-[ "`grep -w noexport_doubledep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
+[ "`grep -w export_dep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
+[ "`grep -w noexport_dep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
+[ "`grep -w export_nodep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko:" ]
+[ "`grep -w noexport_nodep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" ]
+[ "`grep -w noexport_doubledep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
 
 # Check modules.symbols results: expect 3 lines
-[ `grep -vc '^#' < tests/tmp/modules.symbols` = 3 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.symbols` = 3 ]
 
-[ "`grep -w symbol:exported1 tests/tmp/modules.symbols`" = "alias symbol:exported1 export_nodep_$BITNESS" ]
-[ "`grep -w symbol:exported2 tests/tmp/modules.symbols`" = "alias symbol:exported2 export_nodep_$BITNESS" ]
-[ "`grep -w symbol:exported3 tests/tmp/modules.symbols`" = "alias symbol:exported3 export_dep_$BITNESS" ]
+[ "`grep -w symbol:exported1 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported1 export_nodep_$BITNESS" ]
+[ "`grep -w symbol:exported2 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported2 export_nodep_$BITNESS" ]
+[ "`grep -w symbol:exported3 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported3 export_dep_$BITNESS" ]
 
-cp tests/tmp/modules.dep tests/tmp/modules.dep.old
-cp tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+cp tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+cp tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 # Now, second run should do nothing.
-cp /dev/null tests/tmp/modules.dep
-cp /dev/null tests/tmp/modules.symbols
+cp /System/Devices/null tests/System/TemporaryFiles/modules.dep
+cp /System/Devices/null tests/System/TemporaryFiles/modules.symbols
 [ "`depmod -A 2>&1`" = "" ]
-diff -u /dev/null tests/tmp/modules.dep
-diff -u /dev/null tests/tmp/modules.symbols
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.dep
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.symbols
 
 # Touch a directory, nothing.
 sleep 1
-touch tests/tmp/data/$BITNESS$ENDIAN/normal
+touch tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal
 
 [ "`depmod -A 2>&1`" = "" ]
-diff -u /dev/null tests/tmp/modules.dep
-diff -u /dev/null tests/tmp/modules.symbols
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.dep
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.symbols
 
 # Touch a non-module, nothing.
-echo "Test" > tests/tmp/data/$BITNESS$ENDIAN/normal/README
+echo "Test" > tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/README
 [ "`depmod -A 2>&1`" = "" ]
-diff -u /dev/null tests/tmp/modules.dep
-diff -u /dev/null tests/tmp/modules.symbols
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.dep
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.symbols
 
 # Touch a module, wham.
-touch tests/tmp/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko
+touch tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko
 [ "`depmod -A 2>&1`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols
 
 # Deleting a module does nothing.
-cp /dev/null tests/tmp/modules.dep
-cp /dev/null tests/tmp/modules.symbols
-rm tests/tmp/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko
+cp /System/Devices/null tests/System/TemporaryFiles/modules.dep
+cp /System/Devices/null tests/System/TemporaryFiles/modules.symbols
+rm tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko
 [ "`depmod -A 2>&1`" = "" ]
-diff -u /dev/null tests/tmp/modules.dep
-diff -u /dev/null tests/tmp/modules.symbols
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.dep
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.symbols
 
 done
 done
diff -urN module-init-tools-3.2/tests/test-depmod/12compressed.sh module-init-tools-3.2-STEP/tests/test-depmod/12compressed.sh
--- module-init-tools-3.2/tests/test-depmod/12compressed.sh	2005-03-29 16:59:32.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/12compressed.sh	2006-04-27 00:45:47.282373112 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Check that compressed modules work correctly.
 
 [ -n "$CONFIG_HAVE_ZLIB" ] || exit 0
@@ -7,119 +7,119 @@
 for BITNESS in 32 64; do
 
 # Copy modules across so we can play with them.
-rm -rf tests/tmp/*
-cp -a tests/data tests/tmp/
-gzip `find tests/tmp/ -name '*.ko'`
+rm -rf tests/System/TemporaryFiles/*
+cp -a tests/data tests/System/TemporaryFiles/
+gzip `find tests/System/TemporaryFiles/ -name '*.ko'`
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
-MODTEST_OVERRIDE_WITH1=tests/tmp/data/$BITNESS$ENDIAN/normal
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH2=tests/tmp/data/$BITNESS$ENDIAN/normal/export_dep-$BITNESS.ko.gz
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/export_dep-$BITNESS.ko.gz
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH3=tests/tmp/data/$BITNESS$ENDIAN/normal/noexport_dep-$BITNESS.ko.gz
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/noexport_dep-$BITNESS.ko.gz
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH4=tests/tmp/data/$BITNESS$ENDIAN/normal/noexport_nodep-$BITNESS.ko.gz
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/noexport_nodep-$BITNESS.ko.gz
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH5=tests/tmp/data/$BITNESS$ENDIAN/normal/export_nodep-$BITNESS.ko.gz
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH5=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/export_nodep-$BITNESS.ko.gz
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH6=tests/tmp/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko.gz
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH6=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko.gz
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Outputs
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules.pcimap
+MODTEST_OVERRIDE8=/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.usbmap
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.ccwmap
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules.alias
+MODTEST_OVERRIDE11=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules.symbols
+MODTEST_OVERRIDE12=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules.ieee1394map
+MODTEST_OVERRIDE13=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules.dep.temp
+MODTEST_OVERRIDE14=/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules.pcimap.temp
+MODTEST_OVERRIDE15=/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules.usbmap.temp
+MODTEST_OVERRIDE16=/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules.alias.temp
+MODTEST_OVERRIDE18=/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules.symbols.temp
+MODTEST_OVERRIDE19=/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules.isapnpmap
+MODTEST_OVERRIDE22=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules.inputmap.temp
+MODTEST_OVERRIDE23=/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules.inputmap
+MODTEST_OVERRIDE24=/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
-MODTEST_OVERRIDE25=/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH25=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE25=/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
-MODTEST_OVERRIDE26=/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE26=/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
 # Temporary file.
-MODTEST_OVERRIDE27=/lib/modules/$MODTEST_UNAME/README
-MODTEST_OVERRIDE_WITH27=tests/tmp/data/$BITNESS$ENDIAN/normal/README
+MODTEST_OVERRIDE27=/System/Drivers/$MODTEST_UNAME/README
+MODTEST_OVERRIDE_WITH27=tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/README
 export MODTEST_OVERRIDE27 MODTEST_OVERRIDE_WITH27
 
 # First time, there is no modules.dep, so it will be generated.
@@ -127,58 +127,58 @@
 [ "`depmod -A 2>&1`" = "" ]
 
 # Check modules.dep results: expect 5 lines
-[ `grep -vc '^#' < tests/tmp/modules.dep` = 5 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.dep` = 5 ]
 
-[ "`grep -w export_dep-$BITNESS.ko.gz: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko.gz: /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko.gz" ]
-[ "`grep -w noexport_dep-$BITNESS.ko.gz: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko.gz: /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko.gz" ]
-[ "`grep -w export_nodep-$BITNESS.ko.gz: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko.gz:" ]
-[ "`grep -w noexport_nodep-$BITNESS.ko.gz: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko.gz:" ]
-[ "`grep -w noexport_doubledep-$BITNESS.ko.gz: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko.gz: /lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko.gz /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko.gz" ]
+[ "`grep -w export_dep-$BITNESS.ko.gz: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko.gz: /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko.gz" ]
+[ "`grep -w noexport_dep-$BITNESS.ko.gz: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko.gz: /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko.gz" ]
+[ "`grep -w export_nodep-$BITNESS.ko.gz: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko.gz:" ]
+[ "`grep -w noexport_nodep-$BITNESS.ko.gz: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko.gz:" ]
+[ "`grep -w noexport_doubledep-$BITNESS.ko.gz: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko.gz: /System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko.gz /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko.gz" ]
 
 # Check modules.symbols results: expect 3 lines
-[ `grep -vc '^#' < tests/tmp/modules.symbols` = 3 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.symbols` = 3 ]
 
-[ "`grep -w symbol:exported1 tests/tmp/modules.symbols`" = "alias symbol:exported1 export_nodep_$BITNESS" ]
-[ "`grep -w symbol:exported2 tests/tmp/modules.symbols`" = "alias symbol:exported2 export_nodep_$BITNESS" ]
-[ "`grep -w symbol:exported3 tests/tmp/modules.symbols`" = "alias symbol:exported3 export_dep_$BITNESS" ]
+[ "`grep -w symbol:exported1 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported1 export_nodep_$BITNESS" ]
+[ "`grep -w symbol:exported2 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported2 export_nodep_$BITNESS" ]
+[ "`grep -w symbol:exported3 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported3 export_dep_$BITNESS" ]
 
-cp tests/tmp/modules.dep tests/tmp/modules.dep.old
-cp tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+cp tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+cp tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 # Now, second run should do nothing.
-cp /dev/null tests/tmp/modules.dep
-cp /dev/null tests/tmp/modules.symbols
+cp /System/Devices/null tests/System/TemporaryFiles/modules.dep
+cp /System/Devices/null tests/System/TemporaryFiles/modules.symbols
 [ "`depmod -A 2>&1`" = "" ]
-diff -u /dev/null tests/tmp/modules.dep
-diff -u /dev/null tests/tmp/modules.symbols
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.dep
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.symbols
 
 # Touch a directory, nothing.
 sleep 1
-touch tests/tmp/data/$BITNESS$ENDIAN/normal
+touch tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal
 
 [ "`depmod -A 2>&1`" = "" ]
-diff -u /dev/null tests/tmp/modules.dep
-diff -u /dev/null tests/tmp/modules.symbols
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.dep
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.symbols
 
 # Touch a non-module, nothing.
-echo "Test" > tests/tmp/data/$BITNESS$ENDIAN/normal/README
+echo "Test" > tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/README
 [ "`depmod -A 2>&1`" = "" ]
-diff -u /dev/null tests/tmp/modules.dep
-diff -u /dev/null tests/tmp/modules.symbols
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.dep
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.symbols
 
 # Touch a module, wham.
-touch tests/tmp/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko.gz
+touch tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko.gz
 [ "`depmod -A 2>&1`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols
 
 # Deleting a module does nothing.
-cp /dev/null tests/tmp/modules.dep
-cp /dev/null tests/tmp/modules.symbols
-rm tests/tmp/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko.gz
+cp /System/Devices/null tests/System/TemporaryFiles/modules.dep
+cp /System/Devices/null tests/System/TemporaryFiles/modules.symbols
+rm tests/System/TemporaryFiles/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko.gz
 [ "`depmod -A 2>&1`" = "" ]
-diff -u /dev/null tests/tmp/modules.dep
-diff -u /dev/null tests/tmp/modules.symbols
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.dep
+diff -u /System/Devices/null tests/System/TemporaryFiles/modules.symbols
 
 done
 done
diff -urN module-init-tools-3.2/tests/test-depmod/13compressed-maps.sh module-init-tools-3.2-STEP/tests/test-depmod/13compressed-maps.sh
--- module-init-tools-3.2/tests/test-depmod/13compressed-maps.sh	2005-03-29 23:00:03.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/13compressed-maps.sh	2006-04-27 00:45:53.366448192 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test of generation of 32-bit and 64-bit maps, gzipped modules.
 
 [ -n "$CONFIG_HAVE_ZLIB" ] || exit 0
@@ -6,220 +6,220 @@
 for ENDIAN in -le -be; do
 for BITNESS in 32 64; do
 
-rm -rf tests/tmp/data
-mkdir tests/tmp/data
+rm -rf tests/System/TemporaryFiles/data
+mkdir tests/System/TemporaryFiles/data
 for f in tests/data/$BITNESS$ENDIAN/map/*.ko; do
-    gzip < $f > tests/tmp/data/`basename $f .ko`.ko.gz
+    gzip < $f > tests/System/TemporaryFiles/data/`basename $f .ko`.ko.gz
 done
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
-MODTEST_OVERRIDE_WITH1=tests/tmp/data
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/data
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/ccw_map-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH2=tests/tmp/data/ccw_map-$BITNESS.ko.gz
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/ccw_map-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/data/ccw_map-$BITNESS.ko.gz
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/pci_map-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH3=tests/tmp/data/pci_map-$BITNESS.ko.gz
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/pci_map-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/data/pci_map-$BITNESS.ko.gz
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/usb_map-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH4=tests/tmp/data/usb_map-$BITNESS.ko.gz
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/usb_map-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/data/usb_map-$BITNESS.ko.gz
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/ieee1394_map-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH5=tests/tmp/data/ieee1394_map-$BITNESS.ko.gz
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/ieee1394_map-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH5=tests/System/TemporaryFiles/data/ieee1394_map-$BITNESS.ko.gz
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/pnp_map-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH6=tests/tmp/data/pnp_map-$BITNESS.ko.gz
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/pnp_map-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH6=tests/System/TemporaryFiles/data/pnp_map-$BITNESS.ko.gz
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
-MODTEST_OVERRIDE25=/lib/modules/$MODTEST_UNAME/input_map-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH25=tests/tmp/data/input_map-$BITNESS.ko.gz
+MODTEST_OVERRIDE25=/System/Drivers/$MODTEST_UNAME/input_map-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/data/input_map-$BITNESS.ko.gz
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
 # Outputs
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules.pcimap
+MODTEST_OVERRIDE8=/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.usbmap
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.ccwmap
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules.alias
+MODTEST_OVERRIDE11=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules.symbols
+MODTEST_OVERRIDE12=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules.ieee1394map
+MODTEST_OVERRIDE13=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules.dep.temp
+MODTEST_OVERRIDE14=/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules.pcimap.temp
+MODTEST_OVERRIDE15=/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules.usbmap.temp
+MODTEST_OVERRIDE16=/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules.alias.temp
+MODTEST_OVERRIDE18=/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules.symbols.temp
+MODTEST_OVERRIDE19=/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules.isapnpmap
+MODTEST_OVERRIDE22=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules.inputmap.temp
+MODTEST_OVERRIDE23=/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules.inputmap
+MODTEST_OVERRIDE24=/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
 # FIXME: Test
-MODTEST_OVERRIDE26=/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE26=/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
-MODTEST_OVERRIDE27=/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH27=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE27=/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH27=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE27 MODTEST_OVERRIDE_WITH27
 
 # Expect no output.
 [ "`depmod`" = "" ]
 
 # Check PCI: expect 2 lines
-[ `grep -vc '^#' < tests/tmp/modules.pcimap` = 2 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.pcimap` = 2 ]
 
-[ "`grep pci_map tests/tmp/modules.pcimap`" = "pci_map-$BITNESS           0x00000001 0x00000002 0x00000003 0x00000004 0x00000005 0x00000006 0x0
+[ "`grep pci_map tests/System/TemporaryFiles/modules.pcimap`" = "pci_map-$BITNESS           0x00000001 0x00000002 0x00000003 0x00000004 0x00000005 0x00000006 0x0
 pci_map-$BITNESS           0x0000000b 0x0000000c 0x0000000d 0x0000000e 0x0000000f 0x00000010 0x0" ]
 
 # Check USB: expect 2 lines
-[ `grep -vc '^#' < tests/tmp/modules.usbmap` = 2 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.usbmap` = 2 ]
 
-[ "`grep usb_map tests/tmp/modules.usbmap`" = "usb_map-$BITNESS           0x0001      0x0002   0x0003    0x0004       0x0005       0x06         0x07            0x08            0x09            0x0a               0x0b               0x0
+[ "`grep usb_map tests/System/TemporaryFiles/modules.usbmap`" = "usb_map-$BITNESS           0x0001      0x0002   0x0003    0x0004       0x0005       0x06         0x07            0x08            0x09            0x0a               0x0b               0x0
 usb_map-$BITNESS           0x000b      0x000c   0x000d    0x000e       0x000f       0x10         0x11            0x12            0x13            0x14               0x15               0x0" ]
 
 # Check CCW: expect 2 lines
-[ `grep -vc '^#' < tests/tmp/modules.ccwmap` = 2 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.ccwmap` = 2 ]
 
-[ "`grep ccw_map tests/tmp/modules.ccwmap`" = "ccw_map-$BITNESS           0x000f      0x0001  0x03      0x0002  0x04
+[ "`grep ccw_map tests/System/TemporaryFiles/modules.ccwmap`" = "ccw_map-$BITNESS           0x000f      0x0001  0x03      0x0002  0x04
 ccw_map-$BITNESS           0x000f      0x000b  0x0d      0x000c  0x0e" ]
 
 # Check ieee1394: expect 2 lines
-[ `grep -vc '^#' < tests/tmp/modules.ieee1394map` = 2 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.ieee1394map` = 2 ]
 
 #%-20s 0x%08x  0x%06x  0x%06x 0x%06x     0x%06x\n",
 #+		name, fw->match_flags, fw->vendor_id, fw->model_id,
 #+		fw->specifier_id, fw->version);
-[ "`grep ieee1394_map tests/tmp/modules.ieee1394map`" = "ieee1394_map-$BITNESS      0x0000000c  0x000000  0x000000 0x00a02d     0x010001
+[ "`grep ieee1394_map tests/System/TemporaryFiles/modules.ieee1394map`" = "ieee1394_map-$BITNESS      0x0000000c  0x000000  0x000000 0x00a02d     0x010001
 ieee1394_map-$BITNESS      0x0000000c  0x000000  0x000000 0x00a02d     0x000100" ]
 
 # Check input: expect 2 lines
-[ `grep -vc '^#' < tests/tmp/modules.inputmap` = 2 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.inputmap` = 2 ]
 
 # module         matchBits bustype vendor product version evBits keyBits relBits absBits mscBits ledBits sndBits ffBits driver_info
-[ "`grep input_map tests/tmp/modules.inputmap`" = "input_map-$BITNESS        0x10  0x0  0x0  0x0  0x0  2  0  0  0  0  0  0  0  0x0
+[ "`grep input_map tests/System/TemporaryFiles/modules.inputmap`" = "input_map-$BITNESS        0x10  0x0  0x0  0x0  0x0  2  0  0  0  0  0  0  0  0x0
 input_map-$BITNESS        0x10  0x0  0x0  0x0  0x0  40000  0  0  0  0  0  0  0  0x0" ]
 
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-mv tests/tmp/modules.pcimap tests/tmp/modules.pcimap.old
-mv tests/tmp/modules.usbmap tests/tmp/modules.usbmap.old
-mv tests/tmp/modules.ccwmap tests/tmp/modules.ccwmap.old
-mv tests/tmp/modules.ieee1394map tests/tmp/modules.ieee1394map.old
-mv tests/tmp/modules.isapnpmap tests/tmp/modules.isapnpmap.old
-mv tests/tmp/modules.inputmap tests/tmp/modules.inputmap.old
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+mv tests/System/TemporaryFiles/modules.pcimap tests/System/TemporaryFiles/modules.pcimap.old
+mv tests/System/TemporaryFiles/modules.usbmap tests/System/TemporaryFiles/modules.usbmap.old
+mv tests/System/TemporaryFiles/modules.ccwmap tests/System/TemporaryFiles/modules.ccwmap.old
+mv tests/System/TemporaryFiles/modules.ieee1394map tests/System/TemporaryFiles/modules.ieee1394map.old
+mv tests/System/TemporaryFiles/modules.isapnpmap tests/System/TemporaryFiles/modules.isapnpmap.old
+mv tests/System/TemporaryFiles/modules.inputmap tests/System/TemporaryFiles/modules.inputmap.old
 
 # Synonyms
 [ "`depmod -a`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-diff -u tests/tmp/modules.pcimap.old tests/tmp/modules.pcimap
-diff -u tests/tmp/modules.usbmap.old tests/tmp/modules.usbmap
-diff -u tests/tmp/modules.ccwmap.old tests/tmp/modules.ccwmap
-diff -u tests/tmp/modules.ieee1394map.old tests/tmp/modules.ieee1394map
-diff -u tests/tmp/modules.isapnpmap.old tests/tmp/modules.isapnpmap
-diff -u tests/tmp/modules.inputmap.old tests/tmp/modules.inputmap
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/modules.pcimap.old tests/System/TemporaryFiles/modules.pcimap
+diff -u tests/System/TemporaryFiles/modules.usbmap.old tests/System/TemporaryFiles/modules.usbmap
+diff -u tests/System/TemporaryFiles/modules.ccwmap.old tests/System/TemporaryFiles/modules.ccwmap
+diff -u tests/System/TemporaryFiles/modules.ieee1394map.old tests/System/TemporaryFiles/modules.ieee1394map
+diff -u tests/System/TemporaryFiles/modules.isapnpmap.old tests/System/TemporaryFiles/modules.isapnpmap
+diff -u tests/System/TemporaryFiles/modules.inputmap.old tests/System/TemporaryFiles/modules.inputmap
 
 [ "`depmod -A`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-diff -u tests/tmp/modules.pcimap.old tests/tmp/modules.pcimap
-diff -u tests/tmp/modules.usbmap.old tests/tmp/modules.usbmap
-diff -u tests/tmp/modules.ccwmap.old tests/tmp/modules.ccwmap
-diff -u tests/tmp/modules.ieee1394map.old tests/tmp/modules.ieee1394map
-diff -u tests/tmp/modules.isapnpmap.old tests/tmp/modules.isapnpmap
-diff -u tests/tmp/modules.inputmap.old tests/tmp/modules.inputmap
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/modules.pcimap.old tests/System/TemporaryFiles/modules.pcimap
+diff -u tests/System/TemporaryFiles/modules.usbmap.old tests/System/TemporaryFiles/modules.usbmap
+diff -u tests/System/TemporaryFiles/modules.ccwmap.old tests/System/TemporaryFiles/modules.ccwmap
+diff -u tests/System/TemporaryFiles/modules.ieee1394map.old tests/System/TemporaryFiles/modules.ieee1394map
+diff -u tests/System/TemporaryFiles/modules.isapnpmap.old tests/System/TemporaryFiles/modules.isapnpmap
+diff -u tests/System/TemporaryFiles/modules.inputmap.old tests/System/TemporaryFiles/modules.inputmap
 
 [ "`depmod -e -A`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-diff -u tests/tmp/modules.pcimap.old tests/tmp/modules.pcimap
-diff -u tests/tmp/modules.usbmap.old tests/tmp/modules.usbmap
-diff -u tests/tmp/modules.ccwmap.old tests/tmp/modules.ccwmap
-diff -u tests/tmp/modules.ieee1394map.old tests/tmp/modules.ieee1394map
-diff -u tests/tmp/modules.isapnpmap.old tests/tmp/modules.isapnpmap
-diff -u tests/tmp/modules.inputmap.old tests/tmp/modules.inputmap
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/modules.pcimap.old tests/System/TemporaryFiles/modules.pcimap
+diff -u tests/System/TemporaryFiles/modules.usbmap.old tests/System/TemporaryFiles/modules.usbmap
+diff -u tests/System/TemporaryFiles/modules.ccwmap.old tests/System/TemporaryFiles/modules.ccwmap
+diff -u tests/System/TemporaryFiles/modules.ieee1394map.old tests/System/TemporaryFiles/modules.ieee1394map
+diff -u tests/System/TemporaryFiles/modules.isapnpmap.old tests/System/TemporaryFiles/modules.isapnpmap
+diff -u tests/System/TemporaryFiles/modules.inputmap.old tests/System/TemporaryFiles/modules.inputmap
 
 [ "`depmod -e -A $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep
-diff -u tests/tmp/modules.pcimap.old tests/tmp/modules.pcimap
-diff -u tests/tmp/modules.usbmap.old tests/tmp/modules.usbmap
-diff -u tests/tmp/modules.ccwmap.old tests/tmp/modules.ccwmap
-diff -u tests/tmp/modules.ieee1394map.old tests/tmp/modules.ieee1394map
-diff -u tests/tmp/modules.isapnpmap.old tests/tmp/modules.isapnpmap
-diff -u tests/tmp/modules.inputmap.old tests/tmp/modules.inputmap
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/modules.pcimap.old tests/System/TemporaryFiles/modules.pcimap
+diff -u tests/System/TemporaryFiles/modules.usbmap.old tests/System/TemporaryFiles/modules.usbmap
+diff -u tests/System/TemporaryFiles/modules.ccwmap.old tests/System/TemporaryFiles/modules.ccwmap
+diff -u tests/System/TemporaryFiles/modules.ieee1394map.old tests/System/TemporaryFiles/modules.ieee1394map
+diff -u tests/System/TemporaryFiles/modules.isapnpmap.old tests/System/TemporaryFiles/modules.isapnpmap
+diff -u tests/System/TemporaryFiles/modules.inputmap.old tests/System/TemporaryFiles/modules.inputmap
 
 # We expect the same from -n.
-grep -hv '^#' tests/tmp/modules.dep.old tests/tmp/modules.pcimap.old tests/tmp/modules.usbmap.old tests/tmp/modules.ccwmap.old tests/tmp/modules.ieee1394map.old tests/tmp/modules.isapnpmap.old tests/tmp/modules.inputmap.old > tests/tmp/out
+grep -hv '^#' tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.pcimap.old tests/System/TemporaryFiles/modules.usbmap.old tests/System/TemporaryFiles/modules.ccwmap.old tests/System/TemporaryFiles/modules.ieee1394map.old tests/System/TemporaryFiles/modules.isapnpmap.old tests/System/TemporaryFiles/modules.inputmap.old > tests/System/TemporaryFiles/out
 
 # Stdout versions.
-depmod -n | grep -v '^#' > tests/tmp/stdout
-diff -u tests/tmp/out tests/tmp/stdout
+depmod -n | grep -v '^#' > tests/System/TemporaryFiles/stdout
+diff -u tests/System/TemporaryFiles/out tests/System/TemporaryFiles/stdout
 
-depmod -a -n | grep -v '^#' > tests/tmp/modules.dep
-diff -u tests/tmp/out tests/tmp/stdout
+depmod -a -n | grep -v '^#' > tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/out tests/System/TemporaryFiles/stdout
 
-depmod -n -a $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules.dep
-diff -u tests/tmp/out tests/tmp/stdout
+depmod -n -a $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/out tests/System/TemporaryFiles/stdout
 
-depmod -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules.dep
-diff -u tests/tmp/out tests/tmp/stdout
+depmod -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules.dep
+diff -u tests/System/TemporaryFiles/out tests/System/TemporaryFiles/stdout
 
 done
 done
diff -urN module-init-tools-3.2/tests/test-depmod/14updates.sh module-init-tools-3.2-STEP/tests/test-depmod/14updates.sh
--- module-init-tools-3.2/tests/test-depmod/14updates.sh	2005-03-29 16:59:32.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/14updates.sh	2006-04-27 00:45:53.370447584 +1200
@@ -1,132 +1,132 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Simple tests of generation of 32-bit and 64-bit modules.dep
 
 for ENDIAN in -le -be; do
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
-MODTEST_OVERRIDE_WITH1=tests/tmp
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/kernel/export_dep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH2=tests/tmp/kernel/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/kernel/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/kernel/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/kernel/noexport_dep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH3=tests/tmp/kernel/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/kernel/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/kernel/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/kernel/noexport_nodep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH4=tests/tmp/kernel/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/kernel/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/kernel/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/kernel/export_nodep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH5=tests/tmp/kernel/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/kernel/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH5=tests/System/TemporaryFiles/kernel/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/kernel/noexport_doubledep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH6=tests/tmp/kernel/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/kernel/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH6=tests/System/TemporaryFiles/kernel/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Outputs
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules.pcimap
+MODTEST_OVERRIDE8=/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.usbmap
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.ccwmap
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules.alias
+MODTEST_OVERRIDE11=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules.symbols
+MODTEST_OVERRIDE12=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules.ieee1394map
+MODTEST_OVERRIDE13=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules.dep.temp
+MODTEST_OVERRIDE14=/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules.pcimap.temp
+MODTEST_OVERRIDE15=/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules.usbmap.temp
+MODTEST_OVERRIDE16=/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules.alias.temp
+MODTEST_OVERRIDE18=/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules.symbols.temp
+MODTEST_OVERRIDE19=/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules.isapnpmap
+MODTEST_OVERRIDE22=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules.inputmap.temp
+MODTEST_OVERRIDE23=/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules.inputmap
+MODTEST_OVERRIDE24=/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
-MODTEST_OVERRIDE25=/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH25=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE25=/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
-MODTEST_OVERRIDE26=/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE26=/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
 # More inputs
-MODTEST_OVERRIDE27=/lib/modules/$MODTEST_UNAME/updates
-MODTEST_OVERRIDE_WITH27=tests/tmp/updates
+MODTEST_OVERRIDE27=/System/Drivers/$MODTEST_UNAME/updates
+MODTEST_OVERRIDE_WITH27=tests/System/TemporaryFiles/updates
 export MODTEST_OVERRIDE27 MODTEST_OVERRIDE_WITH27
 
-MODTEST_OVERRIDE28=/lib/modules/$MODTEST_UNAME/kernel
-MODTEST_OVERRIDE_WITH28=tests/tmp/kernel
+MODTEST_OVERRIDE28=/System/Drivers/$MODTEST_UNAME/kernel
+MODTEST_OVERRIDE_WITH28=tests/System/TemporaryFiles/kernel
 export MODTEST_OVERRIDE28 MODTEST_OVERRIDE_WITH28
 
-MODTEST_OVERRIDE29=/lib/modules/$MODTEST_UNAME/updates/export_nodep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH29=tests/tmp/updates/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE29=/System/Drivers/$MODTEST_UNAME/updates/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH29=tests/System/TemporaryFiles/updates/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE29 MODTEST_OVERRIDE_WITH29
 
-rm -rf tests/tmp/*
-mkdir tests/tmp/kernel tests/tmp/updates
-cp tests/data/$BITNESS$ENDIAN/normal/*.ko tests/tmp/kernel
-cp tests/data/$BITNESS$ENDIAN/normal/export_nodep-$BITNESS.ko tests/tmp/updates
+rm -rf tests/System/TemporaryFiles/*
+mkdir tests/System/TemporaryFiles/kernel tests/System/TemporaryFiles/updates
+cp tests/data/$BITNESS$ENDIAN/normal/*.ko tests/System/TemporaryFiles/kernel
+cp tests/data/$BITNESS$ENDIAN/normal/export_nodep-$BITNESS.ko tests/System/TemporaryFiles/updates
 
 # First we try update which overrides, then not
 for iter in override not-override; do
@@ -135,127 +135,127 @@
 [ "`depmod 2>&1`" = "" ]
 
 # Check modules.dep results: expect 5 lines
-[ `grep -vc '^#' < tests/tmp/modules.dep` = 5 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.dep` = 5 ]
 
 # Other lines must refer to updates/, not kernels/ module.
-[ "`grep -w export_dep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/kernel/export_dep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/updates/export_nodep-$BITNESS.ko" ]
-[ "`grep -w noexport_dep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/kernel/noexport_dep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/updates/export_nodep-$BITNESS.ko" ]
-[ "`grep -w noexport_nodep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/kernel/noexport_nodep-$BITNESS.ko:" ]
-[ "`grep -w noexport_doubledep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/kernel/noexport_doubledep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/kernel/export_dep-$BITNESS.ko /lib/modules/$MODTEST_UNAME/updates/export_nodep-$BITNESS.ko" ]
-[ "`grep -w export_nodep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/updates/export_nodep-$BITNESS.ko:" ]
+[ "`grep -w export_dep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/kernel/export_dep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/updates/export_nodep-$BITNESS.ko" ]
+[ "`grep -w noexport_dep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/kernel/noexport_dep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/updates/export_nodep-$BITNESS.ko" ]
+[ "`grep -w noexport_nodep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/kernel/noexport_nodep-$BITNESS.ko:" ]
+[ "`grep -w noexport_doubledep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/kernel/noexport_doubledep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/kernel/export_dep-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/updates/export_nodep-$BITNESS.ko" ]
+[ "`grep -w export_nodep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/updates/export_nodep-$BITNESS.ko:" ]
 
 # Check modules.symbols results: expect 3 lines
-[ `grep -vc '^#' < tests/tmp/modules.symbols` = 3 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.symbols` = 3 ]
 
-[ "`grep -w symbol:exported1 tests/tmp/modules.symbols`" = "alias symbol:exported1 export_nodep_$BITNESS" ]
-[ "`grep -w symbol:exported2 tests/tmp/modules.symbols`" = "alias symbol:exported2 export_nodep_$BITNESS" ]
-[ "`grep -w symbol:exported3 tests/tmp/modules.symbols`" = "alias symbol:exported3 export_dep_$BITNESS" ]
+[ "`grep -w symbol:exported1 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported1 export_nodep_$BITNESS" ]
+[ "`grep -w symbol:exported2 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported2 export_nodep_$BITNESS" ]
+[ "`grep -w symbol:exported3 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported3 export_dep_$BITNESS" ]
 
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 # Synonyms
 [ "`depmod $MODTEST_UNAME`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -a`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -a $MODTEST_UNAME`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -A`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -A $MODTEST_UNAME`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -e -A`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -e -A $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod --all`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod --quick`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -e --quick`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -e --quick $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod --errsyms --quick`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod --errsyms --quick $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 # Combined should form stdout versions.
-grep -vh '^#' tests/tmp/modules.dep.old tests/tmp/modules.symbols.old > tests/tmp/modules.all.old
+grep -vh '^#' tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.symbols.old > tests/System/TemporaryFiles/modules.all.old
 
 # Stdout versions.
-depmod -n | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all >/dev/null
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -a -n | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all >/dev/null
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -n -a $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all >/dev/null
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all >/dev/null
-mv tests/tmp/modules.all tests/tmp/modules.all.old
+depmod -n | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -a -n | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -n -a $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
 
 # For second run, don't override.
-rm -f tests/tmp/kernel/export_nodep-$BITNESS.ko
-rm -f tests/tmp/modules*
+rm -f tests/System/TemporaryFiles/kernel/export_nodep-$BITNESS.ko
+rm -f tests/System/TemporaryFiles/modules*
 done # override
 
 done # 32/64-bit
diff -urN module-init-tools-3.2/tests/test-depmod/15symlink.sh module-init-tools-3.2-STEP/tests/test-depmod/15symlink.sh
--- module-init-tools-3.2/tests/test-depmod/15symlink.sh	2005-03-29 16:59:21.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/15symlink.sh	2006-04-27 00:45:53.375446824 +1200
@@ -1,266 +1,266 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test that we ignore symlinks.
 
 for ENDIAN in -le -be; do
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/kernel/export_dep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH2=tests/tmp/modules/kernel/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/kernel/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/modules/kernel/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/kernel/noexport_dep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH3=tests/tmp/modules/kernel/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/kernel/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/modules/kernel/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/kernel/noexport_nodep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH4=tests/tmp/modules/kernel/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/kernel/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/modules/kernel/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/kernel/export_nodep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH5=tests/tmp/modules/kernel/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/kernel/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH5=tests/System/TemporaryFiles/modules/kernel/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/kernel/noexport_doubledep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH6=tests/tmp/modules/kernel/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/kernel/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH6=tests/System/TemporaryFiles/modules/kernel/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Outputs
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules/modules.pcimap
+MODTEST_OVERRIDE8=/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules/modules.usbmap
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules/modules.ccwmap
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules/modules.alias
+MODTEST_OVERRIDE11=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules/modules.symbols
+MODTEST_OVERRIDE12=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules/modules.ieee1394map
+MODTEST_OVERRIDE13=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules/modules.dep.temp
+MODTEST_OVERRIDE14=/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules/modules.pcimap.temp
+MODTEST_OVERRIDE15=/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules/modules.usbmap.temp
+MODTEST_OVERRIDE16=/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules/modules.alias.temp
+MODTEST_OVERRIDE18=/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules/modules.symbols.temp
+MODTEST_OVERRIDE19=/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules/modules.isapnpmap
+MODTEST_OVERRIDE22=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules/modules.inputmap.temp
+MODTEST_OVERRIDE23=/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules/modules.inputmap
+MODTEST_OVERRIDE24=/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
-MODTEST_OVERRIDE25=/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH25=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE25=/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
-MODTEST_OVERRIDE26=/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE26=/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
 # More inputs
-MODTEST_OVERRIDE27=/lib/modules/$MODTEST_UNAME/build
-MODTEST_OVERRIDE_WITH27=tests/tmp/modules/build
+MODTEST_OVERRIDE27=/System/Drivers/$MODTEST_UNAME/build
+MODTEST_OVERRIDE_WITH27=tests/System/TemporaryFiles/modules/build
 export MODTEST_OVERRIDE27 MODTEST_OVERRIDE_WITH27
 
-MODTEST_OVERRIDE28=/lib/modules/$MODTEST_UNAME/kernel
-MODTEST_OVERRIDE_WITH28=tests/tmp/modules/kernel
+MODTEST_OVERRIDE28=/System/Drivers/$MODTEST_UNAME/kernel
+MODTEST_OVERRIDE_WITH28=tests/System/TemporaryFiles/modules/kernel
 export MODTEST_OVERRIDE28 MODTEST_OVERRIDE_WITH28
 
-MODTEST_OVERRIDE29=/lib/modules/$MODTEST_UNAME/updates
-MODTEST_OVERRIDE_WITH29=tests/tmp/updates
+MODTEST_OVERRIDE29=/System/Drivers/$MODTEST_UNAME/updates
+MODTEST_OVERRIDE_WITH29=tests/System/TemporaryFiles/updates
 export MODTEST_OVERRIDE29 MODTEST_OVERRIDE_WITH29
 
-MODTEST_OVERRIDE30=/lib/modules/$MODTEST_UNAME/updates/rename-new-$BITNESS.ko
-MODTEST_OVERRIDE_WITH30=tests/tmp/updates/rename-new-$BITNESS.ko
+MODTEST_OVERRIDE30=/System/Drivers/$MODTEST_UNAME/updates/rename-new-$BITNESS.ko
+MODTEST_OVERRIDE_WITH30=tests/System/TemporaryFiles/updates/rename-new-$BITNESS.ko
 export MODTEST_OVERRIDE30 MODTEST_OVERRIDE_WITH30
 
-mkdir tests/tmp/nogo tests/tmp/updates tests/tmp/modules
-mkdir tests/tmp/modules/kernel
-cp tests/data/$BITNESS$ENDIAN/normal/*.ko tests/tmp/modules/kernel
+mkdir tests/System/TemporaryFiles/nogo tests/System/TemporaryFiles/updates tests/System/TemporaryFiles/modules
+mkdir tests/System/TemporaryFiles/modules/kernel
+cp tests/data/$BITNESS$ENDIAN/normal/*.ko tests/System/TemporaryFiles/modules/kernel
 
 # Should not find this through symlink
-ln -s ../nogo tests/tmp/modules/build
-cp tests/data/$BITNESS$ENDIAN/alias/alias-$BITNESS.ko tests/tmp/nogo
+ln -s ../nogo tests/System/TemporaryFiles/modules/build
+cp tests/data/$BITNESS$ENDIAN/alias/alias-$BITNESS.ko tests/System/TemporaryFiles/nogo
 
 # SHOULD go through updates symlink (SuSE want shared updates)
-ln -s ../updates tests/tmp/modules/updates
-cp tests/data/$BITNESS$ENDIAN/rename/rename-new-$BITNESS.ko tests/tmp/updates
+ln -s ../updates tests/System/TemporaryFiles/modules/updates
+cp tests/data/$BITNESS$ENDIAN/rename/rename-new-$BITNESS.ko tests/System/TemporaryFiles/updates
 
 # Expect no output.
 [ "`depmod 2>&1`" = "" ]
 
 # Check modules.dep results: expect 6 lines
-[ `grep -vc '^#' < tests/tmp/modules/modules.dep` = 6 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules/modules.dep` = 6 ]
 
-[ "`grep -w export_dep-$BITNESS.ko: tests/tmp/modules/modules.dep`" = "/lib/modules/$MODTEST_UNAME/kernel/export_dep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/kernel/export_nodep-$BITNESS.ko" ]
-[ "`grep -w noexport_dep-$BITNESS.ko: tests/tmp/modules/modules.dep`" = "/lib/modules/$MODTEST_UNAME/kernel/noexport_dep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/kernel/export_nodep-$BITNESS.ko" ]
-[ "`grep -w noexport_nodep-$BITNESS.ko: tests/tmp/modules/modules.dep`" = "/lib/modules/$MODTEST_UNAME/kernel/noexport_nodep-$BITNESS.ko:" ]
-[ "`grep -w noexport_doubledep-$BITNESS.ko: tests/tmp/modules/modules.dep`" = "/lib/modules/$MODTEST_UNAME/kernel/noexport_doubledep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/kernel/export_dep-$BITNESS.ko /lib/modules/$MODTEST_UNAME/kernel/export_nodep-$BITNESS.ko" ]
-[ "`grep -w export_nodep-$BITNESS.ko: tests/tmp/modules/modules.dep`" = "/lib/modules/$MODTEST_UNAME/kernel/export_nodep-$BITNESS.ko:" ]
-[ "`grep -w rename-new-$BITNESS.ko: tests/tmp/modules/modules.dep`" = "/lib/modules/$MODTEST_UNAME/updates/rename-new-$BITNESS.ko:" ]
+[ "`grep -w export_dep-$BITNESS.ko: tests/System/TemporaryFiles/modules/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/kernel/export_dep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/kernel/export_nodep-$BITNESS.ko" ]
+[ "`grep -w noexport_dep-$BITNESS.ko: tests/System/TemporaryFiles/modules/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/kernel/noexport_dep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/kernel/export_nodep-$BITNESS.ko" ]
+[ "`grep -w noexport_nodep-$BITNESS.ko: tests/System/TemporaryFiles/modules/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/kernel/noexport_nodep-$BITNESS.ko:" ]
+[ "`grep -w noexport_doubledep-$BITNESS.ko: tests/System/TemporaryFiles/modules/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/kernel/noexport_doubledep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/kernel/export_dep-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/kernel/export_nodep-$BITNESS.ko" ]
+[ "`grep -w export_nodep-$BITNESS.ko: tests/System/TemporaryFiles/modules/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/kernel/export_nodep-$BITNESS.ko:" ]
+[ "`grep -w rename-new-$BITNESS.ko: tests/System/TemporaryFiles/modules/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/updates/rename-new-$BITNESS.ko:" ]
 
 # Check modules.symbols results: expect 3 lines
-[ `grep -vc '^#' < tests/tmp/modules/modules.symbols` = 3 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules/modules.symbols` = 3 ]
 
-[ "`grep -w symbol:exported1 tests/tmp/modules/modules.symbols`" = "alias symbol:exported1 export_nodep_$BITNESS" ]
-[ "`grep -w symbol:exported2 tests/tmp/modules/modules.symbols`" = "alias symbol:exported2 export_nodep_$BITNESS" ]
-[ "`grep -w symbol:exported3 tests/tmp/modules/modules.symbols`" = "alias symbol:exported3 export_dep_$BITNESS" ]
+[ "`grep -w symbol:exported1 tests/System/TemporaryFiles/modules/modules.symbols`" = "alias symbol:exported1 export_nodep_$BITNESS" ]
+[ "`grep -w symbol:exported2 tests/System/TemporaryFiles/modules/modules.symbols`" = "alias symbol:exported2 export_nodep_$BITNESS" ]
+[ "`grep -w symbol:exported3 tests/System/TemporaryFiles/modules/modules.symbols`" = "alias symbol:exported3 export_dep_$BITNESS" ]
 
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 # Synonyms
 [ "`depmod $MODTEST_UNAME`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 [ "`depmod -a`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 [ "`depmod -a $MODTEST_UNAME`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 [ "`depmod -A`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 [ "`depmod -A $MODTEST_UNAME`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 [ "`depmod -e -A`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 [ "`depmod -e -A $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 [ "`depmod --all`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 [ "`depmod --quick`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 [ "`depmod -e --quick`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 [ "`depmod -e --quick $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 [ "`depmod --errsyms --quick`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 [ "`depmod --errsyms --quick $MODTEST_VERSION`" = "" ]
-diff -u tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.dep >/dev/null
-mv tests/tmp/modules/modules.dep tests/tmp/modules/modules.dep.old
-diff -u tests/tmp/modules/modules.symbols.old tests/tmp/modules/modules.symbols >/dev/null
-mv tests/tmp/modules/modules.symbols tests/tmp/modules/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.dep tests/System/TemporaryFiles/modules/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules/modules.symbols.old tests/System/TemporaryFiles/modules/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.symbols tests/System/TemporaryFiles/modules/modules.symbols.old
 
 # Combined should form stdout versions.
-grep -vh '^#' tests/tmp/modules/modules.dep.old tests/tmp/modules/modules.symbols.old > tests/tmp/modules/modules.all.old
+grep -vh '^#' tests/System/TemporaryFiles/modules/modules.dep.old tests/System/TemporaryFiles/modules/modules.symbols.old > tests/System/TemporaryFiles/modules/modules.all.old
 
 # Stdout versions.
-depmod -n | grep -v '^#' > tests/tmp/modules/modules.all
-diff -u tests/tmp/modules/modules.all.old tests/tmp/modules/modules.all >/dev/null
-mv tests/tmp/modules/modules.all tests/tmp/modules/modules.all.old
-
-depmod -a -n | grep -v '^#' > tests/tmp/modules/modules.all
-diff -u tests/tmp/modules/modules.all.old tests/tmp/modules/modules.all >/dev/null
-mv tests/tmp/modules/modules.all tests/tmp/modules/modules.all.old
-
-depmod -n -a $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules/modules.all
-diff -u tests/tmp/modules/modules.all.old tests/tmp/modules/modules.all >/dev/null
-mv tests/tmp/modules/modules.all tests/tmp/modules/modules.all.old
-
-depmod -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/tmp/modules/modules.all
-diff -u tests/tmp/modules/modules.all.old tests/tmp/modules/modules.all >/dev/null
-mv tests/tmp/modules/modules.all tests/tmp/modules/modules.all.old
+depmod -n | grep -v '^#' > tests/System/TemporaryFiles/modules/modules.all
+diff -u tests/System/TemporaryFiles/modules/modules.all.old tests/System/TemporaryFiles/modules/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.all tests/System/TemporaryFiles/modules/modules.all.old
+
+depmod -a -n | grep -v '^#' > tests/System/TemporaryFiles/modules/modules.all
+diff -u tests/System/TemporaryFiles/modules/modules.all.old tests/System/TemporaryFiles/modules/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.all tests/System/TemporaryFiles/modules/modules.all.old
+
+depmod -n -a $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules/modules.all
+diff -u tests/System/TemporaryFiles/modules/modules.all.old tests/System/TemporaryFiles/modules/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.all tests/System/TemporaryFiles/modules/modules.all.old
+
+depmod -e -n -A $MODTEST_VERSION | grep -v '^#' > tests/System/TemporaryFiles/modules/modules.all
+diff -u tests/System/TemporaryFiles/modules/modules.all.old tests/System/TemporaryFiles/modules/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules/modules.all tests/System/TemporaryFiles/modules/modules.all.old
 
-rm -rf tests/tmp/*
+rm -rf tests/System/TemporaryFiles/*
 done # 32/64-bit
 done
diff -urN module-init-tools-3.2/tests/test-depmod/16specific-modules.sh module-init-tools-3.2-STEP/tests/test-depmod/16specific-modules.sh
--- module-init-tools-3.2/tests/test-depmod/16specific-modules.sh	2005-04-30 22:11:51.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-depmod/16specific-modules.sh	2006-04-27 00:45:41.077316424 +1200
@@ -1,185 +1,185 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test depmod with specific names on the cmdline (bug report from Andrew Snare)
 
 for ENDIAN in -be -le; do
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS$ENDIAN/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS$ENDIAN/normal/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS$ENDIAN/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS$ENDIAN/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS$ENDIAN/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS$ENDIAN/normal/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Outputs
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
-MODTEST_OVERRIDE8=/lib/modules/$MODTEST_UNAME/modules.pcimap
-MODTEST_OVERRIDE_WITH8=tests/tmp/modules.pcimap
+MODTEST_OVERRIDE8=/System/Drivers/$MODTEST_UNAME/modules.pcimap
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modules.pcimap
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.usbmap
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.usbmap
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.usbmap
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.usbmap
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.ccwmap
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.ccwmap
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.ccwmap
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.ccwmap
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH11=tests/tmp/modules.alias
+MODTEST_OVERRIDE11=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH11=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
-MODTEST_OVERRIDE12=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH12=tests/tmp/modules.symbols
+MODTEST_OVERRIDE12=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modules.symbols
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
-MODTEST_OVERRIDE13=/lib/modules/$MODTEST_UNAME/modules.ieee1394map
-MODTEST_OVERRIDE_WITH13=tests/tmp/modules.ieee1394map
+MODTEST_OVERRIDE13=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modules.ieee1394map
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
-MODTEST_OVERRIDE14=/lib/modules/$MODTEST_UNAME/modules.dep.temp
-MODTEST_OVERRIDE_WITH14=tests/tmp/modules.dep.temp
+MODTEST_OVERRIDE14=/System/Drivers/$MODTEST_UNAME/modules.dep.temp
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modules.dep.temp
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
-MODTEST_OVERRIDE15=/lib/modules/$MODTEST_UNAME/modules.pcimap.temp
-MODTEST_OVERRIDE_WITH15=tests/tmp/modules.pcimap.temp
+MODTEST_OVERRIDE15=/System/Drivers/$MODTEST_UNAME/modules.pcimap.temp
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modules.pcimap.temp
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
-MODTEST_OVERRIDE16=/lib/modules/$MODTEST_UNAME/modules.usbmap.temp
-MODTEST_OVERRIDE_WITH16=tests/tmp/modules.usbmap.temp
+MODTEST_OVERRIDE16=/System/Drivers/$MODTEST_UNAME/modules.usbmap.temp
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modules.usbmap.temp
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
-MODTEST_OVERRIDE17=/lib/modules/$MODTEST_UNAME/modules.ccwmap.temp
-MODTEST_OVERRIDE_WITH17=tests/tmp/modules.ccwmap.temp
+MODTEST_OVERRIDE17=/System/Drivers/$MODTEST_UNAME/modules.ccwmap.temp
+MODTEST_OVERRIDE_WITH17=tests/System/TemporaryFiles/modules.ccwmap.temp
 export MODTEST_OVERRIDE17 MODTEST_OVERRIDE_WITH17
 
-MODTEST_OVERRIDE18=/lib/modules/$MODTEST_UNAME/modules.alias.temp
-MODTEST_OVERRIDE_WITH18=tests/tmp/modules.alias.temp
+MODTEST_OVERRIDE18=/System/Drivers/$MODTEST_UNAME/modules.alias.temp
+MODTEST_OVERRIDE_WITH18=tests/System/TemporaryFiles/modules.alias.temp
 export MODTEST_OVERRIDE18 MODTEST_OVERRIDE_WITH18
 
-MODTEST_OVERRIDE19=/lib/modules/$MODTEST_UNAME/modules.symbols.temp
-MODTEST_OVERRIDE_WITH19=tests/tmp/modules.symbols.temp
+MODTEST_OVERRIDE19=/System/Drivers/$MODTEST_UNAME/modules.symbols.temp
+MODTEST_OVERRIDE_WITH19=tests/System/TemporaryFiles/modules.symbols.temp
 export MODTEST_OVERRIDE19 MODTEST_OVERRIDE_WITH19
 
-MODTEST_OVERRIDE20=/lib/modules/$MODTEST_UNAME/modules.ieee1394map.temp
-MODTEST_OVERRIDE_WITH20=tests/tmp/modules.ieee1394map.temp
+MODTEST_OVERRIDE20=/System/Drivers/$MODTEST_UNAME/modules.ieee1394map.temp
+MODTEST_OVERRIDE_WITH20=tests/System/TemporaryFiles/modules.ieee1394map.temp
 export MODTEST_OVERRIDE20 MODTEST_OVERRIDE_WITH20
 
-MODTEST_OVERRIDE21=/lib/modules/$MODTEST_UNAME/modules.isapnpmap.temp
-MODTEST_OVERRIDE_WITH21=tests/tmp/modules.isapnpmap.temp
+MODTEST_OVERRIDE21=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap.temp
+MODTEST_OVERRIDE_WITH21=tests/System/TemporaryFiles/modules.isapnpmap.temp
 export MODTEST_OVERRIDE21 MODTEST_OVERRIDE_WITH21
 
-MODTEST_OVERRIDE22=/lib/modules/$MODTEST_UNAME/modules.isapnpmap
-MODTEST_OVERRIDE_WITH22=tests/tmp/modules.isapnpmap
+MODTEST_OVERRIDE22=/System/Drivers/$MODTEST_UNAME/modules.isapnpmap
+MODTEST_OVERRIDE_WITH22=tests/System/TemporaryFiles/modules.isapnpmap
 export MODTEST_OVERRIDE22 MODTEST_OVERRIDE_WITH22
 
-MODTEST_OVERRIDE23=/lib/modules/$MODTEST_UNAME/modules.inputmap.temp
-MODTEST_OVERRIDE_WITH23=tests/tmp/modules.inputmap.temp
+MODTEST_OVERRIDE23=/System/Drivers/$MODTEST_UNAME/modules.inputmap.temp
+MODTEST_OVERRIDE_WITH23=tests/System/TemporaryFiles/modules.inputmap.temp
 export MODTEST_OVERRIDE23 MODTEST_OVERRIDE_WITH23
 
-MODTEST_OVERRIDE24=/lib/modules/$MODTEST_UNAME/modules.inputmap
-MODTEST_OVERRIDE_WITH24=tests/tmp/modules.inputmap
+MODTEST_OVERRIDE24=/System/Drivers/$MODTEST_UNAME/modules.inputmap
+MODTEST_OVERRIDE_WITH24=tests/System/TemporaryFiles/modules.inputmap
 export MODTEST_OVERRIDE24 MODTEST_OVERRIDE_WITH24
 
-MODTEST_OVERRIDE25=/lib/modules/$MODTEST_UNAME/modules.seriomap.temp
-MODTEST_OVERRIDE_WITH25=tests/tmp/modules.seriomap.temp
+MODTEST_OVERRIDE25=/System/Drivers/$MODTEST_UNAME/modules.seriomap.temp
+MODTEST_OVERRIDE_WITH25=tests/System/TemporaryFiles/modules.seriomap.temp
 export MODTEST_OVERRIDE25 MODTEST_OVERRIDE_WITH25
 
-MODTEST_OVERRIDE26=/lib/modules/$MODTEST_UNAME/modules.seriomap
-MODTEST_OVERRIDE_WITH26=tests/tmp/modules.seriomap
+MODTEST_OVERRIDE26=/System/Drivers/$MODTEST_UNAME/modules.seriomap
+MODTEST_OVERRIDE_WITH26=tests/System/TemporaryFiles/modules.seriomap
 export MODTEST_OVERRIDE26 MODTEST_OVERRIDE_WITH26
 
-ALL="/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko /lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko /lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko /lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko"
+ALL="/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko"
 
 # Expect no output.
 [ "`depmod $ALL 2>&1`" = "" ]
 
 # Check modules.dep results: expect 5 lines
-[ `grep -vc '^#' < tests/tmp/modules.dep` = 5 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.dep` = 5 ]
 
-[ "`grep -w export_dep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
-[ "`grep -w noexport_dep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
-[ "`grep -w export_nodep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko:" ]
-[ "`grep -w noexport_nodep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" ]
-[ "`grep -w noexport_doubledep-$BITNESS.ko: tests/tmp/modules.dep`" = "/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko /lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
+[ "`grep -w export_dep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
+[ "`grep -w noexport_dep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
+[ "`grep -w export_nodep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko:" ]
+[ "`grep -w noexport_nodep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" ]
+[ "`grep -w noexport_doubledep-$BITNESS.ko: tests/System/TemporaryFiles/modules.dep`" = "/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko /System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko" ]
 
 # Check modules.symbols results: expect 3 lines
-[ `grep -vc '^#' < tests/tmp/modules.symbols` = 3 ]
+[ `grep -vc '^#' < tests/System/TemporaryFiles/modules.symbols` = 3 ]
 
-[ "`grep -w symbol:exported1 tests/tmp/modules.symbols`" = "alias symbol:exported1 export_nodep_$BITNESS" ]
-[ "`grep -w symbol:exported2 tests/tmp/modules.symbols`" = "alias symbol:exported2 export_nodep_$BITNESS" ]
-[ "`grep -w symbol:exported3 tests/tmp/modules.symbols`" = "alias symbol:exported3 export_dep_$BITNESS" ]
+[ "`grep -w symbol:exported1 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported1 export_nodep_$BITNESS" ]
+[ "`grep -w symbol:exported2 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported2 export_nodep_$BITNESS" ]
+[ "`grep -w symbol:exported3 tests/System/TemporaryFiles/modules.symbols`" = "alias symbol:exported3 export_dep_$BITNESS" ]
 
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 # Synonyms
 [ "`depmod $MODTEST_UNAME $ALL`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -e $ALL`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod -e $MODTEST_VERSION $ALL`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod --errsyms $ALL`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 [ "`depmod --errsyms $MODTEST_VERSION $ALL`" = "" ]
-diff -u tests/tmp/modules.dep.old tests/tmp/modules.dep >/dev/null
-mv tests/tmp/modules.dep tests/tmp/modules.dep.old
-diff -u tests/tmp/modules.symbols.old tests/tmp/modules.symbols >/dev/null
-mv tests/tmp/modules.symbols tests/tmp/modules.symbols.old
+diff -u tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.dep >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.dep tests/System/TemporaryFiles/modules.dep.old
+diff -u tests/System/TemporaryFiles/modules.symbols.old tests/System/TemporaryFiles/modules.symbols >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.symbols tests/System/TemporaryFiles/modules.symbols.old
 
 # Combined should form stdout versions.
-grep -vh '^#' tests/tmp/modules.dep.old tests/tmp/modules.symbols.old > tests/tmp/modules.all.old
+grep -vh '^#' tests/System/TemporaryFiles/modules.dep.old tests/System/TemporaryFiles/modules.symbols.old > tests/System/TemporaryFiles/modules.all.old
 
 # Stdout versions.
-depmod -n $ALL | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all >/dev/null
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -n $MODTEST_VERSION $ALL | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all >/dev/null
-mv tests/tmp/modules.all tests/tmp/modules.all.old
-
-depmod -e -n $MODTEST_VERSION $ALL | grep -v '^#' > tests/tmp/modules.all
-diff -u tests/tmp/modules.all.old tests/tmp/modules.all >/dev/null
-mv tests/tmp/modules.all tests/tmp/modules.all.old
+depmod -n $ALL | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -n $MODTEST_VERSION $ALL | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
+
+depmod -e -n $MODTEST_VERSION $ALL | grep -v '^#' > tests/System/TemporaryFiles/modules.all
+diff -u tests/System/TemporaryFiles/modules.all.old tests/System/TemporaryFiles/modules.all >/System/Devices/null
+mv tests/System/TemporaryFiles/modules.all tests/System/TemporaryFiles/modules.all.old
 
 done
 done
diff -urN module-init-tools-3.2/tests/test-generate-modprobe.conf/01above.sh module-init-tools-3.2-STEP/tests/test-generate-modprobe.conf/01above.sh
--- module-init-tools-3.2/tests/test-generate-modprobe.conf/01above.sh	2004-01-15 17:43:08.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-generate-modprobe.conf/01above.sh	2006-04-27 00:45:53.377446520 +1200
@@ -1,37 +1,37 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test conversion of "above" command.
 
 # Single arg.
-echo 'above scsi_mod ide-scsi' > tests/tmp/modules.conf
+echo 'above scsi_mod ide-scsi' > tests/System/TemporaryFiles/modules.conf
 
-TESTING_MODPROBE_CONF=tests/tmp/modules.conf
+TESTING_MODPROBE_CONF=tests/System/TemporaryFiles/modules.conf
 export TESTING_MODPROBE_CONF
 
-[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
+[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
 
-[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 2 ]
+[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 2 ]
 
-[ "`grep ^install tests/tmp/modprobe.conf`" = "install scsi_mod /sbin/modprobe --first-time --ignore-install scsi_mod && { /sbin/modprobe ide-scsi; /bin/true; }" ]
+[ "`grep ^install tests/System/TemporaryFiles/modprobe.conf`" = "install scsi_mod /System/AdminTools/modprobe --first-time --ignore-install scsi_mod && { /System/AdminTools/modprobe ide-scsi; /System/Tools/true; }" ]
 
-[ "`grep ^remove tests/tmp/modprobe.conf`" = "remove scsi_mod { /sbin/modprobe -r ide-scsi; } ; /sbin/modprobe -r --first-time --ignore-remove scsi_mod" ]
+[ "`grep ^remove tests/System/TemporaryFiles/modprobe.conf`" = "remove scsi_mod { /System/AdminTools/modprobe -r ide-scsi; } ; /System/AdminTools/modprobe -r --first-time --ignore-remove scsi_mod" ]
 
 # Multiple arg.
-echo 'above mod a b c' > tests/tmp/modules.conf
+echo 'above mod a b c' > tests/System/TemporaryFiles/modules.conf
 
-[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
+[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
 
-[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 2 ]
+[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 2 ]
 
-[ "`grep ^install tests/tmp/modprobe.conf`" = "install mod /sbin/modprobe --first-time --ignore-install mod && { /sbin/modprobe a; /sbin/modprobe b; /sbin/modprobe c; /bin/true; }" ]
+[ "`grep ^install tests/System/TemporaryFiles/modprobe.conf`" = "install mod /System/AdminTools/modprobe --first-time --ignore-install mod && { /System/AdminTools/modprobe a; /System/AdminTools/modprobe b; /System/AdminTools/modprobe c; /System/Tools/true; }" ]
 
-[ "`grep ^remove tests/tmp/modprobe.conf`" = "remove mod { /sbin/modprobe -r a; /sbin/modprobe -r b; /sbin/modprobe -r c; } ; /sbin/modprobe -r --first-time --ignore-remove mod" ]
+[ "`grep ^remove tests/System/TemporaryFiles/modprobe.conf`" = "remove mod { /System/AdminTools/modprobe -r a; /System/AdminTools/modprobe -r b; /System/AdminTools/modprobe -r c; } ; /System/AdminTools/modprobe -r --first-time --ignore-remove mod" ]
 
 # This matches with test-modprobe/22recursiveinstall.sh
-echo 'add above ip_conntrack ip_conntrack_ftp' > tests/tmp/modules.conf
+echo 'add above ip_conntrack ip_conntrack_ftp' > tests/System/TemporaryFiles/modules.conf
 
-[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
+[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
 
-[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 2 ]
+[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 2 ]
 
-[ "`grep ^install tests/tmp/modprobe.conf`" = "install ip_conntrack /sbin/modprobe --first-time --ignore-install ip_conntrack && { /sbin/modprobe ip_conntrack_ftp; /bin/true; }" ]
+[ "`grep ^install tests/System/TemporaryFiles/modprobe.conf`" = "install ip_conntrack /System/AdminTools/modprobe --first-time --ignore-install ip_conntrack && { /System/AdminTools/modprobe ip_conntrack_ftp; /System/Tools/true; }" ]
 
diff -urN module-init-tools-3.2/tests/test-generate-modprobe.conf/02options.sh module-init-tools-3.2-STEP/tests/test-generate-modprobe.conf/02options.sh
--- module-init-tools-3.2/tests/test-generate-modprobe.conf/02options.sh	2004-02-02 13:34:59.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-generate-modprobe.conf/02options.sh	2006-04-27 00:45:53.378446368 +1200
@@ -1,36 +1,36 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test conversion of "options" command.
 
 # Simple.
-echo 'options dummy0 dummy0-options' > tests/tmp/modules.conf
+echo 'options dummy0 dummy0-options' > tests/System/TemporaryFiles/modules.conf
 
-TESTING_MODPROBE_CONF=tests/tmp/modules.conf
+TESTING_MODPROBE_CONF=tests/System/TemporaryFiles/modules.conf
 export TESTING_MODPROBE_CONF
 
-[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
+[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
 
-[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 1 ]
-[ "`grep ^options tests/tmp/modprobe.conf`" = "options dummy0 dummy0-options" ]
+[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 1 ]
+[ "`grep ^options tests/System/TemporaryFiles/modprobe.conf`" = "options dummy0 dummy0-options" ]
 
 # Command line args.
-echo 'options dummy0 -o dummy0' > tests/tmp/modules.conf
+echo 'options dummy0 -o dummy0' > tests/System/TemporaryFiles/modules.conf
 
-[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
+[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
 
-[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 1 ]
-[ "`grep ^install tests/tmp/modprobe.conf`" = "install dummy0 /sbin/modprobe -o dummy0 --ignore-install dummy0" ]
+[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 1 ]
+[ "`grep ^install tests/System/TemporaryFiles/modprobe.conf`" = "install dummy0 /System/AdminTools/modprobe -o dummy0 --ignore-install dummy0" ]
 
 # Both
-echo 'options dummy0 -o dummy0 dummy0-options' > tests/tmp/modules.conf
+echo 'options dummy0 -o dummy0 dummy0-options' > tests/System/TemporaryFiles/modules.conf
 
-[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
-[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 2 ]
-[ "`grep ^install tests/tmp/modprobe.conf`" = "install dummy0 /sbin/modprobe -o dummy0 --ignore-install dummy0" ]
-[ "`grep ^options tests/tmp/modprobe.conf`" = "options dummy0 dummy0-options" ]
-
-echo 'options dummy0 dummy0-options -o dummy0' > tests/tmp/modules.conf
-
-[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
-[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 2 ]
-[ "`grep ^install tests/tmp/modprobe.conf`" = "install dummy0 /sbin/modprobe -o dummy0 --ignore-install dummy0" ]
-[ "`grep ^options tests/tmp/modprobe.conf`" = "options dummy0 dummy0-options" ]
+[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
+[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 2 ]
+[ "`grep ^install tests/System/TemporaryFiles/modprobe.conf`" = "install dummy0 /System/AdminTools/modprobe -o dummy0 --ignore-install dummy0" ]
+[ "`grep ^options tests/System/TemporaryFiles/modprobe.conf`" = "options dummy0 dummy0-options" ]
+
+echo 'options dummy0 dummy0-options -o dummy0' > tests/System/TemporaryFiles/modules.conf
+
+[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
+[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 2 ]
+[ "`grep ^install tests/System/TemporaryFiles/modprobe.conf`" = "install dummy0 /System/AdminTools/modprobe -o dummy0 --ignore-install dummy0" ]
+[ "`grep ^options tests/System/TemporaryFiles/modprobe.conf`" = "options dummy0 dummy0-options" ]
diff -urN module-init-tools-3.2/tests/test-generate-modprobe.conf/03alias.sh module-init-tools-3.2-STEP/tests/test-generate-modprobe.conf/03alias.sh
--- module-init-tools-3.2/tests/test-generate-modprobe.conf/03alias.sh	2003-12-22 16:24:54.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-generate-modprobe.conf/03alias.sh	2006-04-27 00:45:53.378446368 +1200
@@ -1,29 +1,29 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test conversion of "alias" command.
 
-TESTING_MODPROBE_CONF=tests/tmp/modules.conf
+TESTING_MODPROBE_CONF=tests/System/TemporaryFiles/modules.conf
 export TESTING_MODPROBE_CONF
 
 # Simple.
-echo 'alias dummy0 dummy' > tests/tmp/modules.conf
-[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
-[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 1 ]
-[ "`grep ^alias tests/tmp/modprobe.conf`" = "alias dummy0 dummy" ]
+echo 'alias dummy0 dummy' > tests/System/TemporaryFiles/modules.conf
+[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
+[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 1 ]
+[ "`grep ^alias tests/System/TemporaryFiles/modprobe.conf`" = "alias dummy0 dummy" ]
 
 # Recursive
-echo 'alias dummy0 dummy' > tests/tmp/modules.conf
-echo 'alias dummy0-alias dummy0' >> tests/tmp/modules.conf
-[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
-[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 2 ]
-[ "`grep ^alias tests/tmp/modprobe.conf`" = "alias dummy0 dummy
+echo 'alias dummy0 dummy' > tests/System/TemporaryFiles/modules.conf
+echo 'alias dummy0-alias dummy0' >> tests/System/TemporaryFiles/modules.conf
+[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
+[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 2 ]
+[ "`grep ^alias tests/System/TemporaryFiles/modprobe.conf`" = "alias dummy0 dummy
 alias dummy0-alias dummy" ]
 
 # Chasing options (FIXME: FAILS)
-#echo 'options dummy0-alias dummy0-alias-options' >> tests/tmp/modules.conf
-#echo 'options dummy0 dummy0-options' >> tests/tmp/modules.conf
-#[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
-#[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 4 ]
-#[ "`grep ^alias tests/tmp/modprobe.conf`" = "alias dummy0 dummy
+#echo 'options dummy0-alias dummy0-alias-options' >> tests/System/TemporaryFiles/modules.conf
+#echo 'options dummy0 dummy0-options' >> tests/System/TemporaryFiles/modules.conf
+#[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
+#[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 4 ]
+#[ "`grep ^alias tests/System/TemporaryFiles/modprobe.conf`" = "alias dummy0 dummy
 #alias dummy0-alias dummy" ]
-#[ "`grep '^options dummy0 ' tests/tmp/modprobe.conf`" = "options dummy0 dummy0-options" ]
-#[ "`grep '^options dummy0-alias ' tests/tmp/modprobe.conf`" = "options dummy0-alias dummy0-options dummy0-alias-options" ]
+#[ "`grep '^options dummy0 ' tests/System/TemporaryFiles/modprobe.conf`" = "options dummy0 dummy0-options" ]
+#[ "`grep '^options dummy0-alias ' tests/System/TemporaryFiles/modprobe.conf`" = "options dummy0-alias dummy0-options dummy0-alias-options" ]
diff -urN module-init-tools-3.2/tests/test-generate-modprobe.conf/04blockalias.sh module-init-tools-3.2-STEP/tests/test-generate-modprobe.conf/04blockalias.sh
--- module-init-tools-3.2/tests/test-generate-modprobe.conf/04blockalias.sh	2003-12-22 16:18:17.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-generate-modprobe.conf/04blockalias.sh	2006-04-27 00:45:53.379446216 +1200
@@ -1,22 +1,22 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test conversion of "alias" command when they are block or char majors.
 # (now they need a wildcard for the minor).
 
-TESTING_MODPROBE_CONF=tests/tmp/modules.conf
+TESTING_MODPROBE_CONF=tests/System/TemporaryFiles/modules.conf
 export TESTING_MODPROBE_CONF
 
-echo 'alias char-major-17 a' > tests/tmp/modules.conf
-echo 'alias block-major-12 b' >> tests/tmp/modules.conf
+echo 'alias char-major-17 a' > tests/System/TemporaryFiles/modules.conf
+echo 'alias block-major-12 b' >> tests/System/TemporaryFiles/modules.conf
 
-[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
-[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 2 ]
-[ "`grep ^alias tests/tmp/modprobe.conf`" = "alias char-major-17-* a
+[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
+[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 2 ]
+[ "`grep ^alias tests/System/TemporaryFiles/modprobe.conf`" = "alias char-major-17-* a
 alias block-major-12-* b" ]
 
 # Recursive
-echo 'alias char-major-17 a-alias' > tests/tmp/modules.conf
-echo 'alias a-alias a' >> tests/tmp/modules.conf
-[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
-[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 2 ]
-[ "`grep ^alias tests/tmp/modprobe.conf`" = "alias char-major-17-* a
+echo 'alias char-major-17 a-alias' > tests/System/TemporaryFiles/modules.conf
+echo 'alias a-alias a' >> tests/System/TemporaryFiles/modules.conf
+[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
+[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 2 ]
+[ "`grep ^alias tests/System/TemporaryFiles/modprobe.conf`" = "alias char-major-17-* a
 alias a-alias a" ]
diff -urN module-init-tools-3.2/tests/test-generate-modprobe.conf/05off.sh module-init-tools-3.2-STEP/tests/test-generate-modprobe.conf/05off.sh
--- module-init-tools-3.2/tests/test-generate-modprobe.conf/05off.sh	2004-02-02 13:27:55.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-generate-modprobe.conf/05off.sh	2006-04-27 00:45:53.379446216 +1200
@@ -1,17 +1,17 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test conversion of "alias" command when they are for off or null.
 
-TESTING_MODPROBE_CONF=tests/tmp/modules.conf
+TESTING_MODPROBE_CONF=tests/System/TemporaryFiles/modules.conf
 export TESTING_MODPROBE_CONF
 
-echo 'alias net-pf-1 off' > tests/tmp/modules.conf
-echo 'alias net-pf-2 null' >> tests/tmp/modules.conf
-echo 'add alias net-pf-3 off' >> tests/tmp/modules.conf
-echo 'add alias net-pf-4 null' >> tests/tmp/modules.conf
+echo 'alias net-pf-1 off' > tests/System/TemporaryFiles/modules.conf
+echo 'alias net-pf-2 null' >> tests/System/TemporaryFiles/modules.conf
+echo 'add alias net-pf-3 off' >> tests/System/TemporaryFiles/modules.conf
+echo 'add alias net-pf-4 null' >> tests/System/TemporaryFiles/modules.conf
 
-[ "`generate-modprobe.conf > tests/tmp/modprobe.conf 2>&1`" = "" ]
-[ `grep -v '^#' < tests/tmp/modprobe.conf | wc -l` = 4 ]
-[ "`grep ^install tests/tmp/modprobe.conf`" = "install net-pf-1 /bin/true
-install net-pf-2 /bin/true
-install net-pf-3 /bin/true
-install net-pf-4 /bin/true" ]
+[ "`generate-modprobe.conf > tests/System/TemporaryFiles/modprobe.conf 2>&1`" = "" ]
+[ `grep -v '^#' < tests/System/TemporaryFiles/modprobe.conf | wc -l` = 4 ]
+[ "`grep ^install tests/System/TemporaryFiles/modprobe.conf`" = "install net-pf-1 /System/Tools/true
+install net-pf-2 /System/Tools/true
+install net-pf-3 /System/Tools/true
+install net-pf-4 /System/Tools/true" ]
diff -urN module-init-tools-3.2/tests/test-insmod/01backcompat.sh module-init-tools-3.2-STEP/tests/test-insmod/01backcompat.sh
--- module-init-tools-3.2/tests/test-insmod/01backcompat.sh	2002-12-28 19:20:59.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-insmod/01backcompat.sh	2006-04-27 00:45:53.380446064 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 MODTEST_DO_CREATE_MODULE=1
 export MODTEST_DO_CREATE_MODULE
@@ -7,11 +7,11 @@
 [ "`./insmod 2>&1`" = "Kernel requires old insmod, but couldn't run ./insmod.old: No such file or directory" ]
 
 # Create one for it to find, put it in the path
-echo '#! /bin/sh' > tests/tmp/insmod.old
-echo 'echo -n INSMOD.OLD' >> tests/tmp/insmod.old
-echo "for f; do echo -n \ \'\$f\'; done" >> tests/tmp/insmod.old
-chmod a+x tests/tmp/insmod.old
-PATH=`pwd`/tests/tmp:$PATH
+echo '#! /System/Tools/sh' > tests/System/TemporaryFiles/insmod.old
+echo 'echo -n INSMOD.OLD' >> tests/System/TemporaryFiles/insmod.old
+echo "for f; do echo -n \ \'\$f\'; done" >> tests/System/TemporaryFiles/insmod.old
+chmod a+x tests/System/TemporaryFiles/insmod.old
+PATH=`pwd`/tests/System/TemporaryFiles:$PATH
 
 # If explicit path given, shouldn't search path.
 [ "`./insmod 2>&1`" = "Kernel requires old insmod, but couldn't run ./insmod.old: No such file or directory" ]
diff -urN module-init-tools-3.2/tests/test-insmod/02simple.sh module-init-tools-3.2-STEP/tests/test-insmod/02simple.sh
--- module-init-tools-3.2/tests/test-insmod/02simple.sh	2003-09-29 16:13:49.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-insmod/02simple.sh	2006-04-27 00:45:53.380446064 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 # If it doesn't exist, kill it.
 [ "`insmod nonexistent-file 2>&1`" = "insmod: can't read 'nonexistent-file': No such file or directory" ]
diff -urN module-init-tools-3.2/tests/test-insmod/03options.sh module-init-tools-3.2-STEP/tests/test-insmod/03options.sh
--- module-init-tools-3.2/tests/test-insmod/03options.sh	2004-03-31 13:30:48.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-insmod/03options.sh	2006-04-27 00:45:53.381445912 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 SIZE=$(echo `wc -c < tests/test-insmod/02simple.sh`)
 # Old options are ignored.
diff -urN module-init-tools-3.2/tests/test-insmod/04stdin.sh module-init-tools-3.2-STEP/tests/test-insmod/04stdin.sh
--- module-init-tools-3.2/tests/test-insmod/04stdin.sh	2003-09-29 16:17:29.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-insmod/04stdin.sh	2006-04-27 00:45:53.381445912 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 SIZE=$(echo `wc -c < tests/test-insmod/02simple.sh`)
 [ "`insmod - < tests/test-insmod/02simple.sh`" = "INIT_MODULE: $SIZE " ]
diff -urN module-init-tools-3.2/tests/test-lsmod/01empty.sh module-init-tools-3.2-STEP/tests/test-lsmod/01empty.sh
--- module-init-tools-3.2/tests/test-lsmod/01empty.sh	2002-12-21 20:00:33.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-lsmod/01empty.sh	2006-04-27 00:45:53.382445760 +1200
@@ -1,7 +1,7 @@
-#! /bin/sh
+#! /System/Tools/sh
 
-MODTEST_OVERRIDE1=/proc/modules
-MODTEST_OVERRIDE_WITH1=/dev/null
+MODTEST_OVERRIDE1=/System/Processes/modules
+MODTEST_OVERRIDE_WITH1=/System/Devices/null
 
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
diff -urN module-init-tools-3.2/tests/test-lsmod/02backcompat.sh module-init-tools-3.2-STEP/tests/test-lsmod/02backcompat.sh
--- module-init-tools-3.2/tests/test-lsmod/02backcompat.sh	2002-12-28 19:20:55.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-lsmod/02backcompat.sh	2006-04-27 00:45:53.383445608 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 MODTEST_DO_CREATE_MODULE=1
 export MODTEST_DO_CREATE_MODULE
@@ -7,11 +7,11 @@
 [ "`./lsmod 2>&1`" = "Kernel requires old lsmod, but couldn't run ./lsmod.old: No such file or directory" ]
 
 # Create one for it to find, put it in the path
-echo '#! /bin/sh' > tests/tmp/lsmod.old
-echo 'echo -n LSMOD.OLD' >> tests/tmp/lsmod.old
-echo "for f; do echo -n \ \'\$f\'; done" >> tests/tmp/lsmod.old
-chmod a+x tests/tmp/lsmod.old
-PATH=`pwd`/tests/tmp:$PATH
+echo '#! /System/Tools/sh' > tests/System/TemporaryFiles/lsmod.old
+echo 'echo -n LSMOD.OLD' >> tests/System/TemporaryFiles/lsmod.old
+echo "for f; do echo -n \ \'\$f\'; done" >> tests/System/TemporaryFiles/lsmod.old
+chmod a+x tests/System/TemporaryFiles/lsmod.old
+PATH=`pwd`/tests/System/TemporaryFiles:$PATH
 
 # If explicit path given, shouldn't search path.
 [ "`./lsmod 2>&1`" = "Kernel requires old lsmod, but couldn't run ./lsmod.old: No such file or directory" ]
diff -urN module-init-tools-3.2/tests/test-lsmod/03oldstyle.sh module-init-tools-3.2-STEP/tests/test-lsmod/03oldstyle.sh
--- module-init-tools-3.2/tests/test-lsmod/03oldstyle.sh	2002-12-21 22:34:20.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-lsmod/03oldstyle.sh	2006-04-27 00:45:53.384445456 +1200
@@ -1,18 +1,18 @@
-#! /bin/sh
+#! /System/Tools/sh
 
-MODTEST_OVERRIDE1=/proc/modules
-MODTEST_OVERRIDE_WITH1=tests/tmp/oldproc
+MODTEST_OVERRIDE1=/System/Processes/modules
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/oldproc
 
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 # Old style has dependencies like: "name size usecount [dep] [dep]..."
-echo 'foo 100 0' > tests/tmp/oldproc
-echo 'bar 101 1' >> tests/tmp/oldproc
-echo 'baz 102 1 baz_dep' >> tests/tmp/oldproc
-echo 'bazz 2147483648 2147483648 bazz_dep bazz_dep2' >> tests/tmp/oldproc
-echo 'fuzz 104 1 fuzz_dep [permenant]' >> tests/tmp/oldproc
-echo 'fuzzy 105 1 fuzzy_dep [permenant] [unsafe]' >> tests/tmp/oldproc
-echo 'fuzzier 106 0 [permenant] [unsafe]' >> tests/tmp/oldproc
+echo 'foo 100 0' > tests/System/TemporaryFiles/oldproc
+echo 'bar 101 1' >> tests/System/TemporaryFiles/oldproc
+echo 'baz 102 1 baz_dep' >> tests/System/TemporaryFiles/oldproc
+echo 'bazz 2147483648 2147483648 bazz_dep bazz_dep2' >> tests/System/TemporaryFiles/oldproc
+echo 'fuzz 104 1 fuzz_dep [permenant]' >> tests/System/TemporaryFiles/oldproc
+echo 'fuzzy 105 1 fuzzy_dep [permenant] [unsafe]' >> tests/System/TemporaryFiles/oldproc
+echo 'fuzzier 106 0 [permenant] [unsafe]' >> tests/System/TemporaryFiles/oldproc
 
 [ "`lsmod`" = "Module                  Size  Used by
 foo                      100  0 
@@ -24,8 +24,8 @@
 fuzzier                  106  0 [permenant] [unsafe]" ]
 
 # If CONFIG_MODULE_UNLOAD=n: simply "name size"
-echo 'baz 102' > tests/tmp/oldproc
-echo 'bazz 2147483648' >> tests/tmp/oldproc
+echo 'baz 102' > tests/System/TemporaryFiles/oldproc
+echo 'bazz 2147483648' >> tests/System/TemporaryFiles/oldproc
 
 [ "`lsmod`" = "Module                  Size  Used by
 baz                      102
diff -urN module-init-tools-3.2/tests/test-lsmod/04newstyle.sh module-init-tools-3.2-STEP/tests/test-lsmod/04newstyle.sh
--- module-init-tools-3.2/tests/test-lsmod/04newstyle.sh	2002-12-21 22:57:24.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-lsmod/04newstyle.sh	2006-04-27 00:45:53.384445456 +1200
@@ -1,20 +1,20 @@
-#! /bin/sh
+#! /System/Tools/sh
 
-MODTEST_OVERRIDE1=/proc/modules
-MODTEST_OVERRIDE_WITH1=tests/tmp/newproc
+MODTEST_OVERRIDE1=/System/Processes/modules
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/newproc
 
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 # new style has dependencies like: "name size usecount [dep],[dep] [other]"
-echo 'foo 100 0 -' > tests/tmp/newproc
-echo 'bar 101 1 -' >> tests/tmp/newproc
-echo 'baz 102 1 baz_dep,' >> tests/tmp/newproc
-echo 'bazz 2147483648 2147483648 bazz_dep,bazz_dep2,' >> tests/tmp/newproc
-echo 'fuzz 104 1 fuzz_dep,[permenant],' >> tests/tmp/newproc
-echo 'fuzzy 105 1 fuzzy_dep,[permenant],[unsafe],' >> tests/tmp/newproc
-echo 'fuzzier 106 0 [permenant],[unsafe],' >> tests/tmp/newproc
-echo 'newstyle 107 0 - unknownfield' >> tests/tmp/newproc
-echo 'newstyle2 108 0 newstyle2_dep, unknownfield unknownfield2' >> tests/tmp/newproc
+echo 'foo 100 0 -' > tests/System/TemporaryFiles/newproc
+echo 'bar 101 1 -' >> tests/System/TemporaryFiles/newproc
+echo 'baz 102 1 baz_dep,' >> tests/System/TemporaryFiles/newproc
+echo 'bazz 2147483648 2147483648 bazz_dep,bazz_dep2,' >> tests/System/TemporaryFiles/newproc
+echo 'fuzz 104 1 fuzz_dep,[permenant],' >> tests/System/TemporaryFiles/newproc
+echo 'fuzzy 105 1 fuzzy_dep,[permenant],[unsafe],' >> tests/System/TemporaryFiles/newproc
+echo 'fuzzier 106 0 [permenant],[unsafe],' >> tests/System/TemporaryFiles/newproc
+echo 'newstyle 107 0 - unknownfield' >> tests/System/TemporaryFiles/newproc
+echo 'newstyle2 108 0 newstyle2_dep, unknownfield unknownfield2' >> tests/System/TemporaryFiles/newproc
 
 # This should be true
 [ "`lsmod`" = "Module                  Size  Used by
diff -urN module-init-tools-3.2/tests/test-modinfo/01backcompat.sh module-init-tools-3.2-STEP/tests/test-modinfo/01backcompat.sh
--- module-init-tools-3.2/tests/test-modinfo/01backcompat.sh	2003-08-16 03:32:35.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modinfo/01backcompat.sh	2006-04-27 00:45:53.385445304 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 MODTEST_DO_CREATE_MODULE=1
 export MODTEST_DO_CREATE_MODULE
@@ -7,11 +7,11 @@
 [ "`./modinfo 2>&1`" = "Kernel requires old modinfo, but couldn't run ./modinfo.old: No such file or directory" ]
 
 # Create one for it to find, put it in the path
-echo '#! /bin/sh' > tests/tmp/modinfo.old
-echo 'echo -n MODINFO.OLD' >> tests/tmp/modinfo.old
-echo "for f; do echo -n \ \'\$f\'; done" >> tests/tmp/modinfo.old
-chmod a+x tests/tmp/modinfo.old
-PATH=`pwd`/tests/tmp:$PATH
+echo '#! /System/Tools/sh' > tests/System/TemporaryFiles/modinfo.old
+echo 'echo -n MODINFO.OLD' >> tests/System/TemporaryFiles/modinfo.old
+echo "for f; do echo -n \ \'\$f\'; done" >> tests/System/TemporaryFiles/modinfo.old
+chmod a+x tests/System/TemporaryFiles/modinfo.old
+PATH=`pwd`/tests/System/TemporaryFiles:$PATH
 
 # If explicit path given, shouldn't search path.
 [ "`./modinfo 2>&1`" = "Kernel requires old modinfo, but couldn't run ./modinfo.old: No such file or directory" ]
diff -urN module-init-tools-3.2/tests/test-modinfo/02all.sh module-init-tools-3.2-STEP/tests/test-modinfo/02all.sh
--- module-init-tools-3.2/tests/test-modinfo/02all.sh	2005-01-18 16:55:47.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modinfo/02all.sh	2006-04-27 00:45:53.386445152 +1200
@@ -1,24 +1,24 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 # Test modinfo extraction: works for *any* endiannes.
 for ENDIAN in -le -be; do
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/modinfo-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/modinfo-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS$ENDIAN/modinfo/modinfo-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-echo "/lib/modules/$MODTEST_UNAME/modinfo-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/modinfo-crap-$BITNESS.ko" > tests/tmp/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/modinfo-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/modinfo-crap-$BITNESS.ko" > tests/System/TemporaryFiles/modules.dep
 
 # Found by reading modules.dep
 OUTPUT1=`modinfo modinfo-$BITNESS 2>&1 | md5sum`
 # Found by absolute path.
-OUTPUT2=`modinfo /lib/modules/$MODTEST_UNAME/modinfo-$BITNESS.ko 2>&1 | md5sum`
+OUTPUT2=`modinfo /System/Drivers/$MODTEST_UNAME/modinfo-$BITNESS.ko 2>&1 | md5sum`
 
 # Same except for filename
 [ x"$OUTPUT1" = x"$OUTPUT2" ]
@@ -39,7 +39,7 @@
 [ "`echo "$OUTPUT" | grep ' undescribed'`" =         "parm:           undescribed:int" ]
 
 # Test filename from modules.dep
-[ "`modinfo modinfo-$BITNESS | grep filename`" =    "filename:       /lib/modules/$MODTEST_UNAME/modinfo-$BITNESS.ko" ]
+[ "`modinfo modinfo-$BITNESS | grep filename`" =    "filename:       /System/Drivers/$MODTEST_UNAME/modinfo-$BITNESS.ko" ]
 
 # Test multiple modules on cmdline.
 [ `modinfo tests/data/$BITNESS$ENDIAN/modinfo/modinfo-$BITNESS.ko tests/data/$BITNESS$ENDIAN/modinfo/modinfo-$BITNESS.ko 2>&1 | wc -l` -eq 20 ]
diff -urN module-init-tools-3.2/tests/test-modinfo/03field.sh module-init-tools-3.2-STEP/tests/test-modinfo/03field.sh
--- module-init-tools-3.2/tests/test-modinfo/03field.sh	2005-01-18 16:33:28.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modinfo/03field.sh	2006-04-27 00:45:53.387445000 +1200
@@ -1,19 +1,19 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 # Test modinfo extraction: works for *any* endiannes.
 for ENDIAN in -le -be; do
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/modinfo-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/modinfo-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS$ENDIAN/modinfo/modinfo-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-echo "/lib/modules/$MODTEST_UNAME/modinfo-$BITNESS.ko: /lib/modules/$MODTEST_UNAME/modinfo-crap-$BITNESS.ko" > tests/tmp/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/modinfo-$BITNESS.ko: /System/Drivers/$MODTEST_UNAME/modinfo-crap-$BITNESS.ko" > tests/System/TemporaryFiles/modules.dep
 
 # Test individual field extraction: by module search and abs. path
 for file in modinfo-$BITNESS tests/data/$BITNESS$ENDIAN/modinfo/modinfo-$BITNESS.ko; do
@@ -39,8 +39,8 @@
 done
 
 # Test filename output
-[ "`modinfo -F filename modinfo-$BITNESS 2>&1`" = "/lib/modules/$MODTEST_UNAME/modinfo-$BITNESS.ko" ]
-[ "`modinfo -n modinfo-$BITNESS 2>&1`" = "/lib/modules/$MODTEST_UNAME/modinfo-$BITNESS.ko" ]
+[ "`modinfo -F filename modinfo-$BITNESS 2>&1`" = "/System/Drivers/$MODTEST_UNAME/modinfo-$BITNESS.ko" ]
+[ "`modinfo -n modinfo-$BITNESS 2>&1`" = "/System/Drivers/$MODTEST_UNAME/modinfo-$BITNESS.ko" ]
 [ "`modinfo -F filename tests/data/$BITNESS$ENDIAN/modinfo/modinfo-$BITNESS.ko 2>&1`" = "tests/data/$BITNESS$ENDIAN/modinfo/modinfo-$BITNESS.ko" ]
 [ "`modinfo -n tests/data/$BITNESS$ENDIAN/modinfo/modinfo-$BITNESS.ko 2>&1`" = "tests/data/$BITNESS$ENDIAN/modinfo/modinfo-$BITNESS.ko" ]
 
diff -urN module-init-tools-3.2/tests/test-modinfo/04compressed.sh module-init-tools-3.2-STEP/tests/test-modinfo/04compressed.sh
--- module-init-tools-3.2/tests/test-modinfo/04compressed.sh	2005-01-18 16:36:53.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modinfo/04compressed.sh	2006-04-27 00:45:53.388444848 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test modinfo extraction on compressed modules.
 
 [ -n "$CONFIG_HAVE_ZLIB" ] || exit 0
@@ -6,21 +6,21 @@
 for ENDIAN in -le -be; do
 for BITNESS in 32 64; do
 
-gzip < tests/data/$BITNESS$ENDIAN/modinfo/modinfo-$BITNESS.ko > tests/tmp/modinfo-$BITNESS.ko.gz
+gzip < tests/data/$BITNESS$ENDIAN/modinfo/modinfo-$BITNESS.ko > tests/System/TemporaryFiles/modinfo-$BITNESS.ko.gz
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/modinfo-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH2=tests/tmp/modinfo-$BITNESS.ko.gz
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/modinfo-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/modinfo-$BITNESS.ko.gz
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-echo "/lib/modules/$MODTEST_UNAME/modinfo-$BITNESS.ko.gz: /lib/modules/$MODTEST_UNAME/modinfo-crap-$BITNESS.ko.gz" > tests/tmp/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/modinfo-$BITNESS.ko.gz: /System/Drivers/$MODTEST_UNAME/modinfo-crap-$BITNESS.ko.gz" > tests/System/TemporaryFiles/modules.dep
 
 # Test individual field extraction: by module search and abs. path
-for file in modinfo-$BITNESS tests/tmp/modinfo-$BITNESS.ko.gz; do
+for file in modinfo-$BITNESS tests/System/TemporaryFiles/modinfo-$BITNESS.ko.gz; do
     [ "`modinfo -F randomcrap $file 2>&1`" = "my random crap which I use to test stuff with" ]
     [ "`modinfo -F vermagic $file 2>&1`" = "my magic" ]
     [ "`modinfo -F author $file 2>&1`" = "AUTHOR" ]
@@ -41,11 +41,11 @@
 done
 
 # Test multiple modules on cmdline.
-[ "`modinfo -F vermagic tests/tmp/modinfo-$BITNESS.ko.gz tests/tmp/modinfo-$BITNESS.ko.gz 2>&1`" = "my magic
+[ "`modinfo -F vermagic tests/System/TemporaryFiles/modinfo-$BITNESS.ko.gz tests/System/TemporaryFiles/modinfo-$BITNESS.ko.gz 2>&1`" = "my magic
 my magic" ]
 
 # Test 0-fill
-[ "`modinfo -0 -F alias tests/tmp/modinfo-$BITNESS.ko.gz 2>&1 | tr '\000' @`" = "ALIAS1@ALIAS2@" ]
+[ "`modinfo -0 -F alias tests/System/TemporaryFiles/modinfo-$BITNESS.ko.gz 2>&1 | tr '\000' @`" = "ALIAS1@ALIAS2@" ]
 
 done
 done
diff -urN module-init-tools-3.2/tests/test-modprobe/01backcompat.sh module-init-tools-3.2-STEP/tests/test-modprobe/01backcompat.sh
--- module-init-tools-3.2/tests/test-modprobe/01backcompat.sh	2002-12-28 19:21:36.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/01backcompat.sh	2006-04-27 00:45:53.388444848 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 MODTEST_DO_CREATE_MODULE=1
 export MODTEST_DO_CREATE_MODULE
@@ -7,11 +7,11 @@
 [ "`./modprobe 2>&1`" = "Kernel requires old modprobe, but couldn't run ./modprobe.old: No such file or directory" ]
 
 # Create one for it to find, put it in the path
-echo '#! /bin/sh' > tests/tmp/modprobe.old
-echo 'echo -n MODPROBE.OLD' >> tests/tmp/modprobe.old
-echo "for f; do echo -n \ \'\$f\'; done" >> tests/tmp/modprobe.old
-chmod a+x tests/tmp/modprobe.old
-PATH=`pwd`/tests/tmp:$PATH
+echo '#! /System/Tools/sh' > tests/System/TemporaryFiles/modprobe.old
+echo 'echo -n MODPROBE.OLD' >> tests/System/TemporaryFiles/modprobe.old
+echo "for f; do echo -n \ \'\$f\'; done" >> tests/System/TemporaryFiles/modprobe.old
+chmod a+x tests/System/TemporaryFiles/modprobe.old
+PATH=`pwd`/tests/System/TemporaryFiles:$PATH
 
 # If explicit path given, shouldn't search path.
 [ "`./modprobe 2>&1`" = "Kernel requires old modprobe, but couldn't run ./modprobe.old: No such file or directory" ]
diff -urN module-init-tools-3.2/tests/test-modprobe/02proc.sh module-init-tools-3.2-STEP/tests/test-modprobe/02proc.sh
--- module-init-tools-3.2/tests/test-modprobe/02proc.sh	2003-12-30 13:52:41.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/02proc.sh	2006-04-27 00:46:00.422375528 +1200
@@ -1,49 +1,49 @@
-#! /bin/sh
+#! /System/Tools/sh
 
-# Test handling of /proc/modules.
+# Test handling of /System/Processes/modules.
 
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH4=tests/tmp/modules.dep
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
 MODTEST_OVERRIDE5=/etc/modprobe.conf
 MODTEST_OVERRIDE_WITH5=FILE-WHICH-DOESNT-EXIST
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH6=tests/tmp/modules.dep
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH6=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
-MODTEST_OVERRIDE7=/proc/modules
-MODTEST_OVERRIDE_WITH7=tests/tmp/proc
+MODTEST_OVERRIDE7=/System/Processes/modules
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/System/Processes
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
 # Now create modules.dep
-cat > tests/tmp/modules.dep <<EOF
-/lib/modules/2.5.52/noexport_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/export_nodep-$BITNESS.ko:
+cat > tests/System/TemporaryFiles/modules.dep <<EOF
+/System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/export_nodep-$BITNESS.ko:
 EOF
 
 SIZE_NOEXPORT_NODEP=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko`)
 SIZE_EXPORT_NODEP=$(echo `wc -c < tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko`)
 
-# If it can't open /proc/modules, it should try anyway.
-rm -f tests/tmp/proc
+# If it can't open /System/Processes/modules, it should try anyway.
+rm -f tests/System/TemporaryFiles/System/Processes
 
 [ "`modprobe noexport_nodep-$BITNESS 2>&1`" = "INIT_MODULE: $SIZE_NOEXPORT_NODEP " ]
 [ "`modprobe export_nodep-$BITNESS 2>&1`" = "INIT_MODULE: $SIZE_EXPORT_NODEP " ]
@@ -51,8 +51,8 @@
 [ "`modprobe -r noexport_nodep-$BITNESS 2>&1`" = "DELETE_MODULE: noexport_nodep_$BITNESS EXCL " ]
 [ "`modprobe -r export_nodep-$BITNESS 2>&1`" = "DELETE_MODULE: export_nodep_$BITNESS EXCL " ]
 
-# If it doesn't exist in /proc/modules, remove should succeed.
-touch tests/tmp/proc
+# If it doesn't exist in /System/Processes/modules, remove should succeed.
+touch tests/System/TemporaryFiles/System/Processes
 [ "`modprobe noexport_nodep-$BITNESS 2>&1`" = "INIT_MODULE: $SIZE_NOEXPORT_NODEP " ]
 [ "`modprobe export_nodep-$BITNESS 2>&1`" = "INIT_MODULE: $SIZE_EXPORT_NODEP " ]
 [ "`modprobe -r -v noexport_nodep-$BITNESS 2>&1; echo $?`" = "0" ]
@@ -65,9 +65,9 @@
 [ "`modprobe --first-time -r noexport-nodep-$BITNESS 2>&1; echo $?`" = "FATAL: Module noexport_nodep_$BITNESS is not in kernel." ]
 [ "`modprobe --first-time -r export-nodep-$BITNESS 2>&1; echo $?`" = "FATAL: Module export_nodep_$BITNESS is not in kernel." ]
 
-# Old-style /proc (no unload support).
-echo "noexport_nodep_$BITNESS $SIZE_NOEXPORT_NODEP" > tests/tmp/proc
-echo "export_nodep_$BITNESS $SIZE_EXPORT_NODEP" >> tests/tmp/proc
+# Old-style /System/Processes (no unload support).
+echo "noexport_nodep_$BITNESS $SIZE_NOEXPORT_NODEP" > tests/System/TemporaryFiles/System/Processes
+echo "export_nodep_$BITNESS $SIZE_EXPORT_NODEP" >> tests/System/TemporaryFiles/System/Processes
 
 # If it does exist, insertion should "succeed".
 [ "`modprobe -v noexport_nodep-$BITNESS 2>&1; echo $?`" = "0" ]
@@ -84,9 +84,9 @@
 [ "`modprobe -r noexport_nodep-$BITNESS 2>&1`" = "DELETE_MODULE: noexport_nodep_$BITNESS EXCL " ]
 [ "`modprobe -r export_nodep-$BITNESS 2>&1`" = "DELETE_MODULE: export_nodep_$BITNESS EXCL " ]
 
-# New-style /proc without unload support
-echo "noexport_nodep_$BITNESS $SIZE_NOEXPORT_NODEP - -" > tests/tmp/proc
-echo "export_nodep_$BITNESS $SIZE_EXPORT_NODEP - -" >> tests/tmp/proc
+# New-style /System/Processes without unload support
+echo "noexport_nodep_$BITNESS $SIZE_NOEXPORT_NODEP - -" > tests/System/TemporaryFiles/System/Processes
+echo "export_nodep_$BITNESS $SIZE_EXPORT_NODEP - -" >> tests/System/TemporaryFiles/System/Processes
 
 [ "`modprobe --first-time noexport_nodep-$BITNESS 2>&1`" = "FATAL: Module noexport_nodep_$BITNESS already in kernel." ]
 [ "`modprobe --first-time export_nodep-$BITNESS 2>&1`" = "FATAL: Module export_nodep_$BITNESS already in kernel." ]
@@ -97,17 +97,17 @@
 [ "`modprobe -r export_nodep-$BITNESS 2>&1`" = "DELETE_MODULE: export_nodep_$BITNESS EXCL " ]
 
 # Should fail if refcounts non-zero.  Old-style
-echo "noexport_nodep_$BITNESS $SIZE_NOEXPORT_NODEP 1" > tests/tmp/proc
-echo "export_nodep_$BITNESS $SIZE_EXPORT_NODEP 1" >> tests/tmp/proc
+echo "noexport_nodep_$BITNESS $SIZE_NOEXPORT_NODEP 1" > tests/System/TemporaryFiles/System/Processes
+echo "export_nodep_$BITNESS $SIZE_EXPORT_NODEP 1" >> tests/System/TemporaryFiles/System/Processes
 
 [ "`modprobe -r noexport_nodep-$BITNESS 2>&1`" = "FATAL: Module noexport_nodep_$BITNESS is in use." ]
 [ "`modprobe -r export_nodep-$BITNESS 2>&1`" = "FATAL: Module export_nodep_$BITNESS is in use." ]
 [ "`modprobe -r noexport-nodep-$BITNESS 2>&1`" = "FATAL: Module noexport_nodep_$BITNESS is in use." ]
 [ "`modprobe -r export-nodep-$BITNESS 2>&1`" = "FATAL: Module export_nodep_$BITNESS is in use." ]
 
-# New-style /proc
-echo "noexport_nodep_$BITNESS $SIZE_NOEXPORT_NODEP 1 -" > tests/tmp/proc
-echo "export_nodep_$BITNESS $SIZE_EXPORT_NODEP 1 something_else, extrafield" >> tests/tmp/proc
+# New-style /System/Processes
+echo "noexport_nodep_$BITNESS $SIZE_NOEXPORT_NODEP 1 -" > tests/System/TemporaryFiles/System/Processes
+echo "export_nodep_$BITNESS $SIZE_EXPORT_NODEP 1 something_else, extrafield" >> tests/System/TemporaryFiles/System/Processes
 
 [ "`modprobe --first-time noexport_nodep-$BITNESS 2>&1`" = "FATAL: Module noexport_nodep_$BITNESS already in kernel." ]
 [ "`modprobe --first-time export_nodep-$BITNESS 2>&1`" = "FATAL: Module export_nodep_$BITNESS already in kernel." ]
diff -urN module-init-tools-3.2/tests/test-modprobe/02simple.sh module-init-tools-3.2-STEP/tests/test-modprobe/02simple.sh
--- module-init-tools-3.2/tests/test-modprobe/02simple.sh	2004-03-31 13:54:50.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/02simple.sh	2006-04-27 00:46:00.423375376 +1200
@@ -1,22 +1,22 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 for BITNESS in 32 64; do
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
 MODTEST_OVERRIDE3=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH3=tests/tmp/DOES_NOT_EXIST
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/DOES_NOT_EXIST
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
 # Set up modules.dep file.
-echo "# A comment" > tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" >> tests/tmp/modules.dep
+echo "# A comment" > tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" >> tests/System/TemporaryFiles/modules.dep
 
 SIZE=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko`)
 
diff -urN module-init-tools-3.2/tests/test-modprobe/03deps.sh module-init-tools-3.2-STEP/tests/test-modprobe/03deps.sh
--- module-init-tools-3.2/tests/test-modprobe/03deps.sh	2004-03-30 15:16:50.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/03deps.sh	2006-04-27 00:46:00.425375072 +1200
@@ -1,57 +1,57 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test module dependencies.
 
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS/normal/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
 MODTEST_OVERRIDE8=/etc/modprobe.conf
 MODTEST_OVERRIDE_WITH8=FILE-WHICH-DOESNT-EXIST
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.dep
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/proc/modules
-MODTEST_OVERRIDE_WITH10=tests/tmp/proc
+MODTEST_OVERRIDE10=/System/Processes/modules
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/System/Processes
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
 # Now create modules.dep
-cat > tests/tmp/modules.dep <<EOF
+cat > tests/System/TemporaryFiles/modules.dep <<EOF
 # Should handle comments.
-/lib/modules/2.5.52/noexport_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko: /lib/modules/2.5.52/export_dep-$BITNESS.ko /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/noexport_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/export_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/export_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko: /System/Drivers/2.5.52/export_dep-$BITNESS.ko /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/noexport_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/export_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/export_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
 EOF
 
 # Insertion
@@ -62,7 +62,7 @@
 SIZE_NOEXPORT_DOUBLEDEP=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_doubledep-$BITNESS.ko`)
 
 # Empty proc
-touch tests/tmp/proc
+touch tests/System/TemporaryFiles/System/Processes
 
 [ "`modprobe noexport_nodep-$BITNESS 2>&1`" = "INIT_MODULE: $SIZE_NOEXPORT_NODEP " ]
 [ "`modprobe noexport_nodep-$BITNESS OPTIONS 2>&1`" = "INIT_MODULE: $SIZE_NOEXPORT_NODEP OPTIONS" ]
@@ -88,7 +88,7 @@
 INIT_MODULE: $SIZE_NOEXPORT_DOUBLEDEP OPTIONS" ]
 
 # All in proc
-cat > tests/tmp/proc <<EOF
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 noexport_nodep_$BITNESS 100 0 -
 export_nodep_$BITNESS 100 0 -
 noexport_dep_$BITNESS 100 0 export_nodep_$BITNESS,
@@ -108,7 +108,7 @@
 DELETE_MODULE: export_nodep_$BITNESS EXCL " ]
 
 # Removal with renaming.
-cat > tests/tmp/proc <<EOF
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 noexport_nodep_$BITNESS 100 0 -
 export_nodep_$BITNESS 100 0 -
 noexport_dep_$BITNESS 100 0 export_nodep_$BITNESS,
diff -urN module-init-tools-3.2/tests/test-modprobe/03underscores.sh module-init-tools-3.2-STEP/tests/test-modprobe/03underscores.sh
--- module-init-tools-3.2/tests/test-modprobe/03underscores.sh	2004-06-15 14:21:23.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/03underscores.sh	2006-04-27 00:46:00.427374768 +1200
@@ -1,44 +1,44 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Check underscore synonymity everywhere.
 
 for BITNESS in 32 64; do
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
 MODTEST_OVERRIDE3=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH3=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
 MODTEST_OVERRIDE4=include-_
-MODTEST_OVERRIDE_WITH4=tests/tmp/modprobe.conf.included
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/modprobe.conf.included
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/proc/modules
+MODTEST_OVERRIDE5=/System/Processes/modules
 MODTEST_OVERRIDE_WITH5=FILE-WHICH-DOESNT-EXIST
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Set up modules.dep file.
-echo "# A comment" > tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" >> tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko:" >> tests/tmp/modules.dep
+echo "# A comment" > tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" >> tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko:" >> tests/System/TemporaryFiles/modules.dep
 
 # Set up config file.
-echo "alias alias-_ noexport-nodep_$BITNESS" > tests/tmp/modprobe.conf
-echo "options export-nodep_$BITNESS option-_" >> tests/tmp/modprobe.conf
-echo "install test-_ echo install-_" >> tests/tmp/modprobe.conf
-echo "remove test-_ echo remove-_" >> tests/tmp/modprobe.conf
-echo "include include-_" >> tests/tmp/modprobe.conf
-echo "install test-include echo Included" >> tests/tmp/modprobe.conf.included
+echo "alias alias-_ noexport-nodep_$BITNESS" > tests/System/TemporaryFiles/modprobe.conf
+echo "options export-nodep_$BITNESS option-_" >> tests/System/TemporaryFiles/modprobe.conf
+echo "install test-_ echo install-_" >> tests/System/TemporaryFiles/modprobe.conf
+echo "remove test-_ echo remove-_" >> tests/System/TemporaryFiles/modprobe.conf
+echo "include include-_" >> tests/System/TemporaryFiles/modprobe.conf
+echo "install test-include echo Included" >> tests/System/TemporaryFiles/modprobe.conf.included
 
 SIZE1=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko`)
 SIZE2=$(echo `wc -c < tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko`)
diff -urN module-init-tools-3.2/tests/test-modprobe/04config.sh module-init-tools-3.2-STEP/tests/test-modprobe/04config.sh
--- module-init-tools-3.2/tests/test-modprobe/04config.sh	2003-09-29 18:04:49.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/04config.sh	2006-04-27 00:46:00.431374160 +1200
@@ -1,18 +1,18 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test configuration file handling.
 
 for BITNESS in 32 64; do
 
 # Simple dump out test.
-[ "`modprobe -C /dev/null -c 2>&1`" = "" ]
-[ "`modprobe --config /dev/null --showconfig 2>&1`" = "" ]
+[ "`modprobe -C /System/Devices/null -c 2>&1`" = "" ]
+[ "`modprobe --config /System/Devices/null --showconfig 2>&1`" = "" ]
 
 # Explicitly mentioned config files must exist.
 [ "`modprobe -C FILE-WHICH-DOESNT-EXIST foo 2>&1`" = "FATAL: Failed to open config file FILE-WHICH-DOESNT-EXIST: No such file or directory" ]
 
 # Default one doesn't have to.
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=/dev/null
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=/System/Devices/null
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 MODTEST_OVERRIDE2=/etc/modprobe.conf
@@ -21,7 +21,7 @@
 [ "`modprobe foo 2>&1`" = "FATAL: Module foo not found." ]
 
 # Create a simple config file.
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 # Various aliases
 alias alias_to_foo foo
 alias alias_to_bar bar
@@ -57,11 +57,11 @@
 remove export_nodep-$BITNESS echo Removing export_nodep
 
 # Finally, an include
-include tests/tmp/modprobe.conf.included
+include tests/System/TemporaryFiles/modprobe.conf.included
 EOF
 
 # Now create this included file
-cat > tests/tmp/modprobe.conf.included <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf.included <<EOF
 install baz echo Installing baz
 remove baz echo Removing baz
 
@@ -69,57 +69,57 @@
 EOF
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS/normal/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
 MODTEST_OVERRIDE8=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH8=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
 MODTEST_OVERRIDE9=/etc/modprobe.conf.included
-MODTEST_OVERRIDE_WITH9=tests/tmp/modprobe.conf.included
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modprobe.conf.included
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.dep
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/proc/modules
+MODTEST_OVERRIDE11=/System/Processes/modules
 MODTEST_OVERRIDE_WITH11=FILE-WHICH-DOESNT-EXIST
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
 # Now create modules.dep
-cat > tests/tmp/modules.dep <<EOF
-/lib/modules/2.5.52/noexport_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko: /lib/modules/2.5.52/export_dep-$BITNESS.ko /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/noexport_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/export_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/export_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
+cat > tests/System/TemporaryFiles/modules.dep <<EOF
+/System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko: /System/Drivers/2.5.52/export_dep-$BITNESS.ko /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/noexport_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/export_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/export_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
 EOF
 
 SIZE_NOEXPORT_NODEP=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko`)
diff -urN module-init-tools-3.2/tests/test-modprobe/06rename.sh module-init-tools-3.2-STEP/tests/test-modprobe/06rename.sh
--- module-init-tools-3.2/tests/test-modprobe/06rename.sh	2004-03-30 15:33:46.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/06rename.sh	2006-04-27 00:46:00.433373856 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test the module renaming code.
 
 for BITNESS in 32 64; do
@@ -7,106 +7,106 @@
 MODTEST_DUMP_INIT=1
 export MODTEST_DUMP_INIT
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/rename-new-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/rename-new-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/rename/rename-new-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/rename-old-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/rename-old-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS/rename/rename-old-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
 MODTEST_OVERRIDE4=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH4=tests/tmp/DOES_NOT_EXIST
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/DOES_NOT_EXIST
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/proc/modules
-MODTEST_OVERRIDE_WITH5=tests/tmp/modules
+MODTEST_OVERRIDE5=/System/Processes/modules
+MODTEST_OVERRIDE_WITH5=tests/System/TemporaryFiles/modules
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
 # Set up modules.dep file (neither has dependencies).
-echo "# A comment" > tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/rename-new-$BITNESS.ko:" >> tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/rename-old-$BITNESS.ko:" >> tests/tmp/modules.dep
+echo "# A comment" > tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/rename-new-$BITNESS.ko:" >> tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/rename-old-$BITNESS.ko:" >> tests/System/TemporaryFiles/modules.dep
 
 # Test old-style module 
-[ "`modprobe rename-old-$BITNESS 2> tests/tmp/out`" = "" ]
-strings tests/tmp/out | grep -q 'rename_old'
-if strings tests/tmp/out | grep -q 'short'; then exit 1; fi
-
-[ "`modprobe -o short rename-old-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_old'; then exit 1; fi
-strings tests/tmp/out | grep -q 'short'
-
-[ "`modprobe -o very_very_long_name rename-old-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_old'; then exit 1; fi
-strings tests/tmp/out | grep -q 'very_very_long_name'
-
-[ "`modprobe -o short rename-old-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_old'; then exit 1; fi
-strings tests/tmp/out | grep -q 'short'
-
-[ "`modprobe -o very_very_long_name rename-old-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_old'; then exit 1; fi
-strings tests/tmp/out | grep -q 'very_very_long_name'
-
-[ "`modprobe --name short rename-old-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_old'; then exit 1; fi
-strings tests/tmp/out | grep -q 'short'
-
-[ "`modprobe --name very_very_long_name rename-old-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_old'; then exit 1; fi
-strings tests/tmp/out | grep -q 'very_very_long_name'
-
-[ "`modprobe --name=short rename-old-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_old'; then exit 1; fi
-strings tests/tmp/out | grep -q 'short'
-
-[ "`modprobe --name=very_very_long_name rename-old-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_old'; then exit 1; fi
-strings tests/tmp/out | grep -q 'very_very_long_name'
+[ "`modprobe rename-old-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+strings tests/System/TemporaryFiles/out | grep -q 'rename_old'
+if strings tests/System/TemporaryFiles/out | grep -q 'short'; then exit 1; fi
+
+[ "`modprobe -o short rename-old-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_old'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'short'
+
+[ "`modprobe -o very_very_long_name rename-old-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_old'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'very_very_long_name'
+
+[ "`modprobe -o short rename-old-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_old'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'short'
+
+[ "`modprobe -o very_very_long_name rename-old-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_old'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'very_very_long_name'
+
+[ "`modprobe --name short rename-old-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_old'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'short'
+
+[ "`modprobe --name very_very_long_name rename-old-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_old'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'very_very_long_name'
+
+[ "`modprobe --name=short rename-old-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_old'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'short'
+
+[ "`modprobe --name=very_very_long_name rename-old-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_old'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'very_very_long_name'
 
 # Test new-style module 
-[ "`modprobe rename-new-$BITNESS 2> tests/tmp/out`" = "" ]
-strings tests/tmp/out | grep -q 'rename_new'
-if strings tests/tmp/out | grep -q 'short'; then exit 1; fi
-
-[ "`modprobe -o short rename-new-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_new'; then exit 1; fi
-strings tests/tmp/out | grep -q 'short'
-
-[ "`modprobe -o very_very_long_name rename-new-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_new'; then exit 1; fi
-strings tests/tmp/out | grep -q 'very_very_long_name'
-
-[ "`modprobe -o short rename-new-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_new'; then exit 1; fi
-strings tests/tmp/out | grep -q 'short'
-
-[ "`modprobe -o very_very_long_name rename-new-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_new'; then exit 1; fi
-strings tests/tmp/out | grep -q 'very_very_long_name'
-
-[ "`modprobe --name short rename-new-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_new'; then exit 1; fi
-strings tests/tmp/out | grep -q 'short'
-
-[ "`modprobe --name very_very_long_name rename-new-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_new'; then exit 1; fi
-strings tests/tmp/out | grep -q 'very_very_long_name'
-
-[ "`modprobe --name=short rename-new-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_new'; then exit 1; fi
-strings tests/tmp/out | grep -q 'short'
-
-[ "`modprobe --name=very_very_long_name rename-new-$BITNESS 2> tests/tmp/out`" = "" ]
-if strings tests/tmp/out | grep -q 'rename_new'; then exit 1; fi
-strings tests/tmp/out | grep -q 'very_very_long_name'
+[ "`modprobe rename-new-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+strings tests/System/TemporaryFiles/out | grep -q 'rename_new'
+if strings tests/System/TemporaryFiles/out | grep -q 'short'; then exit 1; fi
+
+[ "`modprobe -o short rename-new-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_new'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'short'
+
+[ "`modprobe -o very_very_long_name rename-new-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_new'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'very_very_long_name'
+
+[ "`modprobe -o short rename-new-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_new'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'short'
+
+[ "`modprobe -o very_very_long_name rename-new-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_new'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'very_very_long_name'
+
+[ "`modprobe --name short rename-new-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_new'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'short'
+
+[ "`modprobe --name very_very_long_name rename-new-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_new'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'very_very_long_name'
+
+[ "`modprobe --name=short rename-new-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_new'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'short'
+
+[ "`modprobe --name=very_very_long_name rename-new-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+if strings tests/System/TemporaryFiles/out | grep -q 'rename_new'; then exit 1; fi
+strings tests/System/TemporaryFiles/out | grep -q 'very_very_long_name'
 
-cat > tests/tmp/proc <<EOF
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 newname 100 0 -
 EOF
 [ "`modprobe --name=newname -r rename-new-$BITNESS 2>&1`" = "DELETE_MODULE: newname EXCL " ]
diff -urN module-init-tools-3.2/tests/test-modprobe/07wildalias.sh module-init-tools-3.2-STEP/tests/test-modprobe/07wildalias.sh
--- module-init-tools-3.2/tests/test-modprobe/07wildalias.sh	2003-01-11 21:40:14.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/07wildalias.sh	2006-04-27 00:46:00.427374768 +1200
@@ -1,21 +1,21 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test wildcard aliases.
 
 for BITNESS in 32 64; do
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=/dev/null
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=/System/Devices/null
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 MODTEST_OVERRIDE2=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH2=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
 # Create a simple config file.
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 # Various aliases
 alias *wildcard-_* foo
-alias /dev/test* bar
+alias /System/Devices/test* bar
 EOF
 
 # Simple test.
@@ -24,8 +24,8 @@
 [ "`modprobe wildcard_- 2>&1`" = "FATAL: Module foo not found." ]
 [ "`modprobe anotherwildcard-_ 2>&1`" = "FATAL: Module foo not found." ]
 [ "`modprobe anotherwildcard-_aaa 2>&1`" = "FATAL: Module foo not found." ]
-[ "`modprobe /dev/test 2>&1`" = "FATAL: Module bar not found." ]
-[ "`modprobe /dev/test/tmp 2>&1`" = "FATAL: Module bar not found." ]
-[ "`modprobe /dev/test7  2>&1`" = "FATAL: Module bar not found." ]
+[ "`modprobe /System/Devices/test 2>&1`" = "FATAL: Module bar not found." ]
+[ "`modprobe /System/Devices/test/System/TemporaryFiles 2>&1`" = "FATAL: Module bar not found." ]
+[ "`modprobe /System/Devices/test7  2>&1`" = "FATAL: Module bar not found." ]
 
 done
diff -urN module-init-tools-3.2/tests/test-modprobe/08devfsd.sh module-init-tools-3.2-STEP/tests/test-modprobe/08devfsd.sh
--- module-init-tools-3.2/tests/test-modprobe/08devfsd.sh	2003-08-19 22:24:40.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/08devfsd.sh	2006-04-27 00:46:00.435373552 +1200
@@ -1,25 +1,25 @@
-#! /bin/sh
+#! /System/Tools/sh
 
-# Old devfsds invoke "modprobe -k -C /etc/modules.conf /dev/<name>".
+# Old devfsds invoke "modprobe -k -C /etc/modules.conf /System/Devices/<name>".
 # We have a horrible workaround.
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=/dev/null
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=/System/Devices/null
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 MODTEST_OVERRIDE2=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH2=/dev/null
+MODTEST_OVERRIDE_WITH2=/System/Devices/null
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
 MODTEST_OVERRIDE3=/etc/modules.conf
 MODTEST_OVERRIDE_WITH3=FILE-WHICH-DOESNT-EXIST
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-# Ignores explicit -C when it's -C modules.conf, and a /dev/*.
-[ "`modprobe -C /etc/modules.conf /dev/foo 2>&1`" = "" ]
+# Ignores explicit -C when it's -C modules.conf, and a /System/Devices/*.
+[ "`modprobe -C /etc/modules.conf /System/Devices/foo 2>&1`" = "" ]
 
 # These won't trigger it.
-[ "`modprobe -C /etc/modules.conf2 /dev/foo 2>&1`" = "FATAL: Failed to open config file /etc/modules.conf2: No such file or directory" ]
-[ "`modprobe -C /etc/modules.conf x/dev/foo 2>&1`" = "FATAL: Failed to open config file /etc/modules.conf: No such file or directory" ]
-[ "`modprobe -C /etc/modules.conf /devsomething 2>&1`" = "FATAL: Failed to open config file /etc/modules.conf: No such file or directory" ]
-[ "`modprobe /dev/foo 2>&1`" = "FATAL: Module /dev/foo not found." ]
+[ "`modprobe -C /etc/modules.conf2 /System/Devices/foo 2>&1`" = "FATAL: Failed to open config file /etc/modules.conf2: No such file or directory" ]
+[ "`modprobe -C /etc/modules.conf x/System/Devices/foo 2>&1`" = "FATAL: Failed to open config file /etc/modules.conf: No such file or directory" ]
+[ "`modprobe -C /etc/modules.conf /System/Devicessomething 2>&1`" = "FATAL: Failed to open config file /etc/modules.conf: No such file or directory" ]
+[ "`modprobe /System/Devices/foo 2>&1`" = "FATAL: Module /System/Devices/foo not found." ]
diff -urN module-init-tools-3.2/tests/test-modprobe/09configerrors.sh module-init-tools-3.2-STEP/tests/test-modprobe/09configerrors.sh
--- module-init-tools-3.2/tests/test-modprobe/09configerrors.sh	2003-01-11 20:59:10.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/09configerrors.sh	2006-04-27 00:46:00.435373552 +1200
@@ -1,16 +1,16 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 # Test various config file errors.
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=/dev/null
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=/System/Devices/null
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 MODTEST_OVERRIDE2=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH2=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
 # Test bad alias syntax
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 alias
 alias foo
 EOF
@@ -20,7 +20,7 @@
 FATAL: Module foo not found." ]
 
 # Bad option syntax
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 options
 options foo
 EOF
@@ -30,7 +30,7 @@
 FATAL: Module foo not found." ]
 
 # Bad include syntax
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 include
 EOF
 
@@ -38,7 +38,7 @@
 FATAL: Module foo not found." ]
 
 # Bad install syntax
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 install
 install foo
 EOF
@@ -48,7 +48,7 @@
 FATAL: Module foo not found." ]
 
 # Bad remove syntax
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 remove
 remove foo
 EOF
@@ -58,7 +58,7 @@
 FATAL: Module foo not found." ]
 
 # Complete junk
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 complete junk and stuff
 rubbish
 EOF
@@ -68,34 +68,34 @@
 FATAL: Module foo not found." ]
 
 # Line numbering counted correctly.
-echo "#comment" > tests/tmp/modprobe.conf
-echo "remove" >> tests/tmp/modprobe.conf
+echo "#comment" > tests/System/TemporaryFiles/modprobe.conf
+echo "remove" >> tests/System/TemporaryFiles/modprobe.conf
 
 [ "`modprobe foo 2>&1`" = "WARNING: /etc/modprobe.conf line 2: ignoring bad line starting with 'remove'
 FATAL: Module foo not found." ]
 
-echo "" > tests/tmp/modprobe.conf
-echo "remove" >> tests/tmp/modprobe.conf
+echo "" > tests/System/TemporaryFiles/modprobe.conf
+echo "remove" >> tests/System/TemporaryFiles/modprobe.conf
 
 [ "`modprobe foo 2>&1`" = "WARNING: /etc/modprobe.conf line 2: ignoring bad line starting with 'remove'
 FATAL: Module foo not found." ]
 
-echo "  # Comment" > tests/tmp/modprobe.conf
-echo "remove" >> tests/tmp/modprobe.conf
+echo "  # Comment" > tests/System/TemporaryFiles/modprobe.conf
+echo "remove" >> tests/System/TemporaryFiles/modprobe.conf
 
 [ "`modprobe foo 2>&1`" = "WARNING: /etc/modprobe.conf line 2: ignoring bad line starting with 'remove'
 FATAL: Module foo not found." ]
 
-echo "  # Comment \\" > tests/tmp/modprobe.conf
-echo "with multiple lines" >> tests/tmp/modprobe.conf
-echo "remove" >> tests/tmp/modprobe.conf
+echo "  # Comment \\" > tests/System/TemporaryFiles/modprobe.conf
+echo "with multiple lines" >> tests/System/TemporaryFiles/modprobe.conf
+echo "remove" >> tests/System/TemporaryFiles/modprobe.conf
 
 [ "`modprobe foo 2>&1`" = "WARNING: /etc/modprobe.conf line 3: ignoring bad line starting with 'remove'
 FATAL: Module foo not found." ]
 
-echo "remove foo \\" > tests/tmp/modprobe.conf
-echo "  bar" >> tests/tmp/modprobe.conf
-echo "remove" >> tests/tmp/modprobe.conf
+echo "remove foo \\" > tests/System/TemporaryFiles/modprobe.conf
+echo "  bar" >> tests/System/TemporaryFiles/modprobe.conf
+echo "remove" >> tests/System/TemporaryFiles/modprobe.conf
 [ "`modprobe foo 2>&1`" = "WARNING: /etc/modprobe.conf line 3: ignoring bad line starting with 'remove'
 FATAL: Module foo not found." ]
 
diff -urN module-init-tools-3.2/tests/test-modprobe/10alias.sh module-init-tools-3.2-STEP/tests/test-modprobe/10alias.sh
--- module-init-tools-3.2/tests/test-modprobe/10alias.sh	2005-05-10 14:16:52.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/10alias.sh	2006-04-27 00:46:00.438373096 +1200
@@ -1,30 +1,30 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test for modules.alias usage.
 
 for BITNESS in 32 64; do
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 MODTEST_OVERRIDE2=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH2=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH3=tests/tmp/modules.alias
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH4=/dev/null
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH4=/System/Devices/null
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/kernel/alias-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/kernel/alias-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS/alias/alias-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/kernel/foo.ko
-MODTEST_OVERRIDE_WITH6=tests/tmp/foo.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/kernel/foo.ko
+MODTEST_OVERRIDE_WITH6=tests/System/TemporaryFiles/foo.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 MODTEST_OVERRIDE7=/etc/modprobe.d
@@ -33,42 +33,42 @@
 
 SIZE=$(echo `wc -c < tests/data/$BITNESS/alias/alias-$BITNESS.ko`)
 
-echo "/lib/modules/$MODTEST_UNAME/kernel/alias-$BITNESS.ko:" > tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/kernel/foo.ko:" >> tests/tmp/modules.dep
-rm -f tests/tmp/modules.alias
-rm -f tests/tmp/modprobe.conf
+echo "/System/Drivers/$MODTEST_UNAME/kernel/alias-$BITNESS.ko:" > tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/kernel/foo.ko:" >> tests/System/TemporaryFiles/modules.dep
+rm -f tests/System/TemporaryFiles/modules.alias
+rm -f tests/System/TemporaryFiles/modprobe.conf
 
-echo Test > tests/tmp/foo.ko
+echo Test > tests/System/TemporaryFiles/foo.ko
 
 # Shouldn't complain if can't open modules.alias
 [ "`modprobe bar 2>&1`" = "FATAL: Module bar not found." ]
 
 # Now, alias found in modules.alias works.
-echo "alias bar alias-$BITNESS" > tests/tmp/modules.alias
+echo "alias bar alias-$BITNESS" > tests/System/TemporaryFiles/modules.alias
 [ "`modprobe bar 2>&1`" = "INIT_MODULE: $SIZE " ]
 
 # Normal alias should override it.
-echo 'alias bar foo' > tests/tmp/modprobe.conf
+echo 'alias bar foo' > tests/System/TemporaryFiles/modprobe.conf
 [ "`modprobe foo 2>&1`" = "INIT_MODULE: 5 " ]
 
 # If there's a real module, alias from modules.alias must NOT override.
-echo "alias foo alias-$BITNESS" > tests/tmp/modules.alias
+echo "alias foo alias-$BITNESS" > tests/System/TemporaryFiles/modules.alias
 [ "`modprobe foo 2>&1`" = "INIT_MODULE: 5 " ]
 
 # If there's an install command, modules.alias must not override.
-echo 'install bar echo foo' > tests/tmp/modprobe.conf
+echo 'install bar echo foo' > tests/System/TemporaryFiles/modprobe.conf
 [ "`modprobe bar 2>&1`" = "SYSTEM: echo foo" ]
-echo 'remove bar echo foo remove' > tests/tmp/modprobe.conf
+echo 'remove bar echo foo remove' > tests/System/TemporaryFiles/modprobe.conf
 [ "`modprobe -r bar 2>&1`" = "SYSTEM: echo foo remove" ]
 
 # Should gather up options from other alias name as well.
-echo "alias bar alias-$BITNESS" > tests/tmp/modules.alias
-echo "options bar option1" > tests/tmp/modprobe.conf
-echo "options alias-$BITNESS option2" >> tests/tmp/modprobe.conf
+echo "alias bar alias-$BITNESS" > tests/System/TemporaryFiles/modules.alias
+echo "options bar option1" > tests/System/TemporaryFiles/modprobe.conf
+echo "options alias-$BITNESS option2" >> tests/System/TemporaryFiles/modprobe.conf
 [ "`modprobe bar 2>&1`" = "INIT_MODULE: $SIZE option1 option2" ]
 
 # Duplicated alias: both get probed (either order)
-echo "alias bar foo" >> tests/tmp/modules.alias
+echo "alias bar foo" >> tests/System/TemporaryFiles/modules.alias
 OUT="`modprobe bar 2>&1`"
 
 [ "$OUT" = "INIT_MODULE: $SIZE option1 option2
diff -urN module-init-tools-3.2/tests/test-modprobe/11stripversions.sh module-init-tools-3.2-STEP/tests/test-modprobe/11stripversions.sh
--- module-init-tools-3.2/tests/test-modprobe/11stripversions.sh	2003-01-30 14:30:48.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/11stripversions.sh	2006-04-27 00:46:00.436373400 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test the version removal code
 
 section_attributes()
@@ -12,39 +12,39 @@
 MODTEST_DUMP_INIT=1
 export MODTEST_DUMP_INIT
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/rename-version-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/rename-version-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/rename/rename-version-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
 MODTEST_OVERRIDE3=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH3=tests/tmp/DOES_NOT_EXIST
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/DOES_NOT_EXIST
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
 # Set up modules.dep file (neither has dependencies).
-echo "# A comment" > tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/rename-version-$BITNESS.ko:" >> tests/tmp/modules.dep
+echo "# A comment" > tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/rename-version-$BITNESS.ko:" >> tests/System/TemporaryFiles/modules.dep
 
 # Check it without removing.
-[ "`modprobe rename-version-$BITNESS 2> tests/tmp/out`" = "" ]
-[ "`section_attributes tests/tmp/out __versions`" = "__versions A" ]
-[ "`section_attributes tests/tmp/out __vermagic`" = "__vermagic A" ]
+[ "`modprobe rename-version-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+[ "`section_attributes tests/System/TemporaryFiles/out __versions`" = "__versions A" ]
+[ "`section_attributes tests/System/TemporaryFiles/out __vermagic`" = "__vermagic A" ]
 
 # Now remove them (turns off ALLOC bit)
-[ "`modprobe --force rename-version-$BITNESS 2> tests/tmp/out`" = "" ]
-[ "`section_attributes tests/tmp/out __versions`" = "__versions 0" ]
-[ "`section_attributes tests/tmp/out __vermagic`" = "__vermagic 0" ]
+[ "`modprobe --force rename-version-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+[ "`section_attributes tests/System/TemporaryFiles/out __versions`" = "__versions 0" ]
+[ "`section_attributes tests/System/TemporaryFiles/out __vermagic`" = "__vermagic 0" ]
 
 # Now remove them individually instead.
-[ "`modprobe --force-vermagic rename-version-$BITNESS 2> tests/tmp/out`" = "" ]
-[ "`section_attributes tests/tmp/out __versions`" = "__versions A" ]
-[ "`section_attributes tests/tmp/out __vermagic`" = "__vermagic 0" ]
-[ "`modprobe --force-modversion rename-version-$BITNESS 2> tests/tmp/out`" = "" ]
-[ "`section_attributes tests/tmp/out __versions`" = "__versions 0" ]
-[ "`section_attributes tests/tmp/out __vermagic`" = "__vermagic A" ]
+[ "`modprobe --force-vermagic rename-version-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+[ "`section_attributes tests/System/TemporaryFiles/out __versions`" = "__versions A" ]
+[ "`section_attributes tests/System/TemporaryFiles/out __vermagic`" = "__vermagic 0" ]
+[ "`modprobe --force-modversion rename-version-$BITNESS 2> tests/System/TemporaryFiles/out`" = "" ]
+[ "`section_attributes tests/System/TemporaryFiles/out __versions`" = "__versions 0" ]
+[ "`section_attributes tests/System/TemporaryFiles/out __vermagic`" = "__vermagic A" ]
 
 done
 
diff -urN module-init-tools-3.2/tests/test-modprobe/12whitespace.sh module-init-tools-3.2-STEP/tests/test-modprobe/12whitespace.sh
--- module-init-tools-3.2/tests/test-modprobe/12whitespace.sh	2003-01-28 20:44:52.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/12whitespace.sh	2006-04-27 00:46:00.441372640 +1200
@@ -1,18 +1,18 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test for spaces in configuration files: based on 04config.sh
 
 for BITNESS in 32 64; do
 
 # Simple dump out test.
-[ "`modprobe -C /dev/null -c 2>&1`" = "" ]
-[ "`modprobe --config /dev/null --showconfig 2>&1`" = "" ]
+[ "`modprobe -C /System/Devices/null -c 2>&1`" = "" ]
+[ "`modprobe --config /System/Devices/null --showconfig 2>&1`" = "" ]
 
 # Explicitly mentioned config files must exist.
 [ "`modprobe -C FILE-WHICH-DOESNT-EXIST foo 2>&1`" = "FATAL: Failed to open config file FILE-WHICH-DOESNT-EXIST: No such file or directory" ]
 
 # Default one doesn't have to.
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=/dev/null
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=/System/Devices/null
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 MODTEST_OVERRIDE2=/etc/modprobe.conf
@@ -21,7 +21,7 @@
 [ "`modprobe foo 2>&1`" = "FATAL: Module foo not found." ]
 
 # Create a simple config file.
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 # Various aliases
 alias   alias_to_foo   foo
 alias   alias_to_bar   bar
@@ -51,11 +51,11 @@
 remove   export_nodep-$BITNESS   echo Removing   export_nodep
 
 # Finally, an include
-include   tests/tmp/modprobe.conf.included
+include   tests/System/TemporaryFiles/modprobe.conf.included
 EOF
 
 # Now create this included file
-cat > tests/tmp/modprobe.conf.included <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf.included <<EOF
 install   baz   echo Installing   baz
 remove   baz   echo Removing   baz
 
@@ -63,57 +63,57 @@
 EOF
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS/normal/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
 MODTEST_OVERRIDE8=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH8=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
 MODTEST_OVERRIDE9=/etc/modprobe.conf.included
-MODTEST_OVERRIDE_WITH9=tests/tmp/modprobe.conf.included
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modprobe.conf.included
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.dep
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/proc/modules
+MODTEST_OVERRIDE11=/System/Processes/modules
 MODTEST_OVERRIDE_WITH11=FILE-WHICH-DOESNT-EXIST
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
 # Now create modules.dep
-cat > tests/tmp/modules.dep <<EOF
-/lib/modules/2.5.52/noexport_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko: /lib/modules/2.5.52/export_dep-$BITNESS.ko /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/noexport_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/export_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/export_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
+cat > tests/System/TemporaryFiles/modules.dep <<EOF
+/System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko: /System/Drivers/2.5.52/export_dep-$BITNESS.ko /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/noexport_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/export_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/export_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
 EOF
 
 SIZE_NOEXPORT_NODEP=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko`)
diff -urN module-init-tools-3.2/tests/test-modprobe/13dryrun.sh module-init-tools-3.2-STEP/tests/test-modprobe/13dryrun.sh
--- module-init-tools-3.2/tests/test-modprobe/13dryrun.sh	2003-03-05 16:23:34.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/13dryrun.sh	2006-04-27 00:46:00.443372336 +1200
@@ -1,95 +1,95 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test module dependencies.
 
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS/normal/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
 MODTEST_OVERRIDE8=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH8=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.dep
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/proc/modules
-MODTEST_OVERRIDE_WITH10=tests/tmp/proc
+MODTEST_OVERRIDE10=/System/Processes/modules
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/System/Processes
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
 # Now create modules.dep
-cat > tests/tmp/modules.dep <<EOF
+cat > tests/System/TemporaryFiles/modules.dep <<EOF
 # Should handle comments.
-/lib/modules/2.5.52/noexport_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko: /lib/modules/2.5.52/export_dep-$BITNESS.ko /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/noexport_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/export_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/export_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko: /System/Drivers/2.5.52/export_dep-$BITNESS.ko /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/noexport_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/export_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/export_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
 EOF
 
 # Insertion
 # Empty proc
-touch tests/tmp/proc
+touch tests/System/TemporaryFiles/System/Processes
 
-[ "`modprobe -v -n noexport_nodep-$BITNESS 2>&1`" = "insmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko " ]
-[ "`modprobe -v -n noexport_nodep-$BITNESS OPTIONS 2>&1`" = "insmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko OPTIONS" ]
+[ "`modprobe -v -n noexport_nodep-$BITNESS 2>&1`" = "insmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko " ]
+[ "`modprobe -v -n noexport_nodep-$BITNESS OPTIONS 2>&1`" = "insmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko OPTIONS" ]
 
-[ "`modprobe -v -n export_nodep-$BITNESS 2>&1`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko " ]
-[ "`modprobe -v -n export_nodep-$BITNESS OPTIONS 2>&1`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko OPTIONS" ]
+[ "`modprobe -v -n export_nodep-$BITNESS 2>&1`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko " ]
+[ "`modprobe -v -n export_nodep-$BITNESS OPTIONS 2>&1`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko OPTIONS" ]
 
-[ "`modprobe -v -n noexport_dep-$BITNESS 2>&1`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/noexport_dep-$BITNESS.ko " ]
-[ "`modprobe -v -n noexport_dep-$BITNESS OPTIONS 2>&1`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/noexport_dep-$BITNESS.ko OPTIONS" ]
-
-[ "`modprobe -v -n export_dep-$BITNESS 2>&1`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/export_dep-$BITNESS.ko " ]
-[ "`modprobe -v -n export_dep-$BITNESS OPTIONS 2>&1`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/export_dep-$BITNESS.ko OPTIONS" ]
-
-[ "`modprobe -v -n noexport_doubledep-$BITNESS 2>&1`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/export_dep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko " ]
-[ "`modprobe -v -n noexport_doubledep-$BITNESS OPTIONS 2>&1`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/export_dep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko OPTIONS" ]
+[ "`modprobe -v -n noexport_dep-$BITNESS 2>&1`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_dep-$BITNESS.ko " ]
+[ "`modprobe -v -n noexport_dep-$BITNESS OPTIONS 2>&1`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_dep-$BITNESS.ko OPTIONS" ]
+
+[ "`modprobe -v -n export_dep-$BITNESS 2>&1`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko " ]
+[ "`modprobe -v -n export_dep-$BITNESS OPTIONS 2>&1`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko OPTIONS" ]
+
+[ "`modprobe -v -n noexport_doubledep-$BITNESS 2>&1`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko " ]
+[ "`modprobe -v -n noexport_doubledep-$BITNESS OPTIONS 2>&1`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko OPTIONS" ]
 
 # Test alias and options resolution
-echo "alias foo noexport_doubledep-$BITNESS" > tests/tmp/modprobe.conf
-echo "options noexport_doubledep-$BITNESS OPTIONS" >> tests/tmp/modprobe.conf
-[ "`modprobe -v -n foo 2>&1`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/export_dep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko OPTIONS" ]
+echo "alias foo noexport_doubledep-$BITNESS" > tests/System/TemporaryFiles/modprobe.conf
+echo "options noexport_doubledep-$BITNESS OPTIONS" >> tests/System/TemporaryFiles/modprobe.conf
+[ "`modprobe -v -n foo 2>&1`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko OPTIONS" ]
 
 # All in proc
-cat > tests/tmp/proc <<EOF
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 noexport_nodep_$BITNESS 100 0 -
 export_nodep_$BITNESS 100 0 -
 noexport_dep_$BITNESS 100 0 export_nodep_$BITNESS,
@@ -98,14 +98,14 @@
 EOF
 
 # Removal
-[ "`modprobe -v -n -r noexport_nodep-$BITNESS 2>&1`" = "rmmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko" ]
-[ "`modprobe -v -n -r export_nodep-$BITNESS 2>&1`" = "rmmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko" ]
-[ "`modprobe -v -n -r noexport_dep-$BITNESS 2>&1`" = "rmmod /lib/modules/2.5.52/noexport_dep-$BITNESS.ko
-rmmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko" ]
-[ "`modprobe -v -n -r export_dep-$BITNESS 2>&1`" = "rmmod /lib/modules/2.5.52/export_dep-$BITNESS.ko
-rmmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko" ]
-[ "`modprobe -v -n -r noexport_doubledep-$BITNESS 2>&1`" = "rmmod /lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko
-rmmod /lib/modules/2.5.52/export_dep-$BITNESS.ko
-rmmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko" ]
+[ "`modprobe -v -n -r noexport_nodep-$BITNESS 2>&1`" = "rmmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko" ]
+[ "`modprobe -v -n -r export_nodep-$BITNESS 2>&1`" = "rmmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko" ]
+[ "`modprobe -v -n -r noexport_dep-$BITNESS 2>&1`" = "rmmod /System/Drivers/2.5.52/noexport_dep-$BITNESS.ko
+rmmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko" ]
+[ "`modprobe -v -n -r export_dep-$BITNESS 2>&1`" = "rmmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko
+rmmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko" ]
+[ "`modprobe -v -n -r noexport_doubledep-$BITNESS 2>&1`" = "rmmod /System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko
+rmmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko
+rmmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko" ]
 
 done
diff -urN module-init-tools-3.2/tests/test-modprobe/14setversion.sh module-init-tools-3.2-STEP/tests/test-modprobe/14setversion.sh
--- module-init-tools-3.2/tests/test-modprobe/14setversion.sh	2003-03-05 16:51:20.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/14setversion.sh	2006-04-27 00:46:05.516601088 +1200
@@ -1,32 +1,32 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/2.5.53
+MODTEST_OVERRIDE1=/System/Drivers/2.5.53
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/2.5.53/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/2.5.53/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/2.5.53/modules.dep
-MODTEST_OVERRIDE_WITH3=tests/tmp/modules.dep
+MODTEST_OVERRIDE3=/System/Drivers/2.5.53/modules.dep
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
 MODTEST_OVERRIDE4=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH4=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/proc/modules
-MODTEST_OVERRIDE_WITH5=tests/tmp/proc
+MODTEST_OVERRIDE5=/System/Processes/modules
+MODTEST_OVERRIDE_WITH5=tests/System/TemporaryFiles/System/Processes
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
 # Now create modules.dep
-cat > tests/tmp/modules.dep <<EOF
+cat > tests/System/TemporaryFiles/modules.dep <<EOF
 # Should handle comments.
-/lib/modules/2.5.53/noexport_nodep-$BITNESS.ko:
+/System/Drivers/2.5.53/noexport_nodep-$BITNESS.ko:
 EOF
 
 MODTEST_DO_CREATE_MODULE=1
diff -urN module-init-tools-3.2/tests/test-modprobe/15env.sh module-init-tools-3.2-STEP/tests/test-modprobe/15env.sh
--- module-init-tools-3.2/tests/test-modprobe/15env.sh	2004-01-19 16:30:50.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/15env.sh	2006-04-27 00:46:05.518600784 +1200
@@ -1,43 +1,43 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 for BITNESS in 32 64; do
 
-MODTEST_OVERRIDE1=/lib/modules/2.5.52
+MODTEST_OVERRIDE1=/System/Drivers/2.5.52
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/2.5.52/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/2.5.52/modules.dep
-MODTEST_OVERRIDE_WITH3=tests/tmp/modules.dep
+MODTEST_OVERRIDE3=/System/Drivers/2.5.52/modules.dep
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
 MODTEST_OVERRIDE4=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH4=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/proc/modules
-MODTEST_OVERRIDE_WITH5=tests/tmp/proc
+MODTEST_OVERRIDE5=/System/Processes/modules
+MODTEST_OVERRIDE_WITH5=tests/System/TemporaryFiles/System/Processes
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
 MODTEST_OVERRIDE6=/etc/modprobe2.conf
-MODTEST_OVERRIDE_WITH6=tests/tmp/modprobe2.conf
+MODTEST_OVERRIDE_WITH6=tests/System/TemporaryFiles/modprobe2.conf
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 # Now create modules.dep and modules.conf
-echo /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko: > tests/tmp/modules.dep
-echo install foo modprobe noexport_nodep-$BITNESS > tests/tmp/modprobe.conf
-echo install foo modprobe bar > tests/tmp/modprobe2.conf
-echo install bar echo DOING BAR >> tests/tmp/modprobe2.conf
+echo /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko: > tests/System/TemporaryFiles/modules.dep
+echo install foo modprobe noexport_nodep-$BITNESS > tests/System/TemporaryFiles/modprobe.conf
+echo install foo modprobe bar > tests/System/TemporaryFiles/modprobe2.conf
+echo install bar echo DOING BAR >> tests/System/TemporaryFiles/modprobe2.conf
 
 SIZE_NOEXPORT_NODEP=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko`)
 
 # Test normal args, then in env.
-[ "`./modprobe -v noexport_nodep-$BITNESS 2>&1`" = "insmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko 
+[ "`./modprobe -v noexport_nodep-$BITNESS 2>&1`" = "insmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko 
 INIT_MODULE: $SIZE_NOEXPORT_NODEP " ]
-[ "`MODPROBE_OPTIONS=-v ./modprobe noexport_nodep-$BITNESS 2>&1`" = "insmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko 
+[ "`MODPROBE_OPTIONS=-v ./modprobe noexport_nodep-$BITNESS 2>&1`" = "insmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko 
 INIT_MODULE: $SIZE_NOEXPORT_NODEP " ]
 
 [ "`./modprobe -q noexport_nodep-$BITNESS 2>&1`" = "INIT_MODULE: $SIZE_NOEXPORT_NODEP " ]
@@ -46,18 +46,18 @@
 [ "`./modprobe -n noexport_nodep-$BITNESS 2>&1`" = "" ]
 [ "`MODPROBE_OPTIONS=-n ./modprobe noexport_nodep-$BITNESS 2>&1`" = "" ]
 
-[ "`./modprobe -n -v noexport_nodep-$BITNESS 2>&1`" = "insmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko " ]
-[ "`MODPROBE_OPTIONS="-n -v" ./modprobe noexport_nodep-$BITNESS 2>&1`" = "insmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko " ]
+[ "`./modprobe -n -v noexport_nodep-$BITNESS 2>&1`" = "insmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko " ]
+[ "`MODPROBE_OPTIONS="-n -v" ./modprobe noexport_nodep-$BITNESS 2>&1`" = "insmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko " ]
 
 # Test argument inheritence.
 MODTEST_DO_SYSTEM=1
 export MODTEST_DO_SYSTEM
 
 [ "`./modprobe -v foo 2>&1`" = "install modprobe noexport_nodep-$BITNESS
-insmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko 
 INIT_MODULE: $SIZE_NOEXPORT_NODEP " ]
 [ "`MODPROBE_OPTIONS=-v ./modprobe foo 2>&1`" = "install modprobe noexport_nodep-$BITNESS
-insmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko 
 INIT_MODULE: $SIZE_NOEXPORT_NODEP " ]
 
 [ "`./modprobe -C /etc/modprobe2.conf foo 2>&1`" = "DOING BAR" ]
diff -urN module-init-tools-3.2/tests/test-modprobe/16showdepends.sh module-init-tools-3.2-STEP/tests/test-modprobe/16showdepends.sh
--- module-init-tools-3.2/tests/test-modprobe/16showdepends.sh	2004-01-19 16:34:46.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/16showdepends.sh	2006-04-27 00:46:05.520600480 +1200
@@ -1,77 +1,77 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test --show-depends.
 
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS/normal/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
 MODTEST_OVERRIDE8=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH8=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.dep
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/proc/modules
-MODTEST_OVERRIDE_WITH10=tests/tmp/proc
+MODTEST_OVERRIDE10=/System/Processes/modules
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/System/Processes
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
 # Now create modules.dep
-cat > tests/tmp/modules.dep <<EOF
+cat > tests/System/TemporaryFiles/modules.dep <<EOF
 # Should handle comments.
-/lib/modules/2.5.52/noexport_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko: /lib/modules/2.5.52/export_dep-$BITNESS.ko /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/noexport_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/export_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/export_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko: /System/Drivers/2.5.52/export_dep-$BITNESS.ko /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/noexport_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/export_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/export_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
 EOF
 
 # Empty proc
-cp /dev/null tests/tmp/proc
+cp /System/Devices/null tests/System/TemporaryFiles/System/Processes
 
-[ "`modprobe --show-depends noexport_nodep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko " ]
-[ "`modprobe --show-depends export_nodep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko " ]
-[ "`modprobe --show-depends noexport_dep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/noexport_dep-$BITNESS.ko " ]
-[ "`modprobe --show-depends export_dep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/export_dep-$BITNESS.ko " ]
-[ "`modprobe --show-depends noexport_doubledep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/export_dep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko " ]
+[ "`modprobe --show-depends noexport_nodep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko " ]
+[ "`modprobe --show-depends export_nodep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko " ]
+[ "`modprobe --show-depends noexport_dep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_dep-$BITNESS.ko " ]
+[ "`modprobe --show-depends export_dep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko " ]
+[ "`modprobe --show-depends noexport_doubledep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko " ]
 
 # Nothing in stderr...
-[ `wc -c < tests/tmp/stderr` = 0 ]
+[ `wc -c < tests/System/TemporaryFiles/stderr` = 0 ]
 
 # All in proc; should make no difference.
-cat > tests/tmp/proc <<EOF
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 noexport_nodep_$BITNESS 100 0 -
 export_nodep_$BITNESS 100 0 -
 noexport_dep_$BITNESS 100 0 export_nodep_$BITNESS,
@@ -79,21 +79,21 @@
 noexport_doubledep_$BITNESS 100 0 export_dep_$BITNESS,export_nodep_$BITNESS
 EOF
 
-[ "`modprobe --show-depends noexport_nodep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko " ]
-[ "`modprobe --show-depends export_nodep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko " ]
-[ "`modprobe --show-depends noexport_dep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/noexport_dep-$BITNESS.ko " ]
-[ "`modprobe --show-depends export_dep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/export_dep-$BITNESS.ko " ]
-[ "`modprobe --show-depends noexport_doubledep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/export_dep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko " ]
+[ "`modprobe --show-depends noexport_nodep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko " ]
+[ "`modprobe --show-depends export_nodep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko " ]
+[ "`modprobe --show-depends noexport_dep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_dep-$BITNESS.ko " ]
+[ "`modprobe --show-depends export_dep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko " ]
+[ "`modprobe --show-depends noexport_doubledep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko " ]
 
 # Nothing in stderr...
-[ `wc -c < tests/tmp/stderr` = 0 ]
+[ `wc -c < tests/System/TemporaryFiles/stderr` = 0 ]
 
 # Module commands printed, ignored.
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 install noexport_nodep-$BITNESS echo noexport_nodep-$BITNESS
 install export_nodep-$BITNESS echo export_nodep-$BITNESS
 install noexport_dep-$BITNESS echo noexport_dep-$BITNESS
@@ -101,20 +101,20 @@
 install noexport_doubledep-$BITNESS echo noexport_doubledep-$BITNESS
 EOF
 
-[ "`modprobe --show-depends noexport_nodep-$BITNESS 2>>tests/tmp/stderr`" = "install echo noexport_nodep-$BITNESS" ]
-[ "`modprobe --show-depends export_nodep-$BITNESS 2>>tests/tmp/stderr`" = "install echo export_nodep-$BITNESS" ]
-[ "`modprobe --show-depends noexport_dep-$BITNESS 2>>tests/tmp/stderr`" = "install echo export_nodep-$BITNESS
+[ "`modprobe --show-depends noexport_nodep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "install echo noexport_nodep-$BITNESS" ]
+[ "`modprobe --show-depends export_nodep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "install echo export_nodep-$BITNESS" ]
+[ "`modprobe --show-depends noexport_dep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "install echo export_nodep-$BITNESS
 install echo noexport_dep-$BITNESS" ]
-[ "`modprobe --show-depends export_dep-$BITNESS 2>>tests/tmp/stderr`" = "install echo export_nodep-$BITNESS
+[ "`modprobe --show-depends export_dep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "install echo export_nodep-$BITNESS
 install echo export_dep-$BITNESS" ]
-[ "`modprobe --show-depends noexport_doubledep-$BITNESS 2>>tests/tmp/stderr`" = "install echo export_nodep-$BITNESS
+[ "`modprobe --show-depends noexport_doubledep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "install echo export_nodep-$BITNESS
 install echo export_dep-$BITNESS
 install echo noexport_doubledep-$BITNESS" ]
 # Nothing in stderr...
-[ `wc -c < tests/tmp/stderr` = 0 ]
+[ `wc -c < tests/System/TemporaryFiles/stderr` = 0 ]
 
 # Module options printed.
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 options noexport_nodep-$BITNESS opt1
 options export_nodep-$BITNESS opt2
 options noexport_dep-$BITNESS opt3
@@ -122,28 +122,28 @@
 options noexport_doubledep-$BITNESS opt5
 EOF
 
-[ "`modprobe --show-depends noexport_nodep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko opt1" ]
-[ "`modprobe --show-depends export_nodep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko opt2" ]
-[ "`modprobe --show-depends noexport_dep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko opt2
-insmod /lib/modules/2.5.52/noexport_dep-$BITNESS.ko opt3" ]
-[ "`modprobe --show-depends export_dep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko opt2
-insmod /lib/modules/2.5.52/export_dep-$BITNESS.ko opt4" ]
-[ "`modprobe --show-depends noexport_doubledep-$BITNESS 2>>tests/tmp/stderr`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko opt2
-insmod /lib/modules/2.5.52/export_dep-$BITNESS.ko opt4
-insmod /lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko opt5" ]
+[ "`modprobe --show-depends noexport_nodep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko opt1" ]
+[ "`modprobe --show-depends export_nodep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko opt2" ]
+[ "`modprobe --show-depends noexport_dep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko opt2
+insmod /System/Drivers/2.5.52/noexport_dep-$BITNESS.ko opt3" ]
+[ "`modprobe --show-depends export_dep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko opt2
+insmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko opt4" ]
+[ "`modprobe --show-depends noexport_doubledep-$BITNESS 2>>tests/System/TemporaryFiles/stderr`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko opt2
+insmod /System/Drivers/2.5.52/export_dep-$BITNESS.ko opt4
+insmod /System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko opt5" ]
 # Nothing in stderr...
-[ `wc -c < tests/tmp/stderr` = 0 ]
+[ `wc -c < tests/System/TemporaryFiles/stderr` = 0 ]
 
 # Via aliases works.
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 options noexport_nodep-$BITNESS opt1
 alias foo noexport_nodep-$BITNESS
 options foo fooopt
 EOF
 
-[ "`modprobe --show-depends foo`" = "insmod /lib/modules/2.5.52/noexport_nodep-$BITNESS.ko fooopt opt1" ]
+[ "`modprobe --show-depends foo`" = "insmod /System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko fooopt opt1" ]
 # Nothing in stderr...
-[ `wc -c < tests/tmp/stderr` = 0 ]
+[ `wc -c < tests/System/TemporaryFiles/stderr` = 0 ]
 
-rm tests/tmp/modprobe.conf
+rm tests/System/TemporaryFiles/modprobe.conf
 done
diff -urN module-init-tools-3.2/tests/test-modprobe/17compressed.sh module-init-tools-3.2-STEP/tests/test-modprobe/17compressed.sh
--- module-init-tools-3.2/tests/test-modprobe/17compressed.sh	2004-03-31 16:02:15.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/17compressed.sh	2006-04-27 00:46:05.521600328 +1200
@@ -1,27 +1,27 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test compressed modules.
 
 [ -n "$CONFIG_HAVE_ZLIB" ] || exit 0
 
 for BITNESS in 32 64; do
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko.gz
-MODTEST_OVERRIDE_WITH2=tests/tmp/noexport_nodep-$BITNESS.ko.gz
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko.gz
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/noexport_nodep-$BITNESS.ko.gz
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
 MODTEST_OVERRIDE3=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH3=tests/tmp/DOES_NOT_EXIST
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/DOES_NOT_EXIST
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-gzip < tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko > tests/tmp/noexport_nodep-$BITNESS.ko.gz
+gzip < tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko > tests/System/TemporaryFiles/noexport_nodep-$BITNESS.ko.gz
 
 # Set up modules.dep file.
-echo "# A comment" > tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko.gz:" >> tests/tmp/modules.dep
+echo "# A comment" > tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko.gz:" >> tests/System/TemporaryFiles/modules.dep
 
 SIZE=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko`)
 
diff -urN module-init-tools-3.2/tests/test-modprobe/18multiremove.sh module-init-tools-3.2-STEP/tests/test-modprobe/18multiremove.sh
--- module-init-tools-3.2/tests/test-modprobe/18multiremove.sh	2004-03-30 15:15:50.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/18multiremove.sh	2006-04-27 00:46:05.524599872 +1200
@@ -1,62 +1,62 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 # modprobe -r supports multiple module names now.
 
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS/normal/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
 MODTEST_OVERRIDE8=/etc/modprobe.conf
 MODTEST_OVERRIDE_WITH8=FILE-WHICH-DOESNT-EXIST
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.dep
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/proc/modules
-MODTEST_OVERRIDE_WITH10=tests/tmp/proc
+MODTEST_OVERRIDE10=/System/Processes/modules
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/System/Processes
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
 # Now create modules.dep
-cat > tests/tmp/modules.dep <<EOF
+cat > tests/System/TemporaryFiles/modules.dep <<EOF
 # Should handle comments.
-/lib/modules/2.5.52/noexport_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko: /lib/modules/2.5.52/export_dep-$BITNESS.ko /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/noexport_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/export_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/export_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko: /System/Drivers/2.5.52/export_dep-$BITNESS.ko /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/noexport_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/export_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/export_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
 EOF
 
 # All in proc
-cat > tests/tmp/proc <<EOF
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 noexport_nodep_$BITNESS 100 0 -
 export_nodep_$BITNESS 100 0 -
 noexport_dep_$BITNESS 100 0 export_nodep_$BITNESS,
diff -urN module-init-tools-3.2/tests/test-modprobe/19quiet.sh module-init-tools-3.2-STEP/tests/test-modprobe/19quiet.sh
--- module-init-tools-3.2/tests/test-modprobe/19quiet.sh	2004-02-13 12:05:11.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/19quiet.sh	2006-04-27 00:46:05.526599568 +1200
@@ -1,31 +1,31 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 for BITNESS in 32 64; do
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
 MODTEST_OVERRIDE3=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH3=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/proc/modules
-MODTEST_OVERRIDE_WITH4=tests/tmp/proc
+MODTEST_OVERRIDE4=/System/Processes/modules
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/System/Processes
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
 # Set up modules.dep file.
-echo "# A comment" > tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" >> tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/bogus-$BITNESS.ko:" >> tests/tmp/modules.dep
-
-echo "install some-command modprobe crap && echo SUCCESS" > tests/tmp/modprobe.conf 
-echo "remove some-command modprobe -r crap && echo SUCCESS" >> tests/tmp/modprobe.conf 
-echo "alias foobar crap" >> tests/tmp/modprobe.conf 
+echo "# A comment" > tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" >> tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/bogus-$BITNESS.ko:" >> tests/System/TemporaryFiles/modules.dep
+
+echo "install some-command modprobe crap && echo SUCCESS" > tests/System/TemporaryFiles/modprobe.conf 
+echo "remove some-command modprobe -r crap && echo SUCCESS" >> tests/System/TemporaryFiles/modprobe.conf 
+echo "alias foobar crap" >> tests/System/TemporaryFiles/modprobe.conf 
 
 SIZE=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko`)
 
@@ -42,22 +42,22 @@
 
 # -q on some other problem gives errors.
 [ "`modprobe -q bogus-$BITNESS 2>&1`" != "" ]
-if modprobe -q bogus-$BITNESS 2>/dev/null; then exit 1; fi
+if modprobe -q bogus-$BITNESS 2>/System/Devices/null; then exit 1; fi
 
 MODTEST_DO_SYSTEM=1
 export MODTEST_DO_SYSTEM
 # Normal install command will fail.
 [ "`modprobe some-command 2>&1`" = "FATAL: Module crap not found.
 FATAL: Error running install command for some_command" ]
-if modprobe some-command 2>/dev/null; then exit 1; fi
+if modprobe some-command 2>/System/Devices/null; then exit 1; fi
 
 # -q doesn't cause "modprobe crap" to succeed, but is passed through install.
 [ "`modprobe -q some-command 2>&1`" = "FATAL: Error running install command for some_command" ]
-if modprobe -q some-command 2>/dev/null; then exit 1; fi
+if modprobe -q some-command 2>/System/Devices/null; then exit 1; fi
 
 ## Remove
 # All in proc
-cat > tests/tmp/proc <<EOF
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 noexport_nodep_$BITNESS 100 0 -
 EOF
 
@@ -73,10 +73,10 @@
 # Normal remove command will fail.
 [ "`modprobe -r some-command 2>&1`" = "FATAL: Module crap not found.
 FATAL: Error running remove command for some_command" ]
-if modprobe -r some-command 2>/dev/null; then exit 1; fi
+if modprobe -r some-command 2>/System/Devices/null; then exit 1; fi
 
 # -q doesn't cause "modprobe -r crap" to succeed, but silences it.
 [ "`modprobe -r -q some-command 2>&1`" = "FATAL: Error running remove command for some_command" ]
-if modprobe -r -q some-command 2>/dev/null; then exit 1; fi
+if modprobe -r -q some-command 2>/System/Devices/null; then exit 1; fi
 
 done
diff -urN module-init-tools-3.2/tests/test-modprobe/20oldstyle.sh module-init-tools-3.2-STEP/tests/test-modprobe/20oldstyle.sh
--- module-init-tools-3.2/tests/test-modprobe/20oldstyle.sh	2004-01-19 17:03:48.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/20oldstyle.sh	2006-04-27 00:46:05.527599416 +1200
@@ -1,69 +1,69 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test old-style module crap.
 for BITNESS in 32 64; do
 
-rm -rf tests/tmp/*
-mkdir tests/tmp/drivers tests/tmp/other tests/tmp/drivers/type tests/tmp/other/type
-cp tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko tests/tmp/drivers/type/
-cp tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko tests/tmp/other/type/
+rm -rf tests/System/TemporaryFiles/*
+mkdir tests/System/TemporaryFiles/drivers tests/System/TemporaryFiles/other tests/System/TemporaryFiles/drivers/type tests/System/TemporaryFiles/other/type
+cp tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko tests/System/TemporaryFiles/drivers/type/
+cp tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko tests/System/TemporaryFiles/other/type/
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/type
-MODTEST_OVERRIDE_WITH2=tests/tmp/type
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/type
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/type
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH3=tests/tmp/drivers/type/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/drivers/type/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko
-MODTEST_OVERRIDE_WITH4=tests/tmp/other/type/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/other/type/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
 MODTEST_OVERRIDE5=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH5=tests/tmp/DOES_NOT_EXIST
+MODTEST_OVERRIDE_WITH5=tests/System/TemporaryFiles/DOES_NOT_EXIST
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
 # Set up modules.dep file.
-echo "# A comment" > tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko:" >> tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko:" >> tests/tmp/modules.dep
+echo "# A comment" > tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko:" >> tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko:" >> tests/System/TemporaryFiles/modules.dep
 
 SIZE1=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko`)
 SIZE2=$(echo `wc -c < tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko`)
 
 # -l lists all of them (either order)
-[ "`modprobe -l 2>&1`" = "/lib/modules/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko
-/lib/modules/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko" ] ||
-[ "`modprobe -l 2>&1`" = "/lib/modules/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko
-/lib/modules/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko" ]
+[ "`modprobe -l 2>&1`" = "/System/Drivers/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko
+/System/Drivers/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko" ] ||
+[ "`modprobe -l 2>&1`" = "/System/Drivers/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko
+/System/Drivers/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko" ]
 
 # -l -t foo lists none of them.
 [ "`modprobe -l -t foo 2>&1`" = "" ]
 
 # -l -t type lists all of them (either order)
-[ "`modprobe -l -t type 2>&1`" = "/lib/modules/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko
-/lib/modules/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko" ] ||
-[ "`modprobe -l -t type 2>&1`" = "/lib/modules/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko
-/lib/modules/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko" ]
+[ "`modprobe -l -t type 2>&1`" = "/System/Drivers/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko
+/System/Drivers/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko" ] ||
+[ "`modprobe -l -t type 2>&1`" = "/System/Drivers/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko
+/System/Drivers/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko" ]
 
 # -l -t drivers lists one.
-[ "`modprobe -l -t drivers 2>&1`" = "/lib/modules/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko" ]
+[ "`modprobe -l -t drivers 2>&1`" = "/System/Drivers/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko" ]
 
 # -l -t drivers/type lists one.
-[ "`modprobe -l -t drivers/type 2>&1`" = "/lib/modules/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko" ]
+[ "`modprobe -l -t drivers/type 2>&1`" = "/System/Drivers/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko" ]
 
 # -l -t other lists one.
-[ "`modprobe -l -t other 2>&1`" = "/lib/modules/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko" ]
+[ "`modprobe -l -t other 2>&1`" = "/System/Drivers/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko" ]
 
 # -l -t other/type lists one.
-[ "`modprobe -l -t other/type 2>&1`" = "/lib/modules/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko" ]
+[ "`modprobe -l -t other/type 2>&1`" = "/System/Drivers/$MODTEST_UNAME/other/type/export_nodep-$BITNESS.ko" ]
 
 # Wildcard works.
-[ "`modprobe -l -t type 'noexport-nodep*' 2>&1`" = "/lib/modules/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko" ]
+[ "`modprobe -l -t type 'noexport-nodep*' 2>&1`" = "/System/Drivers/$MODTEST_UNAME/drivers/type/noexport_nodep-$BITNESS.ko" ]
 
 # -t type without -l not supported
 modprobe -t type 2>&1 | grep -q Usage
diff -urN module-init-tools-3.2/tests/test-modprobe/21wildinstall.sh module-init-tools-3.2-STEP/tests/test-modprobe/21wildinstall.sh
--- module-init-tools-3.2/tests/test-modprobe/21wildinstall.sh	2003-12-30 12:54:22.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/21wildinstall.sh	2006-04-27 00:46:05.528599264 +1200
@@ -1,21 +1,21 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test wildcard install/remove commands.
 
 for BITNESS in 32 64; do
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=/dev/null
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=/System/Devices/null
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 MODTEST_OVERRIDE2=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH2=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
 MODTEST_DO_SYSTEM=1
 export MODTEST_DO_SYSTEM
 
 # Create a simple config file.
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 # Various aliases
 install *wildcard-_* echo installing \$MODPROBE_MODULE.
 remove *wildcard-_* echo removing \$MODPROBE_MODULE.
diff -urN module-init-tools-3.2/tests/test-modprobe/22recursiveinstall.sh module-init-tools-3.2-STEP/tests/test-modprobe/22recursiveinstall.sh
--- module-init-tools-3.2/tests/test-modprobe/22recursiveinstall.sh	2004-01-19 17:06:19.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/22recursiveinstall.sh	2006-04-27 00:46:05.523600024 +1200
@@ -1,40 +1,40 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH4=tests/tmp/modules.dep
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH4=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
 MODTEST_OVERRIDE5=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH5=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH5=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH6=tests/tmp/modules.dep
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH6=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
-MODTEST_OVERRIDE7=/proc/modules
-MODTEST_OVERRIDE_WITH7=tests/tmp/proc
+MODTEST_OVERRIDE7=/System/Processes/modules
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/System/Processes
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
 # Now create modules.dep
-cat > tests/tmp/modules.dep <<EOF
-/lib/modules/2.5.52/noexport_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/export_nodep-$BITNESS.ko:
+cat > tests/System/TemporaryFiles/modules.dep <<EOF
+/System/Drivers/2.5.52/noexport_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/export_nodep-$BITNESS.ko:
 EOF
 
 # Insertion
@@ -42,51 +42,51 @@
 SIZE_NOEXPORT_DEP=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_dep-$BITNESS.ko`)
 
 # Empty proc
-touch tests/tmp/proc
+touch tests/System/TemporaryFiles/System/Processes
 
 # Check it pulls in both.
 [ "`modprobe noexport_dep-$BITNESS 2>&1`" = "INIT_MODULE: $SIZE_EXPORT_NODEP 
 INIT_MODULE: $SIZE_NOEXPORT_DEP " ]
 
 # Check it's happy if we tell it dep is already instealled
-cat > tests/tmp/proc <<EOF
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 export_nodep_$BITNESS 100 0 -
 EOF
 [ "`modprobe noexport_dep-$BITNESS 2>&1`" = "INIT_MODULE: $SIZE_NOEXPORT_DEP " ]
 
 # If there's an install command, it will be done.
-cat > tests/tmp/proc <<EOF
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 EOF
 
-echo "install export_nodep-$BITNESS COMMAND" > tests/tmp/modprobe.conf
+echo "install export_nodep-$BITNESS COMMAND" > tests/System/TemporaryFiles/modprobe.conf
 [ "`modprobe noexport_dep-$BITNESS 2>&1`" = "SYSTEM: COMMAND
 INIT_MODULE: $SIZE_NOEXPORT_DEP " ]
 
 # If it's in proc, install command WONT be done.
-cat > tests/tmp/proc <<EOF
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 export_nodep_$BITNESS 100 0 -
 EOF
 [ "`modprobe noexport_dep-$BITNESS 2>&1`" = "INIT_MODULE: $SIZE_NOEXPORT_DEP " ]
 
 # Do dependencies even if install command.
-echo "install noexport_dep-$BITNESS COMMAND" > tests/tmp/modprobe.conf
-cat > tests/tmp/proc <<EOF
+echo "install noexport_dep-$BITNESS COMMAND" > tests/System/TemporaryFiles/modprobe.conf
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 EOF
 [ "`modprobe noexport_dep-$BITNESS 2>&1`" = "INIT_MODULE: $SIZE_EXPORT_NODEP 
 SYSTEM: COMMAND" ]
 
 # Recursive install commands, WITH -q.
-echo "install export_nodep-$BITNESS modprobe --first-time --ignore-install export_nodep-$BITNESS && { modprobe noexport_dep-$BITNESS; /bin/true; }" > tests/tmp/modprobe.conf
+echo "install export_nodep-$BITNESS modprobe --first-time --ignore-install export_nodep-$BITNESS && { modprobe noexport_dep-$BITNESS; /System/Tools/true; }" > tests/System/TemporaryFiles/modprobe.conf
 
-cat > tests/tmp/proc <<EOF
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 EOF
 
 MODTEST_DO_SYSTEM=1
 MODTEST_INSERT_PROC=1
 export MODTEST_DO_SYSTEM MODTEST_INSERT_PROC
-[ "`modprobe -qv -- export_nodep-$BITNESS`" = "install modprobe --first-time --ignore-install export_nodep-$BITNESS && { modprobe noexport_dep-$BITNESS; /bin/true; }
-insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
-insmod /lib/modules/2.5.52/noexport_dep-$BITNESS.ko " ]
+[ "`modprobe -qv -- export_nodep-$BITNESS`" = "install modprobe --first-time --ignore-install export_nodep-$BITNESS && { modprobe noexport_dep-$BITNESS; /System/Tools/true; }
+insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_dep-$BITNESS.ko " ]
 unset MODTEST_DO_SYSTEM MODTEST_INSERT_PROC
 
 done
diff -urN module-init-tools-3.2/tests/test-modprobe/23recursive-deps.sh module-init-tools-3.2-STEP/tests/test-modprobe/23recursive-deps.sh
--- module-init-tools-3.2/tests/test-modprobe/23recursive-deps.sh	2004-01-30 14:38:58.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-modprobe/23recursive-deps.sh	2006-04-27 00:46:05.533598504 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 # If A depends on B and C, and B is installed, C still needs to be installed!
 # (Bug in 3.0-pre6 & 3.0-pre7).
@@ -6,64 +6,64 @@
 for BITNESS in 32 64; do
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS/normal/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
 MODTEST_OVERRIDE8=/etc/modprobe.conf
 MODTEST_OVERRIDE_WITH8=FILE-WHICH-DOESNT-EXIST
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
-MODTEST_OVERRIDE9=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH9=tests/tmp/modules.dep
+MODTEST_OVERRIDE9=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/proc/modules
-MODTEST_OVERRIDE_WITH10=tests/tmp/proc
+MODTEST_OVERRIDE10=/System/Processes/modules
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/System/Processes
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
 # Now create modules.dep
-cat > tests/tmp/modules.dep <<EOF
+cat > tests/System/TemporaryFiles/modules.dep <<EOF
 # Should handle comments.
-/lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko: /lib/modules/2.5.52/export_dep-$BITNESS.ko /lib/modules/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko: /System/Drivers/2.5.52/export_dep-$BITNESS.ko /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
 EOF
 
 # Now, export-dep is in proc (actually this can't happen, since it depends
 # on export_nodep, but this is to test).
-cat > tests/tmp/proc <<EOF
+cat > tests/System/TemporaryFiles/System/Processes <<EOF
 export_dep_$BITNESS 100 0 ,
 EOF
 
 SIZE_EXPORT_NODEP=$(echo `wc -c < tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko`)
 SIZE_NOEXPORT_DOUBLEDEP=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_doubledep-$BITNESS.ko`)
 
-[ "`modprobe -v noexport_doubledep-$BITNESS 2>&1`" = "insmod /lib/modules/2.5.52/export_nodep-$BITNESS.ko 
+[ "`modprobe -v noexport_doubledep-$BITNESS 2>&1`" = "insmod /System/Drivers/2.5.52/export_nodep-$BITNESS.ko 
 INIT_MODULE: $SIZE_EXPORT_NODEP 
-insmod /lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko 
+insmod /System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko 
 INIT_MODULE: $SIZE_NOEXPORT_DOUBLEDEP " ]
 
 done
diff -urN module-init-tools-3.2/tests/test-modprobe/24modprobe.conf-dir.sh module-init-tools-3.2-STEP/tests/test-modprobe/24modprobe.conf-dir.sh
--- module-init-tools-3.2/tests/test-modprobe/24modprobe.conf-dir.sh	2004-06-16 18:37:27.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/24modprobe.conf-dir.sh	2006-04-27 00:46:05.532598656 +1200
@@ -1,20 +1,20 @@
-#! /bin/sh
+#! /System/Tools/sh
 
-#! /bin/sh
+#! /System/Tools/sh
 # Test configuration file handling.
 
 for BITNESS in 32 64; do
 
 # Simple dump out test.
-[ "`modprobe -C /dev/null -c 2>&1`" = "" ]
-[ "`modprobe --config /dev/null --showconfig 2>&1`" = "" ]
+[ "`modprobe -C /System/Devices/null -c 2>&1`" = "" ]
+[ "`modprobe --config /System/Devices/null --showconfig 2>&1`" = "" ]
 
 # Explicitly mentioned config files must exist.
 [ "`modprobe -C FILE-WHICH-DOESNT-EXIST foo 2>&1`" = "FATAL: Failed to open config file FILE-WHICH-DOESNT-EXIST: No such file or directory" ]
 
 # Default one(s) don't have to.
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=/dev/null
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=/System/Devices/null
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 MODTEST_OVERRIDE2=/etc/modprobe.conf
@@ -28,9 +28,9 @@
 [ "`modprobe foo 2>&1`" = "FATAL: Module foo not found." ]
 
 # Create a simple config dir.
-rm -rf tests/tmp/modprobe.d tests/tmp/modprobe.conf
-mkdir tests/tmp/modprobe.d
-cat > tests/tmp/modprobe.d/1 <<EOF
+rm -rf tests/System/TemporaryFiles/modprobe.d tests/System/TemporaryFiles/modprobe.conf
+mkdir tests/System/TemporaryFiles/modprobe.d
+cat > tests/System/TemporaryFiles/modprobe.d/1 <<EOF
 # Various aliases
 alias alias_to_foo foo
 alias alias_to_bar bar
@@ -40,7 +40,7 @@
 alias alias_to_noexport_doubledep-$BITNESS noexport_doubledep-$BITNESS
 alias alias_to_noexport_nodep-$BITNESS_with_tabbed_options noexport_nodep-$BITNESS
 EOF
-cat > tests/tmp/modprobe.d/2 <<EOF
+cat > tests/System/TemporaryFiles/modprobe.d/2 <<EOF
 # Various options, including options to aliases.
 options alias_to_export_dep-$BITNESS I am alias to export_dep
 options export_dep-$BITNESS I am export_dep
@@ -56,7 +56,7 @@
 	irq=9 dma1=1 dma2=3 \\
 	enable=1 isapnp=0
 EOF
-cat > tests/tmp/modprobe.d/3 <<EOF
+cat > tests/System/TemporaryFiles/modprobe.d/3 <<EOF
 # Install commands
 install bar echo Installing bar
 install foo echo Installing foo
@@ -68,15 +68,15 @@
 remove export_nodep-$BITNESS echo Removing export_nodep
 EOF
 
-cat > tests/tmp/modprobe.d/4 <<EOF
+cat > tests/System/TemporaryFiles/modprobe.d/4 <<EOF
 # Finally, an include
-include tests/tmp/modprobe.d.included
+include tests/System/TemporaryFiles/modprobe.d.included
 EOF
 
 # Now create this included dir
-rm -rf tests/tmp/modprobe.d.included
-mkdir tests/tmp/modprobe.d.included
-cat > tests/tmp/modprobe.d.included/1 <<EOF
+rm -rf tests/System/TemporaryFiles/modprobe.d.included
+mkdir tests/System/TemporaryFiles/modprobe.d.included
+cat > tests/System/TemporaryFiles/modprobe.d.included/1 <<EOF
 install baz echo Installing baz
 remove baz echo Removing baz
 
@@ -84,77 +84,77 @@
 EOF
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_dep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/export_dep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/noexport_dep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH3=tests/data/$BITNESS/normal/noexport_dep-$BITNESS.ko
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH4=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/noexport_doubledep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH6=tests/data/$BITNESS/normal/noexport_doubledep-$BITNESS.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
-MODTEST_OVERRIDE7=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH7=tests/tmp/modules.dep
+MODTEST_OVERRIDE7=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH7=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE7 MODTEST_OVERRIDE_WITH7
 
 MODTEST_OVERRIDE8=/etc/modprobe.d
-MODTEST_OVERRIDE_WITH8=tests/tmp/modprobe.d
+MODTEST_OVERRIDE_WITH8=tests/System/TemporaryFiles/modprobe.d
 export MODTEST_OVERRIDE8 MODTEST_OVERRIDE_WITH8
 
 MODTEST_OVERRIDE9=/etc/modprobe.d.included
-MODTEST_OVERRIDE_WITH9=tests/tmp/modprobe.d.included
+MODTEST_OVERRIDE_WITH9=tests/System/TemporaryFiles/modprobe.d.included
 export MODTEST_OVERRIDE9 MODTEST_OVERRIDE_WITH9
 
-MODTEST_OVERRIDE10=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH10=tests/tmp/modules.dep
+MODTEST_OVERRIDE10=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH10=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE10 MODTEST_OVERRIDE_WITH10
 
-MODTEST_OVERRIDE11=/proc/modules
+MODTEST_OVERRIDE11=/System/Processes/modules
 MODTEST_OVERRIDE_WITH11=FILE-WHICH-DOESNT-EXIST
 export MODTEST_OVERRIDE11 MODTEST_OVERRIDE_WITH11
 
 MODTEST_OVERRIDE12=/etc/modprobe.d/1
-MODTEST_OVERRIDE_WITH12=tests/tmp/modprobe.d/1
+MODTEST_OVERRIDE_WITH12=tests/System/TemporaryFiles/modprobe.d/1
 export MODTEST_OVERRIDE12 MODTEST_OVERRIDE_WITH12
 
 MODTEST_OVERRIDE13=/etc/modprobe.d/2
-MODTEST_OVERRIDE_WITH13=tests/tmp/modprobe.d/2
+MODTEST_OVERRIDE_WITH13=tests/System/TemporaryFiles/modprobe.d/2
 export MODTEST_OVERRIDE13 MODTEST_OVERRIDE_WITH13
 
 MODTEST_OVERRIDE14=/etc/modprobe.d/3
-MODTEST_OVERRIDE_WITH14=tests/tmp/modprobe.d/3
+MODTEST_OVERRIDE_WITH14=tests/System/TemporaryFiles/modprobe.d/3
 export MODTEST_OVERRIDE14 MODTEST_OVERRIDE_WITH14
 
 MODTEST_OVERRIDE15=/etc/modprobe.d/4
-MODTEST_OVERRIDE_WITH15=tests/tmp/modprobe.d/4
+MODTEST_OVERRIDE_WITH15=tests/System/TemporaryFiles/modprobe.d/4
 export MODTEST_OVERRIDE15 MODTEST_OVERRIDE_WITH15
 
 MODTEST_OVERRIDE16=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH16=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH16=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE16 MODTEST_OVERRIDE_WITH16
 
 # Now create modules.dep
-cat > tests/tmp/modules.dep <<EOF
-/lib/modules/2.5.52/noexport_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/noexport_doubledep-$BITNESS.ko: /lib/modules/2.5.52/export_dep-$BITNESS.ko /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/noexport_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
-/lib/modules/2.5.52/export_nodep-$BITNESS.ko:
-/lib/modules/2.5.52/export_dep-$BITNESS.ko: /lib/modules/2.5.52/export_nodep-$BITNESS.ko
+cat > tests/System/TemporaryFiles/modules.dep <<EOF
+/System/Drivers/2.5.52/noexport_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/noexport_doubledep-$BITNESS.ko: /System/Drivers/2.5.52/export_dep-$BITNESS.ko /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/noexport_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
+/System/Drivers/2.5.52/export_nodep-$BITNESS.ko:
+/System/Drivers/2.5.52/export_dep-$BITNESS.ko: /System/Drivers/2.5.52/export_nodep-$BITNESS.ko
 EOF
 
 SIZE_NOEXPORT_NODEP=$(echo `wc -c < tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko`)
@@ -263,7 +263,7 @@
 [ "`modprobe -r alias_to_baz 2>&1`" = "SYSTEM: echo Removing baz" ]
 
 # If it finds modprobe.conf, won't look in dir.
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 # Various aliases
 alias alias_to_ foo
 EOF
diff -urN module-init-tools-3.2/tests/test-modprobe/25locking.sh module-init-tools-3.2-STEP/tests/test-modprobe/25locking.sh
--- module-init-tools-3.2/tests/test-modprobe/25locking.sh	2004-06-21 10:51:49.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/25locking.sh	2006-04-27 00:46:05.535598200 +1200
@@ -1,80 +1,80 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 for BITNESS in 32 64; do
 
 # Create a simple config file.
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 EOF
 
 # Inputs
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME
 MODTEST_OVERRIDE_WITH1=tests/data/$BITNESS/normal
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/export_nodep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/export_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH3=tests/tmp/modules.dep
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/proc/modules
+MODTEST_OVERRIDE4=/System/Processes/modules
 MODTEST_OVERRIDE_WITH4=FILE-WHICH-DOESNT-EXIST
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
 MODTEST_OVERRIDE5=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH5=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH5=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
 # Now create modules.dep
-cat > tests/tmp/modules.dep <<EOF
-/lib/modules/2.5.52/export_nodep-$BITNESS.ko:
-tests/tmp/noexport_nodep-$BITNESS.ko:
+cat > tests/System/TemporaryFiles/modules.dep <<EOF
+/System/Drivers/2.5.52/export_nodep-$BITNESS.ko:
+tests/System/TemporaryFiles/noexport_nodep-$BITNESS.ko:
 EOF
 
-MODPROBE_WAIT=tests/tmp/continue
+MODPROBE_WAIT=tests/System/TemporaryFiles/continue
 export MODPROBE_WAIT
 
 SIZE=$(echo `wc -c < tests/data/$BITNESS/normal/export_nodep-$BITNESS.ko`)
 
 # Should be looping.
-modprobe export_nodep-$BITNESS > tests/tmp/out1 2>&1 &
+modprobe export_nodep-$BITNESS > tests/System/TemporaryFiles/out1 2>&1 &
 sleep 2
 
-[ "`cat tests/tmp/out1`" = "Looping on tests/tmp/continue" ]
+[ "`cat tests/System/TemporaryFiles/out1`" = "Looping on tests/System/TemporaryFiles/continue" ]
 
 # Second one should wait.
-modprobe -r export_nodep-$BITNESS > tests/tmp/out2 2>&1 &
+modprobe -r export_nodep-$BITNESS > tests/System/TemporaryFiles/out2 2>&1 &
 sleep 2
 
-[ "`cat tests/tmp/out2`" = "" ]
+[ "`cat tests/System/TemporaryFiles/out2`" = "" ]
 
 # Release first one
-touch tests/tmp/continue
+touch tests/System/TemporaryFiles/continue
 sleep 2
 
 # Should have exited and cleaned up
-[ "`cat tests/tmp/out1`" = "Looping on tests/tmp/continue
-Removing tests/tmp/continue
+[ "`cat tests/System/TemporaryFiles/out1`" = "Looping on tests/System/TemporaryFiles/continue
+Removing tests/System/TemporaryFiles/continue
 INIT_MODULE: $SIZE " ]
-[ ! -f tests/tmp/continue ]
+[ ! -f tests/System/TemporaryFiles/continue ]
 
 # Second one should now be looping.
-[ "`cat tests/tmp/out2`" = "Looping on tests/tmp/continue" ]
+[ "`cat tests/System/TemporaryFiles/out2`" = "Looping on tests/System/TemporaryFiles/continue" ]
 
 # Release second one
-touch tests/tmp/continue
+touch tests/System/TemporaryFiles/continue
 sleep 2
 
 # Should have exited and cleaned up
-[ "`cat tests/tmp/out2`" = "Looping on tests/tmp/continue
-Removing tests/tmp/continue
+[ "`cat tests/System/TemporaryFiles/out2`" = "Looping on tests/System/TemporaryFiles/continue
+Removing tests/System/TemporaryFiles/continue
 DELETE_MODULE: export_nodep_$BITNESS EXCL " ]
-[ ! -f tests/tmp/continue ]
+[ ! -f tests/System/TemporaryFiles/continue ]
 
 # Lock gets dropped for install commands
-cat > tests/tmp/modprobe.conf <<EOF
+cat > tests/System/TemporaryFiles/modprobe.conf <<EOF
 # Aliases to cause one command to hang.
 install export_nodep-$BITNESS modprobe --ignore-install export_nodep-$BITNESS foo
 remove export_nodep-$BITNESS modprobe -r --ignore-remove export_nodep-$BITNESS
@@ -83,22 +83,22 @@
 MODTEST_DO_SYSTEM=1
 export MODTEST_DO_SYSTEM
 
-touch tests/tmp/continue
-[ "`modprobe export_nodep-$BITNESS`" = "Looping on tests/tmp/continue
-Removing tests/tmp/continue
+touch tests/System/TemporaryFiles/continue
+[ "`modprobe export_nodep-$BITNESS`" = "Looping on tests/System/TemporaryFiles/continue
+Removing tests/System/TemporaryFiles/continue
 INIT_MODULE: $SIZE foo" ]
 
-touch tests/tmp/continue
-[ "`modprobe -r export_nodep-$BITNESS`" = "Looping on tests/tmp/continue
-Removing tests/tmp/continue
+touch tests/System/TemporaryFiles/continue
+[ "`modprobe -r export_nodep-$BITNESS`" = "Looping on tests/System/TemporaryFiles/continue
+Removing tests/System/TemporaryFiles/continue
 DELETE_MODULE: export_nodep_$BITNESS EXCL " ]
 
 # Check that a read-only module still loads.
-cp tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko tests/tmp/
-chmod a-w tests/tmp/noexport_nodep-$BITNESS.ko
+cp tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko tests/System/TemporaryFiles/
+chmod a-w tests/System/TemporaryFiles/noexport_nodep-$BITNESS.ko
 unset MODPROBE_WAIT
 
-SIZE2=$(echo `wc -c < tests/tmp/noexport_nodep-$BITNESS.ko`)
+SIZE2=$(echo `wc -c < tests/System/TemporaryFiles/noexport_nodep-$BITNESS.ko`)
 
 [ "`modprobe noexport_nodep-$BITNESS`" = "INIT_MODULE: $SIZE2 " ]
 done
diff -urN module-init-tools-3.2/tests/test-modprobe/26blacklist.sh module-init-tools-3.2-STEP/tests/test-modprobe/26blacklist.sh
--- module-init-tools-3.2/tests/test-modprobe/26blacklist.sh	2005-05-12 15:22:07.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/26blacklist.sh	2006-04-27 00:46:05.534598352 +1200
@@ -1,30 +1,30 @@
-#! /bin/sh
+#! /System/Tools/sh
 # Test for blacklist usage.
 
 for BITNESS in 32 64; do
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 MODTEST_OVERRIDE2=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH2=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH2=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
-MODTEST_OVERRIDE3=/lib/modules/$MODTEST_UNAME/modules.alias
-MODTEST_OVERRIDE_WITH3=tests/tmp/modules.alias
+MODTEST_OVERRIDE3=/System/Drivers/$MODTEST_UNAME/modules.alias
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/modules.alias
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
-MODTEST_OVERRIDE4=/lib/modules/$MODTEST_UNAME/modules.symbols
-MODTEST_OVERRIDE_WITH4=/dev/null
+MODTEST_OVERRIDE4=/System/Drivers/$MODTEST_UNAME/modules.symbols
+MODTEST_OVERRIDE_WITH4=/System/Devices/null
 export MODTEST_OVERRIDE4 MODTEST_OVERRIDE_WITH4
 
-MODTEST_OVERRIDE5=/lib/modules/$MODTEST_UNAME/kernel/alias-$BITNESS.ko
+MODTEST_OVERRIDE5=/System/Drivers/$MODTEST_UNAME/kernel/alias-$BITNESS.ko
 MODTEST_OVERRIDE_WITH5=tests/data/$BITNESS/alias/alias-$BITNESS.ko
 export MODTEST_OVERRIDE5 MODTEST_OVERRIDE_WITH5
 
-MODTEST_OVERRIDE6=/lib/modules/$MODTEST_UNAME/kernel/foo.ko
-MODTEST_OVERRIDE_WITH6=tests/tmp/foo.ko
+MODTEST_OVERRIDE6=/System/Drivers/$MODTEST_UNAME/kernel/foo.ko
+MODTEST_OVERRIDE_WITH6=tests/System/TemporaryFiles/foo.ko
 export MODTEST_OVERRIDE6 MODTEST_OVERRIDE_WITH6
 
 MODTEST_OVERRIDE7=/etc/modprobe.d
@@ -33,30 +33,30 @@
 
 SIZE=$(echo `wc -c < tests/data/$BITNESS/alias/alias-$BITNESS.ko`)
 
-echo "/lib/modules/$MODTEST_UNAME/kernel/alias-$BITNESS.ko:" > tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/kernel/foo.ko:" >> tests/tmp/modules.dep
-rm -f tests/tmp/modules.alias
-rm -f tests/tmp/modprobe.conf
-echo Test > tests/tmp/foo.ko
+echo "/System/Drivers/$MODTEST_UNAME/kernel/alias-$BITNESS.ko:" > tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/kernel/foo.ko:" >> tests/System/TemporaryFiles/modules.dep
+rm -f tests/System/TemporaryFiles/modules.alias
+rm -f tests/System/TemporaryFiles/modprobe.conf
+echo Test > tests/System/TemporaryFiles/foo.ko
 
 # First, alias found in modules.alias works.
-echo "alias bar alias-$BITNESS" > tests/tmp/modules.alias
+echo "alias bar alias-$BITNESS" > tests/System/TemporaryFiles/modules.alias
 [ "`modprobe bar 2>&1`" = "INIT_MODULE: $SIZE " ]
 
 # Blacklist makes it fail.
-echo "blacklist alias-$BITNESS" > tests/tmp/modprobe.conf
+echo "blacklist alias-$BITNESS" > tests/System/TemporaryFiles/modprobe.conf
 [ "`modprobe bar 2>&1`" = "FATAL: Module bar not found." ]
 
 # Blacklist doesn't effect other aliases.
-echo "alias bar foo" >> tests/tmp/modules.alias
+echo "alias bar foo" >> tests/System/TemporaryFiles/modules.alias
 [ "`modprobe bar 2>&1`" = "INIT_MODULE: 5 " ]
 
 # Blacklist both.
-echo "blacklist foo" >> tests/tmp/modprobe.conf
+echo "blacklist foo" >> tests/System/TemporaryFiles/modprobe.conf
 [ "`modprobe bar 2>&1`" = "FATAL: Module bar not found." ]
 
 # Remove blacklist, all works.
-rm -f tests/tmp/modprobe.conf
+rm -f tests/System/TemporaryFiles/modprobe.conf
 RESULT="`modprobe bar 2>&1`"
 [ "$RESULT" = "INIT_MODULE: $SIZE 
 INIT_MODULE: 5 " ] || [ "$RESULT" = "INIT_MODULE: 5 
diff -urN module-init-tools-3.2/tests/test-modprobe/27cmdline-install-remove.sh module-init-tools-3.2-STEP/tests/test-modprobe/27cmdline-install-remove.sh
--- module-init-tools-3.2/tests/test-modprobe/27cmdline-install-remove.sh	2005-06-01 23:27:27.000000000 +1200
+++ module-init-tools-3.2-STEP/tests/test-modprobe/27cmdline-install-remove.sh	2006-04-27 00:46:11.907629504 +1200
@@ -1,27 +1,27 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 for BITNESS in 32 64; do
 
-MODTEST_OVERRIDE1=/lib/modules/$MODTEST_UNAME/modules.dep
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules.dep
+MODTEST_OVERRIDE1=/System/Drivers/$MODTEST_UNAME/modules.dep
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules.dep
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
-MODTEST_OVERRIDE2=/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
+MODTEST_OVERRIDE2=/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko
 MODTEST_OVERRIDE_WITH2=tests/data/$BITNESS/normal/noexport_nodep-$BITNESS.ko
 export MODTEST_OVERRIDE2 MODTEST_OVERRIDE_WITH2
 
 MODTEST_OVERRIDE3=/etc/modprobe.conf
-MODTEST_OVERRIDE_WITH3=tests/tmp/modprobe.conf
+MODTEST_OVERRIDE_WITH3=tests/System/TemporaryFiles/modprobe.conf
 export MODTEST_OVERRIDE3 MODTEST_OVERRIDE_WITH3
 
 # Set up modules.dep file.
-echo "# A comment" > tests/tmp/modules.dep
-echo "/lib/modules/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" >> tests/tmp/modules.dep
+echo "# A comment" > tests/System/TemporaryFiles/modules.dep
+echo "/System/Drivers/$MODTEST_UNAME/noexport_nodep-$BITNESS.ko:" >> tests/System/TemporaryFiles/modules.dep
 
 # Set up modprobe.conf file: one at end, one with text either side.
-echo "options noexport_nodep-$BITNESS file-options" > tests/tmp/modprobe.conf
-echo "install noexport_nodep-$BITNESS modprobe --ignore-install noexport_nodep-$BITNESS \$CMDLINE_OPTS" >> tests/tmp/modprobe.conf
-echo "install othertarget echo \$CMDLINE_OPTS otheropts" >> tests/tmp/modprobe.conf
+echo "options noexport_nodep-$BITNESS file-options" > tests/System/TemporaryFiles/modprobe.conf
+echo "install noexport_nodep-$BITNESS modprobe --ignore-install noexport_nodep-$BITNESS \$CMDLINE_OPTS" >> tests/System/TemporaryFiles/modprobe.conf
+echo "install othertarget echo \$CMDLINE_OPTS otheropts" >> tests/System/TemporaryFiles/modprobe.conf
 
 # With quoted args
 [ "`modprobe noexport_nodep-$BITNESS 'foo="bar baz"' 2>&1`" = "SYSTEM: modprobe --ignore-install noexport_nodep-$BITNESS foo=\"bar baz\"" ]
diff -urN module-init-tools-3.2/tests/test-rmmod/01backcompat.sh module-init-tools-3.2-STEP/tests/test-rmmod/01backcompat.sh
--- module-init-tools-3.2/tests/test-rmmod/01backcompat.sh	2002-12-28 19:21:21.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-rmmod/01backcompat.sh	2006-04-27 00:46:11.908629352 +1200
@@ -1,4 +1,4 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 MODTEST_DO_CREATE_MODULE=1
 export MODTEST_DO_CREATE_MODULE
@@ -7,11 +7,11 @@
 [ "`./rmmod 2>&1`" = "Kernel requires old rmmod, but couldn't run ./rmmod.old: No such file or directory" ]
 
 # Create one for it to find, put it in the path
-echo '#! /bin/sh' > tests/tmp/rmmod.old
-echo 'echo -n RMMOD.OLD' >> tests/tmp/rmmod.old
-echo "for f; do echo -n \ \'\$f\'; done" >> tests/tmp/rmmod.old
-chmod a+x tests/tmp/rmmod.old
-PATH=`pwd`/tests/tmp:$PATH
+echo '#! /System/Tools/sh' > tests/System/TemporaryFiles/rmmod.old
+echo 'echo -n RMMOD.OLD' >> tests/System/TemporaryFiles/rmmod.old
+echo "for f; do echo -n \ \'\$f\'; done" >> tests/System/TemporaryFiles/rmmod.old
+chmod a+x tests/System/TemporaryFiles/rmmod.old
+PATH=`pwd`/tests/System/TemporaryFiles:$PATH
 
 # If explicit path given, shouldn't search path.
 [ "`./rmmod 2>&1`" = "Kernel requires old rmmod, but couldn't run ./rmmod.old: No such file or directory" ]
diff -urN module-init-tools-3.2/tests/test-rmmod/02namefix.sh module-init-tools-3.2-STEP/tests/test-rmmod/02namefix.sh
--- module-init-tools-3.2/tests/test-rmmod/02namefix.sh	2002-12-21 23:48:33.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-rmmod/02namefix.sh	2006-04-27 00:46:11.909629200 +1200
@@ -1,18 +1,18 @@
-#! /bin/sh
+#! /System/Tools/sh
 
-MODTEST_OVERRIDE1=/proc/modules
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules
+MODTEST_OVERRIDE1=/System/Processes/modules
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 # Old style
-echo 'foo_bar 100 0' > tests/tmp/modules
+echo 'foo_bar 100 0' > tests/System/TemporaryFiles/modules
 
 [ "`rmmod foo_bar`" = "DELETE_MODULE: foo_bar EXCL NONBLOCK " ]
 
-[ "`rmmod /lib/modules/2.5.52/kernel/foo_bar.o`" = "DELETE_MODULE: foo_bar EXCL NONBLOCK " ]
+[ "`rmmod /System/Drivers/2.5.52/kernel/foo_bar.o`" = "DELETE_MODULE: foo_bar EXCL NONBLOCK " ]
 
-[ "`rmmod /lib/modules/2.5.52/kernel/foo_bar.ko`" = "DELETE_MODULE: foo_bar EXCL NONBLOCK " ]
+[ "`rmmod /System/Drivers/2.5.52/kernel/foo_bar.ko`" = "DELETE_MODULE: foo_bar EXCL NONBLOCK " ]
 
-[ "`rmmod /lib/modules/2.5.52/kernel/foo-bar.ko`" = "DELETE_MODULE: foo_bar EXCL NONBLOCK " ]
+[ "`rmmod /System/Drivers/2.5.52/kernel/foo-bar.ko`" = "DELETE_MODULE: foo_bar EXCL NONBLOCK " ]
 
 [ "`rmmod foo-bar`" = "DELETE_MODULE: foo_bar EXCL NONBLOCK " ]
diff -urN module-init-tools-3.2/tests/test-rmmod/03inuse.sh module-init-tools-3.2-STEP/tests/test-rmmod/03inuse.sh
--- module-init-tools-3.2/tests/test-rmmod/03inuse.sh	2002-12-22 00:10:36.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-rmmod/03inuse.sh	2006-04-27 00:46:11.910629048 +1200
@@ -1,52 +1,52 @@
-#! /bin/sh
+#! /System/Tools/sh
 
-MODTEST_OVERRIDE1=/proc/modules
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules
+MODTEST_OVERRIDE1=/System/Processes/modules
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 # Old style
-echo 'foo_bar 100 1' > tests/tmp/modules
+echo 'foo_bar 100 1' > tests/System/TemporaryFiles/modules
 
 [ "`rmmod foo_bar 2>&1`" = "ERROR: Module foo_bar is in use" ]
 [ "`rmmod foo-bar 2>&1`" = "ERROR: Module foo_bar is in use" ]
 
 # Old style with dependencies
-echo 'foo_bar 100 1 dep1' > tests/tmp/modules
+echo 'foo_bar 100 1 dep1' > tests/System/TemporaryFiles/modules
 
 [ "`rmmod foo_bar 2>&1`" = "ERROR: Module foo_bar is in use by dep1" ]
 [ "`rmmod foo-bar 2>&1`" = "ERROR: Module foo_bar is in use by dep1" ]
 
-echo 'foo_bar 100 1 dep1 dep2' > tests/tmp/modules
+echo 'foo_bar 100 1 dep1 dep2' > tests/System/TemporaryFiles/modules
 
 [ "`rmmod foo_bar 2>&1`" = "ERROR: Module foo_bar is in use by dep1 dep2" ]
 [ "`rmmod foo-bar 2>&1`" = "ERROR: Module foo_bar is in use by dep1 dep2" ]
 
 # New style
-echo 'foo_bar 100 1 -' > tests/tmp/modules
+echo 'foo_bar 100 1 -' > tests/System/TemporaryFiles/modules
 
 [ "`rmmod foo_bar 2>&1`" = "ERROR: Module foo_bar is in use" ]
 [ "`rmmod foo-bar 2>&1`" = "ERROR: Module foo_bar is in use" ]
 
-echo 'foo_bar 100 1 a,' > tests/tmp/modules
+echo 'foo_bar 100 1 a,' > tests/System/TemporaryFiles/modules
 
 [ "`rmmod foo_bar 2>&1`" = "ERROR: Module foo_bar is in use by a" ]
 [ "`rmmod foo-bar 2>&1`" = "ERROR: Module foo_bar is in use by a" ]
 
-echo 'foo_bar 100 1 a,b,' > tests/tmp/modules
+echo 'foo_bar 100 1 a,b,' > tests/System/TemporaryFiles/modules
 
 [ "`rmmod foo_bar 2>&1`" = "ERROR: Module foo_bar is in use by a,b" ]
 [ "`rmmod foo-bar 2>&1`" = "ERROR: Module foo_bar is in use by a,b" ]
 
-echo 'foo_bar 100 1 a,b, newoption' > tests/tmp/modules
+echo 'foo_bar 100 1 a,b, newoption' > tests/System/TemporaryFiles/modules
 
 [ "`rmmod foo_bar 2>&1`" = "ERROR: Module foo_bar is in use by a,b" ]
 [ "`rmmod foo-bar 2>&1`" = "ERROR: Module foo_bar is in use by a,b" ]
 
 # Not in use (newstyle)
-echo 'foo_bar 100 0 -' > tests/tmp/modules
+echo 'foo_bar 100 0 -' > tests/System/TemporaryFiles/modules
 [ "`rmmod foo_bar`" = "DELETE_MODULE: foo_bar EXCL NONBLOCK " ]
 [ "`rmmod foo-bar`" = "DELETE_MODULE: foo_bar EXCL NONBLOCK " ]
 
-echo 'foo_bar 100 0 - newoption' > tests/tmp/modules
+echo 'foo_bar 100 0 - newoption' > tests/System/TemporaryFiles/modules
 [ "`rmmod foo_bar`" = "DELETE_MODULE: foo_bar EXCL NONBLOCK " ]
 [ "`rmmod foo-bar`" = "DELETE_MODULE: foo_bar EXCL NONBLOCK " ]
diff -urN module-init-tools-3.2/tests/test-rmmod/04flags.sh module-init-tools-3.2-STEP/tests/test-rmmod/04flags.sh
--- module-init-tools-3.2/tests/test-rmmod/04flags.sh	2002-12-21 23:22:29.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-rmmod/04flags.sh	2006-04-27 00:46:11.910629048 +1200
@@ -1,27 +1,27 @@
-#! /bin/sh
+#! /System/Tools/sh
 
-MODTEST_OVERRIDE1=/proc/modules
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules
+MODTEST_OVERRIDE1=/System/Processes/modules
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules
 
 # Old style
-echo 'foo_bar 100 0' > tests/tmp/modules
+echo 'foo_bar 100 0' > tests/System/TemporaryFiles/modules
 
 [ "`rmmod -f foo_bar`" = "DELETE_MODULE: foo_bar EXCL TRUNC NONBLOCK " ]
 [ "`rmmod -f foo-bar`" = "DELETE_MODULE: foo_bar EXCL TRUNC NONBLOCK " ]
 
-[ "`rmmod -f /lib/modules/2.5.52/kernel/foo_bar.o`" = "DELETE_MODULE: foo_bar EXCL TRUNC NONBLOCK " ]
-[ "`rmmod -f /lib/modules/2.5.52/kernel/foo_bar.ko`" = "DELETE_MODULE: foo_bar EXCL TRUNC NONBLOCK " ]
-[ "`rmmod -f /lib/modules/2.5.52/kernel/foo-bar.ko`" = "DELETE_MODULE: foo_bar EXCL TRUNC NONBLOCK " ]
+[ "`rmmod -f /System/Drivers/2.5.52/kernel/foo_bar.o`" = "DELETE_MODULE: foo_bar EXCL TRUNC NONBLOCK " ]
+[ "`rmmod -f /System/Drivers/2.5.52/kernel/foo_bar.ko`" = "DELETE_MODULE: foo_bar EXCL TRUNC NONBLOCK " ]
+[ "`rmmod -f /System/Drivers/2.5.52/kernel/foo-bar.ko`" = "DELETE_MODULE: foo_bar EXCL TRUNC NONBLOCK " ]
 
 [ "`rmmod -w foo_bar`" = "DELETE_MODULE: foo_bar EXCL " ]
 [ "`rmmod -w foo-bar`" = "DELETE_MODULE: foo_bar EXCL " ]
 
-[ "`rmmod -w /lib/modules/2.5.52/kernel/foo_bar.o`" = "DELETE_MODULE: foo_bar EXCL " ]
-[ "`rmmod -w /lib/modules/2.5.52/kernel/foo_bar.ko`" = "DELETE_MODULE: foo_bar EXCL " ]
-[ "`rmmod -w /lib/modules/2.5.52/kernel/foo-bar.ko`" = "DELETE_MODULE: foo_bar EXCL " ]
+[ "`rmmod -w /System/Drivers/2.5.52/kernel/foo_bar.o`" = "DELETE_MODULE: foo_bar EXCL " ]
+[ "`rmmod -w /System/Drivers/2.5.52/kernel/foo_bar.ko`" = "DELETE_MODULE: foo_bar EXCL " ]
+[ "`rmmod -w /System/Drivers/2.5.52/kernel/foo-bar.ko`" = "DELETE_MODULE: foo_bar EXCL " ]
 
 # Both should work on "in-use" modules.
-echo 'foo_bar 100 1' > tests/tmp/modules
+echo 'foo_bar 100 1' > tests/System/TemporaryFiles/modules
 
 [ "`rmmod -f foo_bar`" = "DELETE_MODULE: foo_bar EXCL TRUNC NONBLOCK " ]
 [ "`rmmod -w foo_bar`" = "DELETE_MODULE: foo_bar EXCL " ]
diff -urN module-init-tools-3.2/tests/test-rmmod/05noproc.sh module-init-tools-3.2-STEP/tests/test-rmmod/05noproc.sh
--- module-init-tools-3.2/tests/test-rmmod/05noproc.sh	2004-01-05 19:54:37.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-rmmod/05noproc.sh	2006-04-27 00:46:11.911628896 +1200
@@ -1,7 +1,7 @@
-#! /bin/sh
+#! /System/Tools/sh
 
-MODTEST_OVERRIDE1=/proc/modules
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules
+MODTEST_OVERRIDE1=/System/Processes/modules
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 # We allow this in case proc is not mounted.
@@ -9,10 +9,10 @@
 
 # We don't allow any other errors.  Doesn't work if we're root.
 if [ `id -u` -ne 0 ]; then
-    touch tests/tmp/modules
-    chmod 000 tests/tmp/modules
+    touch tests/System/TemporaryFiles/modules
+    chmod 000 tests/System/TemporaryFiles/modules
 
-    [ "`rmmod foo_bar 2>&1`" = "FATAL: can't open /proc/modules: Permission denied" ]
+    [ "`rmmod foo_bar 2>&1`" = "FATAL: can't open /System/Processes/modules: Permission denied" ]
 
     # But -f doesn't care
     [ "`rmmod -f foo_bar`" = "DELETE_MODULE: foo_bar EXCL TRUNC NONBLOCK " ]
diff -urN module-init-tools-3.2/tests/test-rmmod/06multi.sh module-init-tools-3.2-STEP/tests/test-rmmod/06multi.sh
--- module-init-tools-3.2/tests/test-rmmod/06multi.sh	2002-12-22 00:18:44.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/test-rmmod/06multi.sh	2006-04-27 00:46:11.911628896 +1200
@@ -1,12 +1,12 @@
-#! /bin/sh
+#! /System/Tools/sh
 
-MODTEST_OVERRIDE1=/proc/modules
-MODTEST_OVERRIDE_WITH1=tests/tmp/modules
+MODTEST_OVERRIDE1=/System/Processes/modules
+MODTEST_OVERRIDE_WITH1=tests/System/TemporaryFiles/modules
 export MODTEST_OVERRIDE1 MODTEST_OVERRIDE_WITH1
 
 # Old style
-echo 'foo 100 0' > tests/tmp/modules
-echo 'bar 100 0' >> tests/tmp/modules
+echo 'foo 100 0' > tests/System/TemporaryFiles/modules
+echo 'bar 100 0' >> tests/System/TemporaryFiles/modules
 
 [ "`rmmod foo bar`" = "DELETE_MODULE: foo EXCL NONBLOCK 
 DELETE_MODULE: bar EXCL NONBLOCK " ]
@@ -18,11 +18,11 @@
 DELETE_MODULE: bar EXCL " ]
 
 # First examine stdout (mixing them gives unpredictable results)
-[ "`rmmod foo bar baz 2>/dev/null`" = "DELETE_MODULE: foo EXCL NONBLOCK 
+[ "`rmmod foo bar baz 2>/System/Devices/null`" = "DELETE_MODULE: foo EXCL NONBLOCK 
 DELETE_MODULE: bar EXCL NONBLOCK " ]
-[ "`rmmod baz foo bar 2>/dev/null`" = "DELETE_MODULE: foo EXCL NONBLOCK 
+[ "`rmmod baz foo bar 2>/System/Devices/null`" = "DELETE_MODULE: foo EXCL NONBLOCK 
 DELETE_MODULE: bar EXCL NONBLOCK " ]
 
 # Now examine stderr.
-[ "`rmmod foo bar baz 2>&1 >/dev/null`" = "ERROR: Module baz does not exist in /proc/modules" ]
-[ "`rmmod baz foo bar 2>&1 >/dev/null`" = "ERROR: Module baz does not exist in /proc/modules" ]
+[ "`rmmod foo bar baz 2>&1 >/System/Devices/null`" = "ERROR: Module baz does not exist in /System/Processes/modules" ]
+[ "`rmmod baz foo bar 2>&1 >/System/Devices/null`" = "ERROR: Module baz does not exist in /System/Processes/modules" ]
diff -urN module-init-tools-3.2/tests/tmp/modules.dep module-init-tools-3.2-STEP/tests/tmp/modules.dep
--- module-init-tools-3.2/tests/tmp/modules.dep	2005-10-29 19:07:34.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/tmp/modules.dep	2006-04-27 00:46:11.912628744 +1200
@@ -1,2 +1,2 @@
-/lib/modules/2.5.52/export_nodep-32.ko:
-tests/tmp/noexport_nodep-32.ko:
+/System/Drivers/2.5.52/export_nodep-32.ko:
+tests/System/TemporaryFiles/noexport_nodep-32.ko:
diff -urN module-init-tools-3.2/tests/tmp/out1 module-init-tools-3.2-STEP/tests/tmp/out1
--- module-init-tools-3.2/tests/tmp/out1	2005-10-29 19:07:38.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/tmp/out1	2006-04-27 00:46:11.913628592 +1200
@@ -1 +1 @@
-Looping on tests/tmp/continue
+Looping on tests/System/TemporaryFiles/continue
diff -urN module-init-tools-3.2/tests/valgrindme.sh module-init-tools-3.2-STEP/tests/valgrindme.sh
--- module-init-tools-3.2/tests/valgrindme.sh	2005-10-28 20:16:20.000000000 +1300
+++ module-init-tools-3.2-STEP/tests/valgrindme.sh	2006-04-27 00:45:28.315256552 +1200
@@ -1,13 +1,13 @@
-#! /bin/sh
+#! /System/Tools/sh
 
 # Make sure it finds real one this time.
 PATH=`pwd`:$PATH
-valgrind -q --num-callers=8 --suppressions=tests/vg-suppressions --log-fd=3 `basename $0` "$@" 3>/tmp/valgrind
+valgrind -q --num-callers=8 --suppressions=tests/vg-suppressions --log-fd=3 `basename $0` "$@" 3>/System/TemporaryFiles/valgrind
 ret=$?
 
-if [ -s /tmp/valgrind ]; then
-    echo VALGRIND FAILED for $0 "$@" > /proc/$PPID/fd/1
-    cat /tmp/valgrind > /proc/$PPID/fd/1
+if [ -s /System/TemporaryFiles/valgrind ]; then
+    echo VALGRIND FAILED for $0 "$@" > /System/Processes/$PPID/fd/1
+    cat /System/TemporaryFiles/valgrind > /System/Processes/$PPID/fd/1
     kill $PPID
     exit 1
 fi
